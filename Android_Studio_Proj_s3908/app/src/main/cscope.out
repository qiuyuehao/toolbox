cscope 16 C:\Users\YUQI\Android_Studio_Proj_s3618\app\src\main               0000387623
	@cpp/jni/err_msg_ctrl.c

28 
	~<°dio.h
>

29 
	~<°dlib.h
>

30 
	~<°rög.h
>

31 
	~<°dboﬁ.h
>

33 
	~"îr_msg_˘æ.h
"

36 
	sîr‹_mesßge
 {

37 
boﬁ
 
	mis_fûl
;

38 *
	mmsg
;

40 
îr‹_mesßge
 
	gîr_msg
[
MAX_ERR_MSG_CNT
];

43 
	gidx_îr
;

51 
	$add_îr‹_msg
(c⁄° *
msg
)

53 i‡(
idx_îr
 > 
MAX_ERR_MSG_CNT
) {

57 
îr_msg
[
idx_îr
].
is_fûl
 = 
åue
;

58 
îr_msg
[
idx_îr
].
msg
 = 
	`°rdup
(msg);

60 
idx_îr
 += 1;

61 
	}
}

69 
	$˛ór_Æl_îr‹_msg
()

71 
i
;

72 
i
 = 0 ; i < 
idx_îr
; i++) {

73 i‡((
îr_msg
[
i
].
msg
Ë&& (
	`°æí
(err_msg[i].msg) != 0)) {

74 
îr_msg
[
i
].
is_fûl
 = 
Ál£
;

75 
	`‰ì
(
îr_msg
[
i
].
msg
);

76 
îr_msg
[
i
].
msg
 = 
NULL
;

79 
idx_îr
 = 0;

80 
	}
}

88 
	$gë_num_îr_msg
() {

89  
idx_îr
;

90 
	}
}

98 * 
	$gë_îr_msg
(
idx
) {

100 i‡(
idx
 > 
MAX_ERR_MSG_CNT
) {

101  
NULL
;

104 i‡(
îr_msg
[
idx
].
is_fûl
)

105  
îr_msg
[
idx
].
msg
;

107  
NULL
;

108 
	}
}

	@cpp/jni/err_msg_ctrl.h

28 #i‚de‡
_SYNA_ERROR_HANDLE_H__


29 
	#_SYNA_ERROR_HANDLE_H__


	)

31 
	#MAX_ERR_STRING_LEN
 (1024)

	)

32 
	#MAX_ERR_MSG_CNT
 (1000)

	)

34 
add_îr‹_msg
(c⁄° *
msg
);

35 
˛ór_Æl_îr‹_msg
();

36 
gë_num_îr_msg
();

37 * 
gë_îr_msg
(
idx
);

	@cpp/jni/extended_high_resistance.c

31 
	~<°dio.h
>

32 
	~<°dlib.h
>

33 
	~<°rög.h
>

35 
	~"«tive_sy«_lib.h
"

37 
	sex_high_ªsi°™˚_d©a
{

38 
	mtx_ch™√l_cou¡
;

39 
	mrx_ch™√l_cou¡
;

40 **
	mdñè
;

41 **
	mba£löe
;

42 **
	mª„ªn˚
;

43 **
	mªsu…
;

45 
ex_high_ªsi°™˚_d©a
 
	gg_ã°_d©a
;

47 ** 
Æloˇã_2d_¨øy
(
row
, 
cﬁumn
);

48 
‰ì_2d_¨øy
(**
¨øy_2d
, 
row
);

50 ** 
	$Æloˇã_2d_¨øy
(
row
, 
cﬁumn
)

52 
i
 = 0;

53 **
¨øy_2d
 = (**Ë
	`mÆloc
((*Ë* 
row
);

54 
i
 = 0; i < 
row
; i++)

55 
¨øy_2d
[
i
] = (*Ë
	`mÆloc
((Ë* 
cﬁumn
);

57  
¨øy_2d
;

58 
	}
}

60 
	$‰ì_2d_¨øy
(**
¨øy_2d
, 
row
)

62 *
±r
;

63 
i
 = 0; i < 
row
; i++){

64 
±r
 = 
¨øy_2d
[
i
];

65 
	`‰ì
(
±r
);

67 
	`‰ì
(
¨øy_2d
);

68 
	}
}

70 
	$bubbÀ_s‹t
(*
_bubbÀ_s‹t
, 
Àngth
) {

71 
i
, 
j
;

72 
ãmp
;

74  
i
 = 0; i < 
Àngth
; i++) {

75 
j
 = 0; j < 
Àngth
; j++) {

76 if–
_bubbÀ_s‹t
[
j
] < _bubbÀ_s‹t[
i
] ) {

77 
ãmp
 = 
_bubbÀ_s‹t
[
j
];

78 
_bubbÀ_s‹t
[
j
] = _bubbÀ_s‹t[
i
];

79 
_bubbÀ_s‹t
[
i
] = 
ãmp
;

84 
	}
}

86 
	$medün
(*
_medün
, 
Àngth
)

88 i‡(
Àngth
 % 2 == 0) {

89  ()((
_medün
[
Àngth
 / 2] + _median[(length / 2) - 1]) / 2);

92  
_medün
[
Àngth
 / 2];

94 
	}
}

96 
	$‚_exãnded_high_ªsi°™˚
()

98 **
c‹ª˘ed_rx
 = 
	`Æloˇã_2d_¨øy
(
g_ã°_d©a
.
tx_ch™√l_cou¡
, g_ã°_d©a.
rx_ch™√l_cou¡
);

99 **
c‹ª˘ed_rx_diff
 = 
	`Æloˇã_2d_¨øy
(
g_ã°_d©a
.
tx_ch™√l_cou¡
, g_ã°_d©a.
rx_ch™√l_cou¡
);

100 **
c‹ª˘ed_tx_rx
 = 
	`Æloˇã_2d_¨øy
(
g_ã°_d©a
.
tx_ch™√l_cou¡
, g_ã°_d©a.
rx_ch™√l_cou¡
);

102 * 
rx_off£t
 = 
	`mÆloc
((Ë* 
g_ã°_d©a
.
rx_ch™√l_cou¡
);

103 * 
tx_off£t
 = 
	`mÆloc
((Ë* 
g_ã°_d©a
.
tx_ch™√l_cou¡
);

104 *
rx_r€
 = 
	`mÆloc
((Ë* 
g_ã°_d©a
.
rx_ch™√l_cou¡
);

105 *
tx_r€
 = 
	`mÆloc
((Ë* 
g_ã°_d©a
.
tx_ch™√l_cou¡
);

107 
typ_rx_off£t
, 
typ_tx_off£t
;

108 
i
, 
j
;

109 i‡(
g_ã°_d©a
.
rx_ch™√l_cou¡
 >g_ã°_d©a.
tx_ch™√l_cou¡
)

110 
i
 = 
g_ã°_d©a
.
rx_ch™√l_cou¡
;

112 
i
 = 
g_ã°_d©a
.
tx_ch™√l_cou¡
;

114 *
_medün
 = 
	`mÆloc
((Ë* 
i
);

122 
j
 = 0; j < 
g_ã°_d©a
.
rx_ch™√l_cou¡
; j++){

123 
i
 = 0; i < 
g_ã°_d©a
.
tx_ch™√l_cou¡
; i++){

124 
_medün
[
i
] = 
g_ã°_d©a
.
dñè
[i][
j
];

126 
	`bubbÀ_s‹t
(
_medün
, 
g_ã°_d©a
.
tx_ch™√l_cou¡
);

127 
rx_off£t
[
j
] = -
	`medün
(
_medün
, 
g_ã°_d©a
.
tx_ch™√l_cou¡
);

130 
j
 = 0; j < 
g_ã°_d©a
.
rx_ch™√l_cou¡
; j++){

131 
_medün
[
j
] = 
rx_off£t
[j];

133 
	`bubbÀ_s‹t
(
_medün
, 
g_ã°_d©a
.
rx_ch™√l_cou¡
);

134 
typ_rx_off£t
 = 
	`medün
(
_medün
, 
g_ã°_d©a
.
rx_ch™√l_cou¡
);

136 
j
 = 0; j < 
g_ã°_d©a
.
rx_ch™√l_cou¡
; j++){

137 
rx_r€
[
j
] = ()
	`abs
(
rx_off£t
[j] - 
typ_rx_off£t
);

138 
g_ã°_d©a
.
ªsu…
[g_ã°_d©a.
tx_ch™√l_cou¡
][
j
] = 
rx_r€
[j];

141  
i
 = 0; i < 
g_ã°_d©a
.
tx_ch™√l_cou¡
; i++){

142  
j
 = 0; j < 
g_ã°_d©a
.
rx_ch™√l_cou¡
; j++){

143 
c‹ª˘ed_rx
[
i
][
j
] = 
g_ã°_d©a
.
ba£löe
[i][j] + 
rx_off£t
[j];

147  
i
 = 0; i < 
g_ã°_d©a
.
tx_ch™√l_cou¡
; i++){

148  
j
 = 0; j < 
g_ã°_d©a
.
rx_ch™√l_cou¡
; j++){

149 
c‹ª˘ed_rx_diff
[
i
][
j
] = 
c‹ª˘ed_rx
[i][j] - 
g_ã°_d©a
.
ª„ªn˚
[i][j];

154  
i
 = 0; i < 
g_ã°_d©a
.
tx_ch™√l_cou¡
; i++){

155  
j
 = 0; j < 
g_ã°_d©a
.
rx_ch™√l_cou¡
; j++){

156 
_medün
[
j
] = 
c‹ª˘ed_rx_diff
[
i
][j];

158 
	`bubbÀ_s‹t
(
_medün
, 
g_ã°_d©a
.
rx_ch™√l_cou¡
);

159 
tx_off£t
[
i
] = -
	`medün
(
_medün
, 
g_ã°_d©a
.
rx_ch™√l_cou¡
);

162 
i
 = 0; i < 
g_ã°_d©a
.
tx_ch™√l_cou¡
; i++){

163 
_medün
[
i
] = 
tx_off£t
[i];

165 
	`bubbÀ_s‹t
(
_medün
, 
g_ã°_d©a
.
tx_ch™√l_cou¡
);

166 
typ_tx_off£t
 = 
	`medün
(
_medün
, 
g_ã°_d©a
.
tx_ch™√l_cou¡
);

169 
i
 = 0; i < 
g_ã°_d©a
.
tx_ch™√l_cou¡
; i++){

170 
tx_r€
[
i
] = ()
	`abs
(
tx_off£t
[i] - 
typ_tx_off£t
);

171 
g_ã°_d©a
.
ªsu…
[
i
][g_ã°_d©a.
rx_ch™√l_cou¡
] = 
tx_r€
[i];

174  
i
 = 0; i < 
g_ã°_d©a
.
tx_ch™√l_cou¡
; i++){

175  
j
 = 0; j < 
g_ã°_d©a
.
rx_ch™√l_cou¡
; j++){

176 
c‹ª˘ed_tx_rx
[
i
][
j
] = 
c‹ª˘ed_rx
[i][j] + 
tx_off£t
[i];

180  
i
 = 0; i < 
g_ã°_d©a
.
tx_ch™√l_cou¡
; i++){

181  
j
 = 0; j < 
g_ã°_d©a
.
rx_ch™√l_cou¡
; j++){

182 
g_ã°_d©a
.
ªsu…
[
i
][
j
] = 
c‹ª˘ed_tx_rx
[i][j] - g_ã°_d©a.
ª„ªn˚
[i][j];

186 
	`‰ì_2d_¨øy
(
c‹ª˘ed_rx
, 
g_ã°_d©a
.
tx_ch™√l_cou¡
);

187 
	`‰ì_2d_¨øy
(
c‹ª˘ed_rx_diff
, 
g_ã°_d©a
.
tx_ch™√l_cou¡
);

188 
	`‰ì_2d_¨øy
(
c‹ª˘ed_tx_rx
, 
g_ã°_d©a
.
tx_ch™√l_cou¡
);

190 
	`‰ì
(
rx_off£t
);

191 
	`‰ì
(
tx_off£t
);

192 
	`‰ì
(
rx_r€
);

193 
	`‰ì
(
tx_r€
);

194 
	`‰ì
(
_medün
);

195 
	}
}

197 
	$öô_¨øy_dñè
(*
§c_¨øy
, 
row
, 
cﬁumn
)

199 
i
, 
j
;

200 
g_ã°_d©a
.
dñè
 = (**Ë
	`mÆloc
((*Ë* 
row
);

201 
i
 = 0; i < 
row
; i++) {

202 
g_ã°_d©a
.
dñè
[
i
] = (*Ë
	`mÆloc
((Ë* 
cﬁumn
);

203 i‡(
§c_¨øy
 !
NULL
) {

204 
j
 = 0; j < 
cﬁumn
; j++)

205 
g_ã°_d©a
.
dñè
[
i
][
j
] = 
§c_¨øy
[(ò* 
cﬁumn
) + j];

208 
	}
}

209 
	$öô_¨øy_ba¶öe
(*
§c_¨øy
, 
row
, 
cﬁumn
)

211 
i
, 
j
;

212 
g_ã°_d©a
.
ba£löe
 = (**Ë
	`mÆloc
((*Ë* 
row
);

213 
i
 = 0; i < 
row
; i++) {

214 
g_ã°_d©a
.
ba£löe
[
i
] = (*Ë
	`mÆloc
((Ë* 
cﬁumn
);

215 i‡(
§c_¨øy
 !
NULL
) {

216 
j
 = 0; j < 
cﬁumn
; j++)

217 
g_ã°_d©a
.
ba£löe
[
i
][
j
] = 
§c_¨øy
[(ò* 
cﬁumn
) + j];

220 
	}
}

221 
	$öô_¨øy_ª„ªn˚
(*
§c_¨øy
, 
row
, 
cﬁumn
)

223 
i
, 
j
;

224 
g_ã°_d©a
.
ª„ªn˚
 = (**Ë
	`mÆloc
((*Ë* 
row
);

225 
i
 = 0; i < 
row
; i++) {

226 
g_ã°_d©a
.
ª„ªn˚
[
i
] = (*Ë
	`mÆloc
((Ë* 
cﬁumn
);

227 i‡(
§c_¨øy
 !
NULL
) {

228 
j
 = 0; j < 
cﬁumn
; j++)

229 
g_ã°_d©a
.
ª„ªn˚
[
i
][
j
] = 
§c_¨øy
[(ò* 
cﬁumn
) + j];

232 
	}
}

233 
	$öô_¨øy_ªsu…
(
row
, 
cﬁumn
)

235 
i
;

236 
g_ã°_d©a
.
ªsu…
 = (**Ë
	`mÆloc
((*Ë* 
row
);

237 
i
 = 0; i < 
row
; i++) {

238 
g_ã°_d©a
.
ªsu…
[
i
] = (*Ë
	`mÆloc
((Ë* 
cﬁumn
);

239 
	`mem£t
(
g_ã°_d©a
.
ªsu…
[
i
], 0x00, ((Ë* 
cﬁumn
));

241 
	}
}

243 
	$exãnded_high_ªsi°™˚_ã°
(

244 
rx_2d_ch™√l
,

245 
tx_2d_ch™√l
,

246 sig√d * 
dñè_2d_image
,

247 sig√d * 
ba£löe_image
,

248 sig√d * 
ªf_2d_image
,

249 sig√d * 
rx_Resu…
,

250 sig√d * 
tx_Resu…
,

251 sig√d * 
surÁ˚_Resu…


254 
g_ã°_d©a
.
rx_ch™√l_cou¡
 = 
rx_2d_ch™√l
;

255 
g_ã°_d©a
.
tx_ch™√l_cou¡
 = 
tx_2d_ch™√l
;

257 
	`öô_¨øy_dñè
(
dñè_2d_image
, 
tx_2d_ch™√l
, 
rx_2d_ch™√l
);

258 
	`öô_¨øy_ba¶öe
(
ba£löe_image
, 
tx_2d_ch™√l
, 
rx_2d_ch™√l
);

259 
	`öô_¨øy_ª„ªn˚
(
ªf_2d_image
, 
tx_2d_ch™√l
, 
rx_2d_ch™√l
);

260 
	`öô_¨øy_ªsu…
(
tx_2d_ch™√l
 + 1, 
rx_2d_ch™√l
 + 1);

262 
	`‚_exãnded_high_ªsi°™˚
();

265 
cﬁumn
 = 
rx_2d_ch™√l
;

266 
row
 = 
tx_2d_ch™√l
;

267 
i
 = 0; i <
row
; i++)

269 
j
 = 0; j <
cﬁumn
; j++)

271 i‡(
i
 =
row
)

272 
rx_Resu…
[
j
] = 
g_ã°_d©a
.
ªsu…
[
i
][j];

273 i‡(
j
 =
cﬁumn
)

274 
tx_Resu…
[
i
] = 
g_ã°_d©a
.
ªsu…
[i][
j
];

276 
surÁ˚_Resu…
[(
i
 * 
cﬁumn
Ë+ 
j
] = 
g_ã°_d©a
.
ªsu…
[i][j];

280 
	`‰ì_2d_¨øy
(
g_ã°_d©a
.
dñè
, 
tx_2d_ch™√l
);

281 
	`‰ì_2d_¨øy
(
g_ã°_d©a
.
ba£löe
, 
tx_2d_ch™√l
);

282 
	`‰ì_2d_¨øy
(
g_ã°_d©a
.
ª„ªn˚
, 
tx_2d_ch™√l
);

283 
	`‰ì_2d_¨øy
(
g_ã°_d©a
.
ªsu…
, 
tx_2d_ch™√l
 + 1);

284 
	}
}

	@cpp/jni/native_syna_lib.c

28 
	~<jni.h
>

29 
	~<°dio.h
>

30 
	~<°rög.h
>

32 
	~"«tive_sy«_lib.h
"

33 
	~"sy«_dev_m™agî.h
"

35 #ifde‡
SAVE_ERR_MSG


36 
	~"îr_msg_˘æ.h
"

39 
JavaVM
 * 
	gg_jni_vm
 = 
NULL
;

40 
JNIEnv
 * 
	gg_jni_ív
 = 
NULL
;

41 
jobje˘
 
	gg_jni_obj
 = 
NULL
;

48 
jöt
 
	$JNI_OnLﬂd
(
JavaVM
* 
vm
, * 
ª£rved
)

51 
	`¥ötf_i
("%s: +\n", 
__FUNCTION__
);

52 
g_jni_vm
 = 
vm
;

54  
JNI_VERSION_1_6
;

55 
	}
}

61 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëNumEºMsgJNI
(

62 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

64 
ªtvÆ
 = 0;

67 
g_jni_ív
 = 
ív
;

68 
g_jni_obj
 = 
obj
;

70 #ifde‡
SAVE_ERR_MSG


71 
ªtvÆ
 = 
	`gë_num_îr_msg
();

73  
ªtvÆ
;

74 
	}
}

80 
JNIEXPORT
 
j°rög
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëEºMsgJNI
(

81 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jöt
 
idx
)

83 *
îr
;

85 #ifde‡
SAVE_ERR_MSG


86 
îr
 = 
	`gë_îr_msg
(
idx
);

90 
g_jni_ív
 = 
ív
;

91 
g_jni_obj
 = 
obj
;

93 i‡(
îr
 =
NULL
) {

94 
	`¥ötf_e
("%†îr‹: u«bÀÅÿgëÅhê≠poöãdÉº‹ mesßge\n", 
__FUNCTION__
);

95  
NULL
;

97  (*
ív
)->
	`NewSåögUTF
”nv, 
îr
);

98 
	}
}

104 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_˛órEºMsgJNI
(

105 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

108 
g_jni_ív
 = 
ív
;

109 
g_jni_obj
 = 
obj
;

111 #ifde‡
SAVE_ERR_MSG


112 
	`˛ór_Æl_îr‹_msg
();

115  (
jboﬁón
Ë
åue
;

116 
	}
}

122 
JNIEXPORT
 
j°rög
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_födSy«DevJNI
(

123 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

126 
g_jni_ív
 = 
ív
;

127 
g_jni_obj
 = 
obj
;

129 i‡(
	`sy«_föd_dev
(
g_dev_node
)) {

130  (*
ív
)->
	`NewSåögUTF
”nv, 
g_dev_node
);

133 
	`¥ötf_e
("%†îr‹: c™'àfödÖr›î sy«±ic†devi˚\n", 
__FUNCTION__
);

134  
NULL
;

136 
	}
}

142 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_£tupSy«DevJNI
(

143 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
j°rög
 
node
, 
jboﬁón
 
is_rmi
, jboﬁó¿
is_tcm
)

145 c⁄° * 
°r_node
;

148 
g_jni_ív
 = 
ív
;

149 
g_jni_obj
 = 
obj
;

151 i‡(!
node
) {

152 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî.\n", 
__FUNCTION__
);

153  (
jboﬁón
)
Ál£
;

156 
°r_node
 = (*
ív
)->
	`GëSåögUTFCh¨s
”nv, 
node
, 
NULL
);

158 i‡(
	`sy«_£t_dev
(
°r_node
, 
is_rmi
, 
is_tcm
)) {

159 (*
ív
)->
	`Rñó£SåögUTFCh¨s
”nv, 
node
, 
°r_node
);

160  (
jboﬁón
)
åue
;

163 
	`¥ötf_e
("%†îr‹: c™'àfödÖr›î sy«±ic†devi˚\n", 
__FUNCTION__
);

164 (*
ív
)->
	`Rñó£SåögUTFCh¨s
”nv, 
node
, 
°r_node
);

165  (
jboﬁón
)
Ál£
;

167 
	}
}

173 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_›íSy«DevJNI
(

174 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

177 
g_jni_ív
 = 
ív
;

178 
g_jni_obj
 = 
obj
;

181  (
jboﬁón
Ë(
	`sy«_›í_dev
(
g_dev_node
) >= 0);

182 
	}
}

189 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_˛o£Sy«DevJNI
(

190 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

193 
g_jni_ív
 = 
ív
;

194 
g_jni_obj
 = 
obj
;

197 
	`sy«_˛o£_dev
(
g_dev_node
);

199  (
jboﬁón
Ë
åue
;

200 
	}
}

206 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_doDevPª∑øti⁄JNI
(

207 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jboﬁón
 
do_no¶ìp
, jboﬁó¿
do_ªzîo
)

209 
ªtvÆ
;

212 
g_jni_ív
 = 
ív
;

213 
g_jni_obj
 = 
obj
;

215 
ªtvÆ
 = 
	`sy«_do_¥ï¨©i⁄
(
do_no¶ìp
, 
do_ªzîo
);

216 i‡(
ªtvÆ
 < 0) {

217 
	`¥ötf_e
("%†îr‹: faûÅÿdÿ¥ï¨©i⁄", 
__FUNCTION__
);

218  (
jboﬁón
)
Ál£
;

221  (
jboﬁón
)
åue
;

222 
	}
}

228 
JNIEXPORT
 
j°rög
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëIdítifyD©aJNI
(

229 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

231 
idítify_öfo
[
MAX_STRING_LEN
 * 4] = {0};

232 
ªtvÆ
;

235 
g_jni_ív
 = 
ív
;

236 
g_jni_obj
 = 
obj
;

238 
ªtvÆ
 = 
	`sy«_do_idítify
(
idítify_öfo
);

239 i‡(
ªtvÆ
 < 0) {

240 
	`¥ötf_e
("%†îr‹: faûÅÿdÿidítify\n", 
__FUNCTION__
);

241  
NULL
;

244  (*
ív
)->
	`NewSåögUTF
”nv, 
idítify_öfo
);

245 
	}
}

251 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëFúmw¨eIdJNI
(

252 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

255 
g_jni_ív
 = 
ív
;

256 
g_jni_obj
 = 
obj
;

258  
	`sy«_gë_fw_id
();

259 
	}
}

265 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëImageRowJNI
(

266 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jboﬁón
 
is_œndsˇ≥
)

269 
g_jni_ív
 = 
ív
;

270 
g_jni_obj
 = 
obj
;

272  
	`sy«_gë_image_rows
(
is_œndsˇ≥
);

273 
	}
}

279 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëImageCﬁJNI
(

280 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jboﬁón
 
is_œndsˇ≥
)

283 
g_jni_ív
 = 
ív
;

284 
g_jni_obj
 = 
obj
;

286  
	`sy«_gë_image_cﬁs
(
is_œndsˇ≥
);

287 
	}
}

293 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëBuâ⁄C¡JNI
(

294 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

297 
g_jni_ív
 = 
ív
;

298 
g_jni_obj
 = 
obj
;

300  
	`sy«_gë_num_bäs
();

301 
	}
}

307 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëFótuªHasHybridJNI
(

308 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

311 
g_jni_ív
 = 
ív
;

312 
g_jni_obj
 = 
obj
;

314  
	`sy«_gë_image_has_hybrid
();

315 
	}
}

321 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëF‹˚EÀcsJNI
(

322 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

325 
g_jni_ív
 = 
ív
;

326 
g_jni_obj
 = 
obj
;

328  
	`sy«_gë_num_f‹˚_ñecs
();

329 
	}
}

335 
JNIEXPORT
 
j°rög
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëProdu˘IDJNI
(

336 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

338 
devi˚_id
[
MAX_STRING_LEN
 * 4] = {0};

341 
g_jni_ív
 = 
ív
;

342 
g_jni_obj
 = 
obj
;

344 
	`•rötf
(
devi˚_id
, "%s", 
	`sy«_gë_devi˚_id
());

346  (*
ív
)->
	`NewSåögUTF
”nv, 
devi˚_id
);

347 
	}
}

353 
JNIEXPORT
 
j°rög
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëC⁄figIDJNI
(

354 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

356 
c⁄fig_id
[
MAX_STRING_LEN
 * 4] = {0};

359 
g_jni_ív
 = 
ív
;

360 
g_jni_obj
 = 
obj
;

362 
	`•rötf
(
c⁄fig_id
, "%s", 
	`sy«_gë_c⁄fig_id
());

364  (*
ív
)->
	`NewSåögUTF
”nv, 
c⁄fig_id
);

365 
	}
}

371 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_°¨tRï‹tJNI
(

372 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jbyã
 
ty≥
, 
jboﬁón
 
í_touch
,

373 
jboﬁón
 
do_no_¶ìp
, jboﬁó¿
do_ªzîo
)

375 
ªtvÆ
;

378 
g_jni_ív
 = 
ív
;

379 
g_jni_obj
 = 
obj
;

381 
	`¥ötf_i
("%†öfo:É«bÀÅhêªp‹t\n", 
__FUNCTION__
);

384 
ªtvÆ
 = 
	`sy«_°¨t_image_°ªam
(()
ty≥
, 
í_touch
, 
do_no_¶ìp
, 
do_ªzîo
);

386 i‡(
ªtvÆ
 < 0) {

387 
	`¥ötf_e
("%†îr‹: faûÅÿíabÀÅhêªp‹t\n", 
__FUNCTION__
);

388  (
jboﬁón
)
Ál£
;

391  (
jboﬁón
)
åue
;

392 
	}
}

398 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_°›Rï‹tJNI
(

399 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jbyã
 
ty≥
)

401 
ªtvÆ
;

404 
g_jni_ív
 = 
ív
;

405 
g_jni_obj
 = 
obj
;

407 
	`¥ötf_i
("%†öfo: dißbÀÅhêªp‹t\n", 
__FUNCTION__
);

410 
ªtvÆ
 = 
	`sy«_°›_image_°ªam
(()
ty≥
);

412 i‡(
ªtvÆ
 < 0) {

413 
	`¥ötf_e
("%†îr‹: faûÅÿíabÀÅhêªp‹t\n", 
__FUNCTION__
);

414  (
jboﬁón
)
Ál£
;

417  (
jboﬁón
)
åue
;

418 
	}
}

424 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_ªque°Rï‹tImageJNI
(

425 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jbyã
 
ty≥
, 
jöt
 
row
, jöà
cﬁ
,

426 
jötAºay
 
¨øy
, 
jöt
 
size_of_¨øy
)

428 
ªtvÆ
;

429 *
«tive_¨øy
;

430 
jsize
 
Àn_d©a_¨øy
;

431 
jboﬁón
 
isC›y
;

434 
g_jni_ív
 = 
ív
;

435 
g_jni_obj
 = 
obj
;

438 
«tive_¨øy
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
¨øy
, &
isC›y
);

439 
Àn_d©a_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
¨øy
);

440 i‡(
Àn_d©a_¨øy
 <= 0) {

441 
	`¥ötf_e
("%sÉrror: invalidÖarameter. (len_data_array = %d)\n",

442 
__FUNCTION__
, 
Àn_d©a_¨øy
);

443  (
jboﬁón
)
Ál£
;

446 
ªtvÆ
 = 
	`sy«_ªad_ªp‹t_image_íåy
(()
ty≥
, 
«tive_¨øy
,

447 ()
size_of_¨øy
, ()
cﬁ
, ()
row
, 
åue
);

449 i‡(
ªtvÆ
 < 0) {

450 
	`¥ötf_e
("%†îr‹: faûÅÿªad dñèÑï‹àªp‹à\n", 
__FUNCTION__
);

452 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
¨øy
, 
«tive_¨øy
, 0);

453  (
jboﬁón
)
Ál£
;

457 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
¨øy
, 
«tive_¨øy
, 0);

458  (
jboﬁón
)
åue
;

459 
	}
}

471 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_runProdu˘i⁄Te°JNI
(

472 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jöt
 
ôem
, jöà
cﬁ
, jöà
row
,

473 
jötAºay
 
limô_1
, 
jöt
 
limô_1_size
, jötAºay 
limô_2
, jöà
limô_2_size
,

474 
jötAºay
 
ªsu…
, 
jöt
 
ªsu…_size
)

476 
ªtvÆ
;

477 *
«tive_limô_1
 = 
NULL
;

478 *
«tive_limô_2
 = 
NULL
;

479 *
«tive_ªsu…
 = 
NULL
;

480 
jsize
 
Àn_¨øy
;

481 
jboﬁón
 
isC›y
;

484 
g_jni_ív
 = 
ív
;

485 
g_jni_obj
 = 
obj
;

488 i‡(
limô_1_size
 > 0) {

489 
«tive_limô_1
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
limô_1
, &
isC›y
);

490 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
limô_1
);

491 i‡((
Àn_¨øy
 <0Ë|| (Àn_¨øy !
limô_1_size
)) {

492 
	`¥ötf_e
("%sÉrror: invalidÖarameter. (limit_1_size = %d,Üen_array = %d)\n",

493 
__FUNCTION__
, 
limô_1_size
, 
Àn_¨øy
);

494 
ªtvÆ
 = -10;

495 
exô
;

499 i‡(
limô_2_size
 > 0) {

500 
«tive_limô_2
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
limô_2
, &
isC›y
);

501 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
limô_2
);

502 i‡((
Àn_¨øy
 <0Ë|| (Àn_¨øy !
limô_2_size
)) {

503 
	`¥ötf_e
("%sÉrror: invalidÖarameter. (limit_2_size = %d,Üen_array = %d)\n",

504 
__FUNCTION__
, 
limô_2_size
, 
Àn_¨øy
);

505 
ªtvÆ
 = -10;

506 
exô
;

511 i‡(
ªsu…_size
 > 0) {

512 
«tive_ªsu…
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
ªsu…
, &
isC›y
);

513 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
ªsu…
);

514 i‡(
Àn_¨øy
 !
ªsu…_size
) {

515 
ªtvÆ
 = -10;

516 
exô
;

521 
ªtvÆ
 = 
	`sy«_run_ã°_íåy
(
ôem
, 
«tive_ªsu…
, 
ªsu…_size
, 
cﬁ
, 
row
,

522 
«tive_limô_1
, 
limô_1_size
, 
«tive_limô_2
, 
limô_2_size
);

523 i‡(
ªtvÆ
 < 0) {

524 
	`¥ötf_e
("%†îr‹: faûÅÿru¿¥odu˘i⁄Åe°,Åe° iãm (0x%xË\n", 
__FUNCTION__
, 
ôem
);

527 
exô
:

528 i‡(
limô_1_size
 > 0)

529 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
limô_1
, 
«tive_limô_1
, 0);

530 i‡(
limô_2_size
 > 0)

531 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
limô_2
, 
«tive_limô_2
, 0);

532 i‡(
ªsu…_size
 > 0)

533 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
ªsu…
, 
«tive_ªsu…
, 0);

535  
ªtvÆ
;

536 
	}
}

547 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_runProdu˘i⁄Te°ExHighResi°™˚JNI
(

548 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jöt
 
jcﬁs
, jöà
jrows
, 
jsh‹tAºay
 
jªf_‰ame
,

549 
jöt
 
jlimô_surÁ˚
, jöà
jlimô_txr€
, jöà
jlimô_rxr€
,

550 
jötAºay
 
jªsu…
, 
jöt
 
jsize_ªsu…
, jötAºay 
jªsu…_txr€
, jötAºay 
jsize_ªsu…_txr€
,

551 
jötAºay
 
jªsu…_rxr€
, jötAºay 
jsize_ªsu…_rxr€
)

553 
ªtvÆ
;

554 *
ªf_‰ame_¨øy
 = 
NULL
;

555 *
ªsu…_¨øy
 = 
NULL
;

556 *
ªsu…_txr€_¨øy
 = 
NULL
;

557 *
ªsu…_rxr€_¨øy
 = 
NULL
;

558 *
size_txr€_¨øy
 = 
NULL
;

559 *
size_rxr€_¨øy
 = 
NULL
;

560 
jsize
 
Àn_¨øy
;

561 
jboﬁón
 
isC›y
;

564 
g_jni_ív
 = 
ív
;

565 
g_jni_obj
 = 
obj
;

568 
ªf_‰ame_¨øy
 = (*
ív
)->
	`GëSh‹tAºayEÀmíts
”nv, 
jªf_‰ame
, &
isC›y
);

569 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jªf_‰ame
);

570 i‡(
Àn_¨øy
 <= 0) {

571 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî. (Àn_¨øy = %d)\n", 
__FUNCTION__
, 
Àn_¨øy
);

572 
ªtvÆ
 = -10;

573 
exô
;

577 i‡(
jsize_ªsu…
 > 0) {

578 
ªsu…_¨øy
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jªsu…
, &
isC›y
);

579 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jªsu…
);

580 i‡(
Àn_¨øy
 !
jsize_ªsu…
) {

581 
	`¥ötf_e
("%sÉrror: invalidÖarameter. (jresult_size = %d,Üen_array = %d)\n",

582 
__FUNCTION__
, 
jsize_ªsu…
, 
Àn_¨øy
);

583 
ªtvÆ
 = -10;

584 
exô
;

587 
ªsu…_txr€_¨øy
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jªsu…_txr€
, &
isC›y
);

588 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jªsu…_txr€
);

589 i‡(
Àn_¨øy
 < 0) {

590 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî. (jªsu…_txr€ = %d)\n", 
__FUNCTION__
, 
Àn_¨øy
);

591 
ªtvÆ
 = -10;

592 
exô
;

594 
ªsu…_rxr€_¨øy
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jªsu…_rxr€
, &
isC›y
);

595 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jªsu…_rxr€
);

596 i‡(
Àn_¨øy
 < 0) {

597 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî. (jªsu…_rxr€ = %d)\n", 
__FUNCTION__
, 
Àn_¨øy
);

598 
ªtvÆ
 = -10;

599 
exô
;

602 
size_txr€_¨øy
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jsize_ªsu…_txr€
, &
isC›y
);

603 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jsize_ªsu…_txr€
);

604 i‡(
Àn_¨øy
 < 0) {

605 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî. (jsize_ªsu…_txr€ = %d)\n", 
__FUNCTION__
, 
Àn_¨øy
);

606 
ªtvÆ
 = -10;

607 
exô
;

610 
size_rxr€_¨øy
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jsize_ªsu…_rxr€
, &
isC›y
);

611 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jsize_ªsu…_rxr€
);

612 i‡(
Àn_¨øy
 < 0) {

613 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî. (jsize_ªsu…_rxr€ = %d)\n", 
__FUNCTION__
, 
Àn_¨øy
);

614  (
jboﬁón
)
Ál£
;

618 
ªtvÆ
 = 
	`sy«_run_ã°_ex_high_ªsi°™˚_íåy
(
ªsu…_¨øy
, 
jsize_ªsu…
,

619 
ªsu…_txr€_¨øy
, 
size_txr€_¨øy
,

620 
ªsu…_rxr€_¨øy
, 
size_rxr€_¨øy
,

621 
ªf_‰ame_¨øy
, 
jcﬁs
, 
jrows
,

622 
jlimô_surÁ˚
, 
jlimô_txr€
, 
jlimô_rxr€
);

623 i‡(
ªtvÆ
 < 0) {

624 
	`¥ötf_e
("%†îr‹: faûÅÿru¿exãnded highÑesi°™˚Åe°\n", 
__FUNCTION__
);

626 
exô
:

627 (*
ív
)->
	`Rñó£Sh‹tAºayEÀmíts
”nv, 
jªf_‰ame
, 
ªf_‰ame_¨øy
, 0);

628 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jªsu…
, 
ªsu…_¨øy
, 0);

629 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jªsu…_txr€
, 
ªsu…_txr€_¨øy
, 0);

630 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jªsu…_rxr€
, 
ªsu…_rxr€_¨øy
, 0);

631 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jsize_ªsu…_txr€
, 
size_txr€_¨øy
, 0);

632 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jsize_ªsu…_rxr€
, 
size_rxr€_¨øy
, 0);

633  
ªtvÆ
;

634 
	}
}

645 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_runProdu˘i⁄Te°ExTRxSh‹tJNI
(

646 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jötAºay
 
jlimô
, 
jöt
 
jsize_limô
, jötAºay 
jlimô_ex_pö
,

647 
jöt
 
jsize_limô_ex_pö
, 
jötAºay
 
jªsu…_d©a
, jöà
jsize_ªsu…_d©a
,

648 
jötAºay
 
jªsu…_d©a_ex_pö
, 
jöt
 
jsize_ªsu…_d©a_ex_pö
,

649 
jötAºay
 
jªsu…_pö
, 
jöt
 
jsize_ªsu…_pö
)

651 
ªtvÆ
;

652 *
«tive_limô
 = 
NULL
;

653 *
«tive_limô_ex_pö
 = 
NULL
;

654 *
«tive_ªsu…_d©a
 = 
NULL
;

655 *
«tive_ªsu…_d©a_ex_pö
 = 
NULL
;

656 *
«tive_ªsu…_pö
 = 
NULL
;

657 
jsize
 
Àn_¨øy
;

658 
jboﬁón
 
isC›y
;

661 
g_jni_ív
 = 
ív
;

662 
g_jni_obj
 = 
obj
;

665 i‡(
jsize_limô
 > 0) {

666 
«tive_limô
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jlimô
, &
isC›y
);

667 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jlimô
);

668 i‡((
Àn_¨øy
 <0Ë|| (Àn_¨øy !
jsize_limô
)) {

669 
	`¥ötf_e
("%s: invalidÖarameter. (jsize_limit = %d,árray_len = %d)\n",

670 
__FUNCTION__
, 
jsize_limô
, 
Àn_¨øy
);

671 
ªtvÆ
 = -10;

672 
exô
;

677 i‡(
jsize_limô_ex_pö
 > 0) {

678 
«tive_limô_ex_pö
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jlimô_ex_pö
, &
isC›y
);

679 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jlimô_ex_pö
);

680 i‡((
Àn_¨øy
 <0Ë|| (Àn_¨øy !
jsize_limô_ex_pö
)) {

681 
	`¥ötf_e
("%s: invalidÖarameter. (jsize_limit_ex_pin = %d,árray_len = %d)\n",

682 
__FUNCTION__
, 
jsize_limô_ex_pö
, 
Àn_¨øy
);

683 
ªtvÆ
 = -10;

684 
exô
;

689 i‡(
jsize_ªsu…_d©a
 > 0) {

690 
«tive_ªsu…_d©a
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jªsu…_d©a
, &
isC›y
);

691 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jªsu…_d©a
);

692 i‡(
Àn_¨øy
 !
jsize_ªsu…_d©a
) {

693 
	`¥ötf_e
("%s: invalidÖarameter. (jsize_result_data = %d,Üen_array = %d)\n",

694 
__FUNCTION__
, 
jsize_ªsu…_d©a
, 
Àn_¨øy
);

695 
ªtvÆ
 = -10;

696 
exô
;

701 i‡(
jsize_ªsu…_d©a_ex_pö
 > 0) {

702 
«tive_ªsu…_d©a_ex_pö
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jªsu…_d©a_ex_pö
, &
isC›y
);

703 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jªsu…_d©a_ex_pö
);

704 i‡(
Àn_¨øy
 !
jsize_ªsu…_d©a_ex_pö
) {

705 
	`¥ötf_e
("%s: invalidÖarameter. (jsize_result_data_ex_pin = %d,Üen_array = %d)\n",

706 
__FUNCTION__
, 
jsize_ªsu…_d©a_ex_pö
, 
Àn_¨øy
);

707 
ªtvÆ
 = -10;

708 
exô
;

713 i‡(
jsize_ªsu…_pö
 > 0) {

714 
«tive_ªsu…_pö
 = (*
ív
)->
	`GëI¡AºayEÀmíts
”nv, 
jªsu…_pö
, &
isC›y
);

715 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
jªsu…_pö
);

716 i‡(
Àn_¨øy
 !
jsize_ªsu…_pö
) {

717 
	`¥ötf_e
("%s: invalidÖarameter. (jsize_result_pin = %d,Üen_array = %d)\n",

718 
__FUNCTION__
, 
jsize_ªsu…_pö
, 
Àn_¨øy
);

719 
ªtvÆ
 = -10;

720 
exô
;

724 
ªtvÆ
 = 
	`sy«_run_ã°_ex_åx_sh‹t_íåy
(
«tive_ªsu…_d©a
, 
jsize_ªsu…_d©a
,

725 
«tive_ªsu…_d©a_ex_pö
, 
jsize_ªsu…_d©a_ex_pö
,

726 
«tive_ªsu…_pö
, 
jsize_ªsu…_pö
,

727 
«tive_limô
, 
jsize_limô
,

728 
«tive_limô_ex_pö
, 
jsize_limô_ex_pö
);

730 i‡(
ªtvÆ
 < 0) {

731 
	`¥ötf_e
("%†îr‹: faûÅÿru¿exãndedÅrx sh‹àã°\n", 
__FUNCTION__
);

734 
exô
:

735 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jlimô
, 
«tive_limô
, 0);

736 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jlimô_ex_pö
, 
«tive_limô_ex_pö
, 0);

737 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jªsu…_d©a
, 
«tive_ªsu…_d©a
, 0);

738 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jªsu…_d©a_ex_pö
, 
«tive_ªsu…_d©a_ex_pö
, 0);

739 (*
ív
)->
	`Rñó£I¡AºayEÀmíts
”nv, 
jªsu…_pö
, 
«tive_ªsu…_pö
, 0);

740  
ªtvÆ
;

741 
	}
}

748 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëFwC⁄figSizeJNI
(

749 
JNIEnv
 *
ív
, 
jobje˘
 
obj
)

752 
g_jni_ív
 = 
ív
;

753 
g_jni_obj
 = 
obj
;

755  
	`sy«_gë_fúmw¨e_c⁄fig_size
();

756 
	}
}

762 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëFwC⁄figJNI
(

763 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jbyãAºay
 
¨øy
, 
jöt
 
size_of_¨øy
)

765 
ªtvÆ
;

766 
jbyã
 *
«tive_¨øy
;

767 
jsize
 
Àn_d©a_¨øy
;

768 
jboﬁón
 
isC›y
;

771 
g_jni_ív
 = 
ív
;

772 
g_jni_obj
 = 
obj
;

775 
«tive_¨øy
 = (*
ív
)->
	`GëByãAºayEÀmíts
”nv, 
¨øy
, &
isC›y
);

776 
Àn_d©a_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
¨øy
);

777 i‡(
Àn_d©a_¨øy
 !
size_of_¨øy
) {

778 (*
ív
)->
	`Rñó£ByãAºayEÀmíts
”nv, 
¨øy
, 
«tive_¨øy
, 0);

779 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî. (Àn_d©a_¨øy = %d)\n", 
__FUNCTION__
, 
Àn_d©a_¨øy
);

780  (
jboﬁón
)
Ál£
;

783 
ªtvÆ
 = 
	`sy«_gë_fúmw¨e_c⁄fig
((*)
«tive_¨øy
, 
size_of_¨øy
);

784 i‡(
ªtvÆ
 < 0) {

785 
	`¥ötf_e
("%†îr‹: faûÅÿgë fúmw¨êc⁄fig\n", 
__FUNCTION__
);

787 (*
ív
)->
	`Rñó£ByãAºayEÀmíts
”nv, 
¨øy
, 
«tive_¨øy
, 0);

788  (
jboﬁón
)
Ál£
;

792 (*
ív
)->
	`Rñó£ByãAºayEÀmíts
”nv, 
¨øy
, 
«tive_¨øy
, 0);

793  (
jboﬁón
)
åue
;

794 
	}
}

801 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_quîyTouchRe•⁄£JNI
(

802 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jöt
 
max_fögîs
)

804 
ªtvÆ
;

807 
g_jni_ív
 = 
ív
;

808 
g_jni_obj
 = 
obj
;

811 
ªtvÆ
 = 
	`sy«_quîy_touch_ª•⁄£_íåy
(
max_fögîs
);

812 i‡(
ªtvÆ
 < 0) {

813 
	`¥ötf_e
("%†îr‹: faûÅÿquîyÅhêtouchÑe•⁄£\n", 
__FUNCTION__
);

814  
ªtvÆ
;

817  
ªtvÆ
;

818 
	}
}

825 
	$ˇŒback_fögî_down
(
ödex
, 
x_pos
, 
y_pos
)

827 
	`¥ötf_i
("callback_finger_down + \n");

829 
j˛ass
 
˛azz
 = (*
g_jni_ív
)->
	`FödCœss
(g_jni_env, "com/vivotouchscreen/sensortestsyna3908/NativeWrapper");

830 i‡(
˛azz
 == 0) {

831 
	`¥ötf_e
("%†îr‹: faû o¿FödCœss, com/vivŸouchs¸ìn/£ns‹ã°sy«3908/N©iveWøµî\n", 
__FUNCTION__
);

834 
jmëhodID
 
javamëhod
 = (*
g_jni_ív
)->
	`GëMëhodID
(g_jni_ív, 
˛azz
, "callbackFingerDown", "(III)V");

835 i‡(
javamëhod
 == 0) {

836 
	`¥ötf_e
("%†îr‹: faû o¿GëMëhodID, cÆlbackFögîDown\n", 
__FUNCTION__
);

839 (*
g_jni_ív
)->
	`CÆlVoidMëhod
(g_jni_ív, 
g_jni_obj
, 
javamëhod
, 
ödex
, 
x_pos
, 
y_pos
);

841 
	}
}

848 
	$ˇŒback_fögî_up
(
ödex
)

850 
	`¥ötf_i
("callback_one_finger_up + \n");

852 
j˛ass
 
˛azz
 = (*
g_jni_ív
)->
	`FödCœss
(g_jni_env, "com/vivotouchscreen/sensortestsyna3908/NativeWrapper");

853 i‡(
˛azz
 == 0) {

854 
	`¥ötf_e
("%†îr‹: faû o¿FödCœss, com/vivŸouchs¸ìn/£ns‹ã°sy«3908/N©iveWøµî\n", 
__FUNCTION__
);

857 
jmëhodID
 
javamëhod
 = (*
g_jni_ív
)->
	`GëMëhodID
(g_jni_ív, 
˛azz
, "callbackFingerUp", "(I)V");

858 i‡(
javamëhod
 == 0) {

859 
	`¥ötf_e
("%†îr‹: faû o¿GëMëhodID, cÆlbackFögîUp\n", 
__FUNCTION__
);

862 (*
g_jni_ív
)->
	`CÆlVoidMëhod
(g_jni_ív, 
g_jni_obj
, 
javamëhod
, 
ödex
);

864 
	}
}

870 
JNIEXPORT
 
jöt
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_runRawComm™dJNI
(

871 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jbyã
 
ty≥
, 
jöt
 
cmd
,

872 
jbyãAºay
 
ö
, 
jöt
 
size_of_ö
, jbyãAºay 
ª•
, jöà
size_of_ª•
)

874 
ªtvÆ
;

875 
jbyã
 *
«tive_ö
;

876 
jbyã
 *
«tive_ª•
 = 
NULL
;

877 
jsize
 
Àn_¨øy
;

878 
jboﬁón
 
isC›y
;

881 
g_jni_ív
 = 
ív
;

882 
g_jni_obj
 = 
obj
;

885 
«tive_ö
 = (*
ív
)->
	`GëByãAºayEÀmíts
”nv, 
ö
, &
isC›y
);

886 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
ö
);

887 i‡(
Àn_¨øy
 !
size_of_ö
) {

888 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî o‡öáºay. (Àn_¨øy = %d)\n", 
__FUNCTION__
, 
Àn_¨øy
);

889 
ªtvÆ
 = -1;

890 
exô
;

894 i‡(
size_of_ª•
 > 0) {

895 
«tive_ª•
 = (*
ív
)->
	`GëByãAºayEÀmíts
”nv, 
ª•
, &
isC›y
);

896 
Àn_¨øy
 = (*
ív
)->
	`GëAºayLígth
”nv, 
ª•
);

897 i‡(
Àn_¨øy
 !
size_of_ª•
) {

898 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî o‡ouà¨øy (Àn_¨øy = %d)\n", 
__FUNCTION__
, 
Àn_¨øy
);

899 
ªtvÆ
 = -1;

900 
exô
;

904 
ªtvÆ
 = 
	`sy«_run_øw_comm™d
(()
ty≥
, 
cmd
,

905 (*)
«tive_ö
, 
size_of_ö
,

906 (*)
«tive_ª•
, 
size_of_ª•
);

907 i‡(
ªtvÆ
 < 0) {

908 
	`¥ötf_e
("%†îr‹: faûÅÿru¿thêcomm™d\n", 
__FUNCTION__
);

911 
exô
:

913 (*
ív
)->
	`Rñó£ByãAºayEÀmíts
”nv, 
ö
, 
«tive_ö
, 0);

914 i‡(
«tive_ª•
)

915 (*
ív
)->
	`Rñó£ByãAºayEÀmíts
”nv, 
ª•
, 
«tive_ª•
, 0);

916  
ªtvÆ
;

917 
	}
}

923 
JNIEXPORT
 
jboﬁón
 
JNICALL
 
	$Java_com_vivŸouchs¸ìn_£ns‹ã°sy«3908_N©iveWøµî_gëPösM≠pögJNI
(

924 
JNIEnv
 *
ív
, 
jobje˘
 
obj
, 
jöt
 
rxes_off£t
, jöà
rxes_Àn
, jöà
txes_off£t
, jöà
txes_Àn
)

926 
ªtvÆ
;

929 
g_jni_ív
 = 
ív
;

930 
g_jni_obj
 = 
obj
;

932 
ªtvÆ
 = 
	`sy«_gë_pös_m≠pög
(
rxes_off£t
, 
rxes_Àn
, 
txes_off£t
, 
txes_Àn
);

933 i‡(
ªtvÆ
 < 0) {

934 
	`¥ötf_e
("%†îr‹: faûÅÿªåõvêåxÖö†m≠pög\n", 
__FUNCTION__
);

935  (
jboﬁón
)
Ál£
;

938  (
jboﬁón
)
åue
;

939 
	}
}

	@cpp/jni/native_syna_lib.h

28 
	~<jni.h
>

29 
	~<™droid/log.h
>

31 #i‚de‡
_NATIVE_LIB_H__


32 
	#_NATIVE_LIB_H__


	)

34 
	#¥ötf_i
(...Ë
	`__™droid_log_¥öt
(
ANDROID_LOG_INFO
, "sy«-≠k-«tive", 
__VA_ARGS__
);

	)

35 
	#¥ötf_e
(...Ë
	`__™droid_log_¥öt
(
ANDROID_LOG_ERROR
,"sy«-≠k-«tive", 
__VA_ARGS__
);

	)

37 
	#MAX_STRING_LEN
 (512)

	)

39 
	#TOUCH_CALLBACK


	)

41 #ifde‡
TOUCH_CALLBACK


42 
ˇŒback_fögî_down
(
ödex
, 
x_pos
, 
y_pos
);

43 
ˇŒback_fögî_up
(
ödex
);

	@cpp/jni/rmi_control.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

33 
	~<°dboﬁ.h
>

34 
	~<uni°d.h
>

35 
	~<f˙é.h
>

36 
	~<sys/°©.h
>

38 
	~"sy«_dev_m™agî.h
"

39 
	~"rmi_c⁄åﬁ.h
"

41 #ifde‡
SAVE_ERR_MSG


42 
	~"îr_msg_˘æ.h
"

46 
	#RMI_DEV_PATH
 "/dev/rmi"

	)

48 
	#RMI_SW_RESET_DELAY_MS
 250

	)

51 
boﬁ
 
	grmi_is_öôülized
;

53 
	gg_rmi_avaûabÀ_górs
;

54 
	gg_rmi_gór_í
[
MAX_RMI_FREUENCY_GEAR
];

57 
rmi_sˇn_pdt
();

58 
rmi_f54_sˇn_‰eq_gór
();

69 
boﬁ
 
	$rmi_föd_dev
(*
dev_node
)

71 
i
;

72 
°©
 
°
;

73 
boﬁ
 
is_found
 = 
Ál£
;

76 
i
 = 0; i < 
NUMBER_OF_SYNADEV_TO_SCAN
; i++) {

77 
	`mem£t
(
dev_node
, 0x00, 
MAX_STRING_LEN
);

79 
	`¢¥ötf
(
dev_node
, 
MAX_STRING_LEN
, "%s%d", 
RMI_DEV_PATH
, 
i
);

80 i‡(0 =
	`°©
(
dev_node
, &
°
)) {

81 
is_found
 = 
åue
;

85 i‡(
is_found
) {

86 
	`¥ötf_i
("%s: synapticsÑmi deviceÇode = %s\n",

87 
__func__
, 
dev_node
);

90  
is_found
;

91 
	}
}

102 
	$rmi_›í_dev
(c⁄° *
dev_node
)

104 #ifde‡
SAVE_ERR_MSG


105 
îr
[
MAX_ERR_STRING_LEN
];

108 i‡(
g_dev_fûe_des¸ùt‹
 > 0) {

109 
	`¥ötf_i
("%†öfo: %†ha†bì¿›í\n", 
__func__
, 
dev_node
);

113 
g_dev_fûe_des¸ùt‹
 = 
	`›í
(
dev_node
, 
O_RDWR
, 
S_IRWXU
 | 
S_IRWXG
 | 
S_IRWXO
);

114 i‡(
g_dev_fûe_des¸ùt‹
 < 0) {

115 
	`¥ötf_e
("%sÉrror: failÅo open %s (err: %s)\n",

116 
__func__
, 
dev_node
, 
	`°ªº‹
(
î∫o
));

117 #ifde‡
SAVE_ERR_MSG


118 
	`•rötf
(
îr
, "%sÉrror: failÅo open %s (err: %s)\n",

119 
__func__
, 
dev_node
, 
	`°ªº‹
(
î∫o
));

120 
	`add_îr‹_msg
(
îr
);

122  -
EIO
;

125 
	`¥ötf_i
("%s info: open %s (fd = %d)\n",

126 
__func__
, 
dev_node
, 
g_dev_fûe_des¸ùt‹
);

129 i‡(
	`rmi_sˇn_pdt
() < 0) {

130 
	`¥ötf_e
("%†îr‹: faûÅÿ∑r£Åhêrmòpdt.\n", 
__func__
);

131 #ifde‡
SAVE_ERR_MSG


132 
	`•rötf
(
îr
, "%†îr‹: faûÅÿ∑r£Åhêrmòpdt\n", 
__func__
);

133 
	`add_îr‹_msg
(
îr
);

135  -
EIO
;

138  
g_dev_fûe_des¸ùt‹
;

139 
	}
}

148 
	$rmi_˛o£_dev
(c⁄° *
dev_node
)

151 i‡(
g_dev_fûe_des¸ùt‹
 <= 0) {

152 
	`¥ötf_i
("%†öfo: %†ha†bì¿˛o£d\n", 
__func__
, 
dev_node
);

156 
	`˛o£
(
g_dev_fûe_des¸ùt‹
);

158 
g_dev_fûe_des¸ùt‹
 = 0;

160 
	`¥ötf_i
("%s info: close %s (fd = %d)\n",

161 
__func__
, 
dev_node
, 
g_dev_fûe_des¸ùt‹
);

163  
g_dev_fûe_des¸ùt‹
;

164 
	}
}

179 
	$rmi_ªad_ªg
(
addªss
, *
p_rd_d©a
, 
byãs_to_ªad
)

181 
ªtvÆ
;

183 i‡(!
p_rd_d©a
) {

184 
	`¥ötf_e
("%sÉrror:Ö_rd_data buffer isÇull\n",

185 
__func__
);

189 if(
g_dev_fûe_des¸ùt‹
 < 0) {

190 
	`¥ötf_e
("%sÉrror: file descriptor is invalid (%d)\n",

191 
__func__
, 
g_dev_fûe_des¸ùt‹
);

192  (-
EINVAL
);

195 
	`l£ek
(
g_dev_fûe_des¸ùt‹
, 
addªss
, 
SEEK_SET
);

197 
ªtvÆ
 = (Ë
	`ªad
(
g_dev_fûe_des¸ùt‹
, (*)
p_rd_d©a
, (
size_t
)
byãs_to_ªad
);

198 i‡(
ªtvÆ
 < 0) {

199 
	`¥ötf_e
("%sÉrror: failÅoÑead data.áddr = 0x%x, bytes_to_read = %d (retval = %d)\n",

200 
__func__
, 
addªss
, 
byãs_to_ªad
, 
ªtvÆ
);

201  
ªtvÆ
;

204  
ªtvÆ
;

205 
	}
}

220 
	$rmi_wrôe_ªg
(
addªss
, *
p_wr_d©a
, 
byãs_to_wrôe
)

222 
ªtvÆ
 = 0;

224 i‡(!
p_wr_d©a
) {

225 
	`¥ötf_e
("%sÉrror:Ö_wr_data can't beÇull\n",

226 
__func__
);

230 if(
g_dev_fûe_des¸ùt‹
 < 0) {

231 
	`¥ötf_e
("%sÉrror: file descriptor is invalid (%d)\n",

232 
__func__
, 
g_dev_fûe_des¸ùt‹
);

233  (-
EINVAL
);

236 
	`l£ek
(
g_dev_fûe_des¸ùt‹
, 
addªss
, 
SEEK_SET
);

238 
ªtvÆ
 = (Ë
	`wrôe
(
g_dev_fûe_des¸ùt‹
, 
p_wr_d©a
, (
size_t
)
byãs_to_wrôe
);

239 i‡(
ªtvÆ
 < 0) {

240 
	`¥ötf_e
("%sÉrror: failÅo write data.áddr = 0x%x, bytes_to_write = %d, (retval = %d)",

241 
__func__
, 
addªss
, 
byãs_to_wrôe
, 
ªtvÆ
);

242  
ªtvÆ
;

245  
ªtvÆ
;

246 
	}
}

256 
boﬁ
 
	$rmi_∑r£_f34_öf‹m©i⁄
()

258 
ªtvÆ
;

259 
c⁄fig_id_size
;

261 
	`mem£t
(
g_rmi_pdt
.
c⁄fig_id
, 0x00, (g_rmi_pdt.config_id));

263 
	`¥ötf_i
("%s: bl version = %d\n",

264 
__func__
, 
g_rmi_pdt
.
F34
.
Vîsi⁄
);

266 
g_rmi_pdt
.
F34
.
Vîsi⁄
) {

267 
F34_V0
:

268 
g_rmi_pdt
.
bl_vîsi⁄
 = 
BL_V5
;

270 
F34_V1
:

271 
g_rmi_pdt
.
bl_vîsi⁄
 = 
BL_V6
;

273 
F34_V2
:

274 
g_rmi_pdt
.
bl_vîsi⁄
 = 
BL_V7
;

277 
	`¥ötf_e
("%sÉrror: unrecognized f34 version\n",

278 
__func__
);

279  
Ál£
;

282 i‡((
g_rmi_pdt
.
bl_vîsi⁄
 =
BL_V5
Ë|| (g_rmi_pdt.bl_vîsi⁄ =
BL_V6
))

283 
c⁄fig_id_size
 = 
V5V6_CONFIG_ID_SIZE
;

285 
c⁄fig_id_size
 = 
V7_CONFIG_ID_SIZE
;

287 
g_rmi_pdt
.
size_of_c⁄fig_id
 = 
c⁄fig_id_size
;

289 
ªtvÆ
 = 
	`rmi_ªad_ªg
((
g_rmi_pdt
.
F34
.
c⁄åﬁ_ba£_addr
),

290 
g_rmi_pdt
.
c⁄fig_id
, 
c⁄fig_id_size
);

291 i‡(
ªtvÆ
 < 0) {

292 
	`¥ötf_e
("%sÉrror: failÅoÑead fw config id\n",

293 
__func__
);

294  
Ál£
;

297  
åue
;

298 
	}
}

308 
boﬁ
 
	$rmi_∑r£_f01_öf‹m©i⁄
()

310 
buf„r_asic
[4] = {0};

311 
buf„r_id
[3] = {0};

313 
	`rmi_ªad_ªg
((Ë(
g_rmi_pdt
.
F01
.
quîy_ba£_addr
 + 17), &
buf„r_asic
[0], 4);

314 
	`•rötf
((*)
g_rmi_pdt
.
asic_ty≥
, "%d", 
buf„r_asic
[1] << 8 | buffer_asic[0]);

316 
g_rmi_pdt
.
is_tddi_dev
 = 
	`check_°r_°¨ts_wôh
("4", (*)g_rmi_pdt.
asic_ty≥
);

318 
	`¥ötf_i
("%s:ásicÅype = %s (is_tddi_dev = %s)\n",

319 
__func__
, 
g_rmi_pdt
.
asic_ty≥
, (g_rmi_pdt.
is_tddi_dev
)?"true":"false");

321 
	`rmi_ªad_ªg
(()(
g_rmi_pdt
.
F01
.
quîy_ba£_addr
 + 18), &
buf„r_id
[0], 3);

322 
g_rmi_pdt
.
buûd_id
 = ()
buf„r_id
[0] +

323 ()
buf„r_id
[1] * 0x100 +

324 ()
buf„r_id
[2] * 0x10000;

326 
	`¥ötf_i
("%s:Ñmi firmware id = %d\n",

327 
__func__
, 
g_rmi_pdt
.
buûd_id
);

329  
åue
;

330 
	}
}

340 
	$rmi4_f12_föd_sub
(
ba£_addr
, *
¥e£n˚
, 
¥e£n˚_size
,

341 
°ru˘uª_off£t
, 
ªg
, 
sub
)

343 
ªtvÆ
;

344 
˙t
;

345 
ªgnum
;

346 
bônum
;

347 
p_ödex
;

348 
s_ödex
;

349 
off£t
;

350 
max_ªg
;

351 *
°ru˘uª
;

353 
max_ªg
 = ()((
¥e£n˚_size
 - 1) * 8 - 1);

355 i‡(
ªg
 > 
max_ªg
) {

356 
	`¥ötf_e
("%†îr‹:Ñegi°îÇumbî (%dËovîÜimô\n", 
__func__
, 
ªg
);

357  -
EINVAL
;

360 
p_ödex
 = ()(
ªg
 / 8 + 1);

361 
bônum
 = ()(
ªg
 % 8);

362 i‡((
¥e£n˚
[
p_ödex
] & (1 << 
bônum
)) == 0x00) {

363 
	`¥ötf_e
("%†îr‹:Ñegi°î %d i†nŸÖª£¡\n", 
__func__
, 
ªg
);

364  -
EINVAL
;

367 
°ru˘uª
 = 
	`mÆloc
(
¥e£n˚
[0]);

368 i‡(!
°ru˘uª
) {

369 
	`¥ötf_e
("%†îr‹: faûÅÿÆlo¯mem f‹ såu˘uªÑegi°î\n", 
__func__
);

370  -
ENOMEM
;

373 
ªtvÆ
 = 
	`rmi_ªad_ªg
(()(
ba£_addr
 + 
°ru˘uª_off£t
),

374 
°ru˘uª
, 
¥e£n˚
[0]);

375 i‡(
ªtvÆ
 < 0)

376 
exô
;

378 
s_ödex
 = 0;

380 
ªgnum
 = 0;Ñegnum < 
ªg
;Ñegnum++) {

381 
p_ödex
 = ()(
ªgnum
 / 8 + 1);

382 
bônum
 = ()(
ªgnum
 % 8);

383 i‡((
¥e£n˚
[
p_ödex
] & (1 << 
bônum
)) == 0x00)

386 i‡(
°ru˘uª
[
s_ödex
] == 0x00)

387 
s_ödex
 += 3;

389 
s_ödex
++;

391 
°ru˘uª
[
s_ödex
] & ~(0x7F))

392 
s_ödex
++;

394 
s_ödex
++;

397 
˙t
 = 0;

398 
s_ödex
++;

399 
off£t
 = ()(
sub
 / 7);

400 
bônum
 = ()(
sub
 % 7);

403 i‡(
˙t
 =
off£t
) {

404 i‡(
°ru˘uª
[
s_ödex
 + 
˙t
] & (1 << 
bônum
))

405 
ªtvÆ
 = 1;

407 
ªtvÆ
 = 0;

408 
exô
;

410 
˙t
++;

411 } 
°ru˘uª
[
s_ödex
 + 
˙t
 - 1] & ~(0x7F));

413 
ªtvÆ
 = 0;

415 
exô
:

416 
	`‰ì
(
°ru˘uª
);

418  
ªtvÆ
;

419 
	}
}

430 
boﬁ
 
	$rmi_∑r£_f12_öf‹m©i⁄
()

432 
ªtvÆ
;

433 
sub∑ckë
;

434 
size_of_˘æ23
;

435 
size_of_quîy5
;

436 
size_of_quîy8
;

437 
˘æ_8_off£t
;

438 
˘æ_20_off£t
;

439 
˘æ_23_off£t
;

440 
˘æ_28_off£t
;

441 
˘æ_31_off£t
;

442 
num_of_fögîs
;

443 
f12_quîy_5
 
quîy_5
;

444 
f12_quîy_8
 
quîy_8
;

445 
f12_˘æ_8
 
˘æ_8
;

446 
f12_˘æ_23
 
˘æ_23
;

447 
f12_˘æ_31
 
˘æ_31
;

449 
ªtvÆ
 = 
	`rmi_ªad_ªg
((Ë(
g_rmi_pdt
.
F12
.
quîy_ba£_addr
 + 4),

450 &
size_of_quîy5
, (size_of_query5));

451 i‡(
ªtvÆ
 < 0)

452  
Ál£
;

454 i‡(
size_of_quîy5
 > (
quîy_5
.
d©a
))

455 
size_of_quîy5
 = (
quîy_5
.
d©a
);

457 
	`mem£t
(
quîy_5
.
d©a
, 0x00, (query_5.data));

459 
ªtvÆ
 = 
	`rmi_ªad_ªg
((Ë(
g_rmi_pdt
.
F12
.
quîy_ba£_addr
 + 5),

460 
quîy_5
.
d©a
, 
size_of_quîy5
);

461 i‡(
ªtvÆ
 < 0)

462  
Ál£
;

464 
˘æ_8_off£t
 = 
quîy_5
.
˘æ0_is_¥e£¡
 +

465 
quîy_5
.
˘æ1_is_¥e£¡
 +

466 
quîy_5
.
˘æ2_is_¥e£¡
 +

467 
quîy_5
.
˘æ3_is_¥e£¡
 +

468 
quîy_5
.
˘æ4_is_¥e£¡
 +

469 
quîy_5
.
˘æ5_is_¥e£¡
 +

470 
quîy_5
.
˘æ6_is_¥e£¡
 +

471 
quîy_5
.
˘æ7_is_¥e£¡
;

473 
˘æ_20_off£t
 = 
˘æ_8_off£t
 +

474 
quîy_5
.
˘æ8_is_¥e£¡
 +

475 
quîy_5
.
˘æ9_is_¥e£¡
 +

476 
quîy_5
.
˘æ10_is_¥e£¡
 +

477 
quîy_5
.
˘æ11_is_¥e£¡
 +

478 
quîy_5
.
˘æ12_is_¥e£¡
 +

479 
quîy_5
.
˘æ13_is_¥e£¡
 +

480 
quîy_5
.
˘æ14_is_¥e£¡
 +

481 
quîy_5
.
˘æ15_is_¥e£¡
 +

482 
quîy_5
.
˘æ16_is_¥e£¡
 +

483 
quîy_5
.
˘æ17_is_¥e£¡
 +

484 
quîy_5
.
˘æ18_is_¥e£¡
 +

485 
quîy_5
.
˘æ19_is_¥e£¡
;

487 
˘æ_23_off£t
 = 
˘æ_20_off£t
 +

488 
quîy_5
.
˘æ20_is_¥e£¡
 +

489 
quîy_5
.
˘æ21_is_¥e£¡
 +

490 
quîy_5
.
˘æ22_is_¥e£¡
;

492 
˘æ_28_off£t
 = 
˘æ_23_off£t
 +

493 
quîy_5
.
˘æ23_is_¥e£¡
 +

494 
quîy_5
.
˘æ24_is_¥e£¡
 +

495 
quîy_5
.
˘æ25_is_¥e£¡
 +

496 
quîy_5
.
˘æ26_is_¥e£¡
 +

497 
quîy_5
.
˘æ27_is_¥e£¡
;

499 
˘æ_31_off£t
 = 
˘æ_28_off£t
 +

500 
quîy_5
.
˘æ28_is_¥e£¡
 +

501 
quîy_5
.
˘æ29_is_¥e£¡
 +

502 
quîy_5
.
˘æ30_is_¥e£¡
;

504 
size_of_˘æ23
 = 2;

505 
sub∑ckë
 = 2; subpacket <= 4; subpacket++) {

506 
ªtvÆ
 = 
	`rmi4_f12_föd_sub
(
g_rmi_pdt
.
F12
.
quîy_ba£_addr
, 
quîy_5
.
d©a
, (query_5.data),

507 6, 23, 
sub∑ckë
);

508 i‡(
ªtvÆ
 == 1)

509 
size_of_˘æ23
++;

510 i‡(
ªtvÆ
 < 0)

511  
Ál£
;

514 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F12
.
c⁄åﬁ_ba£_addr
 + 
˘æ_23_off£t
,

515 
˘æ_23
.
d©a
, 
size_of_˘æ23
);

516 i‡(
ªtvÆ
 < 0)

517  
Ál£
;

520 
num_of_fögîs
 = (
˘æ_23
.
max_ªp‹ãd_obje˘s
 < 
F12_FINGERS_TO_SUPPORT
)?

521 
˘æ_23
.
max_ªp‹ãd_obje˘s
 : 
F12_FINGERS_TO_SUPPORT
;

522 
g_rmi_pdt
.
num_of_fögîs_suµ‹ãd
 = 
num_of_fögîs
;

524 
ªtvÆ
 = 
	`rmi_ªad_ªg
((Ë(
g_rmi_pdt
.
F12
.
quîy_ba£_addr
 + 7),

525 &
size_of_quîy8
, (size_of_query8));

526 i‡(
ªtvÆ
 < 0)

527  
Ál£
;

529 i‡(
size_of_quîy8
 > (
quîy_8
.
d©a
))

530 
size_of_quîy8
 = (
quîy_8
.
d©a
);

532 
	`mem£t
(
quîy_8
.
d©a
, 0x00, (query_8.data));

535 
ªtvÆ
 = 
	`rmi_ªad_ªg
((Ë(
g_rmi_pdt
.
F12
.
quîy_ba£_addr
 + 8),

536 
quîy_8
.
d©a
, 
size_of_quîy8
);

537 i‡(
ªtvÆ
 < 0)

538  
Ál£
;

541 
g_rmi_pdt
.
f12_exåa
.
d©a1_off£t
 = 
quîy_8
.
d©a0_is_¥e£¡
;

543 i‡((
size_of_quîy8
 >3Ë&& (
quîy_8
.
d©a15_is_¥e£¡
)) {

544 
g_rmi_pdt
.
f12_exåa
.
d©a15_off£t
 = 
quîy_8
.
d©a0_is_¥e£¡
 +

545 
quîy_8
.
d©a1_is_¥e£¡
 +

546 
quîy_8
.
d©a2_is_¥e£¡
 +

547 
quîy_8
.
d©a3_is_¥e£¡
 +

548 
quîy_8
.
d©a4_is_¥e£¡
 +

549 
quîy_8
.
d©a5_is_¥e£¡
 +

550 
quîy_8
.
d©a6_is_¥e£¡
 +

551 
quîy_8
.
d©a7_is_¥e£¡
 +

552 
quîy_8
.
d©a8_is_¥e£¡
 +

553 
quîy_8
.
d©a9_is_¥e£¡
 +

554 
quîy_8
.
d©a10_is_¥e£¡
 +

555 
quîy_8
.
d©a11_is_¥e£¡
 +

556 
quîy_8
.
d©a12_is_¥e£¡
 +

557 
quîy_8
.
d©a13_is_¥e£¡
 +

558 
quîy_8
.
d©a14_is_¥e£¡
;

559 
g_rmi_pdt
.
f12_exåa
.
d©a15_size
 = ()((
num_of_fögîs
 + 7) / 8);

562 
g_rmi_pdt
.
f12_exåa
.
d©a15_size
 = 0;

565 
	`mem£t
(
g_rmi_pdt
.
f12_fögî_d©a
, 0x00, (g_rmi_pdt.f12_finger_data));

568 i‡(
quîy_5
.
˘æ8_is_¥e£¡
) {

569 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F12
.
c⁄åﬁ_ba£_addr
 + 
˘æ_8_off£t
,

570 
˘æ_8
.
d©a
, (ctrl_8.data));

571 i‡(
ªtvÆ
 < 0)

572  
Ál£
;

575 
g_rmi_pdt
.
£ns‹_max_x
 =

576 (()
˘æ_8
.
max_x_co‹d_lsb
 << 0) |

577 (()
˘æ_8
.
max_x_co‹d_msb
 << 8);

578 
g_rmi_pdt
.
£ns‹_max_y
 =

579 (()
˘æ_8
.
max_y_co‹d_lsb
 << 0) |

580 (()
˘æ_8
.
max_y_co‹d_msb
 << 8);

583 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F12
.
c⁄åﬁ_ba£_addr
 + 
˘æ_31_off£t
,

584 
˘æ_31
.
d©a
, (ctrl_31.data));

585 i‡(
ªtvÆ
 < 0)

586  
Ál£
;

589 
g_rmi_pdt
.
£ns‹_max_x
 =

590 (()
˘æ_31
.
max_x_co‹d_lsb
 << 0) |

591 (()
˘æ_31
.
max_x_co‹d_msb
 << 8);

592 
g_rmi_pdt
.
£ns‹_max_y
 =

593 (()
˘æ_31
.
max_y_co‹d_lsb
 << 0) |

594 (()
˘æ_31
.
max_y_co‹d_msb
 << 8);

597 
	`¥ötf_i
("%s info: max x = %d, max y = %d\n",

598 
__func__
, 
g_rmi_pdt
.
£ns‹_max_x
, g_rmi_pdt.
£ns‹_max_y
);

600  
åue
;

601 
	}
}

609 
	$rmi_∑r£_f54_d©a
()

611 
ªg_addr
;

612 
ªg_addr
 = ()(
g_rmi_pdt
.
F54
.
d©a_ba£_addr
 + 
RMI_REPROT_DATA_OFFSET
 + 1);

615 i‡(
g_rmi_pdt
.
f54_quîy
.
has_£n£_‰equícy_c⁄åﬁ
)

616 
ªg_addr
++;

621 i‡(
g_rmi_pdt
.
f54_quîy
.
has_öãr„ªn˚_mëric
)

622 
ªg_addr
 += 2;

625 i‡(
g_rmi_pdt
.
f54_quîy
.
has_⁄e_byã_ªp‹t_øã
 |

626 
g_rmi_pdt
.
f54_quîy
.
has_two_byã_ªp‹t_øã
)

627 
ªg_addr
++;

628 i‡(
g_rmi_pdt
.
f54_quîy
.
has_two_byã_ªp‹t_øã
)

629 
ªg_addr
++;

632 i‡(
g_rmi_pdt
.
f54_quîy
.
has_v¨ün˚_mëric
)

633 
ªg_addr
 += 2;

636 i‡(
g_rmi_pdt
.
f54_quîy
.
has_mu…i_mëric_°©e_machöe
)

637 
ªg_addr
 += 2;

640 i‡(
g_rmi_pdt
.
f54_quîy
.
has_mu…i_mëric_°©e_machöe
 |

641 
g_rmi_pdt
.
f54_quîy
.
has_noi£_°©e
)

642 
ªg_addr
++;

645 i‡(
g_rmi_pdt
.
f54_quîy
.
has_°©us
)

646 
ªg_addr
++;

649 i‡(
g_rmi_pdt
.
f54_quîy
.
has_¶ew_mëric
)

650 
ªg_addr
 += 2;

653 i‡(
g_rmi_pdt
.
f54_quîy
.
has_mu…i_mëric_°©e_machöe
)

654 
ªg_addr
 += 2;

657 i‡(
g_rmi_pdt
.
f54_quîy_13
.
has_cidim
)

658 
ªg_addr
++;

661 i‡(
g_rmi_pdt
.
f54_quîy_13
.
has_øû_im
)

662 
ªg_addr
++;

665 i‡(
g_rmi_pdt
.
f54_quîy_13
.
has_noi£_môig©i⁄_íh™˚mít
)

666 
ªg_addr
++;

669 i‡(
g_rmi_pdt
.
f54_quîy_16
.
has_d©a17
)

670 
ªg_addr
++;

673 i‡(
g_rmi_pdt
.
f54_quîy_21
.
has_quîy24_d©a18
)

674 
ªg_addr
++;

677 i‡(
g_rmi_pdt
.
f54_quîy_21
.
has_d©a19
)

678 
ªg_addr
++;

681 i‡(
g_rmi_pdt
.
f54_quîy_25
.
has_˘æ109
)

682 
ªg_addr
++;

685 i‡(
g_rmi_pdt
.
f54_quîy_27
.
has_d©a21
)

686 
ªg_addr
++;

689 i‡(
g_rmi_pdt
.
f54_quîy_27
.
has_d©a22
)

690 
ªg_addr
++;

693 i‡(
g_rmi_pdt
.
f54_quîy_29
.
has_d©a23
)

694 
ªg_addr
++;

697 i‡(
g_rmi_pdt
.
f54_quîy_32
.
has_d©a24
)

698 
ªg_addr
++;

701 i‡(
g_rmi_pdt
.
f54_quîy_35
.
has_d©a25
)

702 
ªg_addr
++;

705 i‡(
g_rmi_pdt
.
f54_quîy_35
.
has_d©a26
)

706 
ªg_addr
++;

709 i‡(
g_rmi_pdt
.
f54_quîy_46
.
has_d©a27
)

710 
ªg_addr
++;

713 i‡(
g_rmi_pdt
.
f54_quîy_46
.
has_d©a28
)

714 
ªg_addr
++;

719 i‡(
g_rmi_pdt
.
f54_quîy_49
.
has_d©a31
) {

720 
g_rmi_pdt
.
f54_d©a_31
.
addªss
 = 
ªg_addr
;

724 
	}
}

732 
	$rmi_∑r£_f54_c⁄åﬁ
()

734 
ªtvÆ
;

735 
Àngth
 = 0;

736 
ªg_addr
 = 
g_rmi_pdt
.
F54
.
c⁄åﬁ_ba£_addr
;

737 
num_of_£nsög_‰eqs
 = 
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
;

740 
ªg_addr
 +
F54_CONTROL_0_SIZE
;

743 i‡((
g_rmi_pdt
.
f54_quîy
.
touch_c⁄åﬁÀr_Ámûy
 == 0) ||

744 (
g_rmi_pdt
.
f54_quîy
.
touch_c⁄åﬁÀr_Ámûy
 == 1))

745 
ªg_addr
 +
F54_CONTROL_1_SIZE
;

748 
ªg_addr
 +
F54_CONTROL_2_SIZE
;

751 i‡(
g_rmi_pdt
.
f54_quîy
.
has_pixñ_touch_thªshﬁd_adju°mít
)

752 
ªg_addr
 +
F54_CONTROL_3_SIZE
;

755 i‡((
g_rmi_pdt
.
f54_quîy
.
touch_c⁄åﬁÀr_Ámûy
 == 0) ||

756 (
g_rmi_pdt
.
f54_quîy
.
touch_c⁄åﬁÀr_Ámûy
 == 1))

757 
ªg_addr
 +
F54_CONTROL_4_6_SIZE
;

760 i‡(
g_rmi_pdt
.
f54_quîy
.
touch_c⁄åﬁÀr_Ámûy
 == 1) {

761 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_7
.
addªss
 = 
ªg_addr
;

762 
ªg_addr
 +
F54_CONTROL_7_SIZE
;

766 i‡((
g_rmi_pdt
.
f54_quîy
.
touch_c⁄åﬁÀr_Ámûy
 == 0) ||

767 (
g_rmi_pdt
.
f54_quîy
.
touch_c⁄åﬁÀr_Ámûy
 == 1))

768 
ªg_addr
 +
F54_CONTROL_8_9_SIZE
;

771 i‡(
g_rmi_pdt
.
f54_quîy
.
has_öãr„ªn˚_mëric
)

772 
ªg_addr
 +
F54_CONTROL_10_SIZE
;

775 i‡(
g_rmi_pdt
.
f54_quîy
.
has_˘æ11
)

776 
ªg_addr
 +
F54_CONTROL_11_SIZE
;

779 i‡(
g_rmi_pdt
.
f54_quîy
.
has_ªœx©i⁄_c⁄åﬁ
)

780 
ªg_addr
 +
F54_CONTROL_12_13_SIZE
;

783 i‡(
g_rmi_pdt
.
f54_quîy
.
has_£ns‹_assignmít
) {

784 
ªg_addr
 +
F54_CONTROL_14_SIZE
;

785 
ªg_addr
 +
F54_CONTROL_15_SIZE
 * 
g_rmi_pdt
.
f54_quîy
.
num_of_rx_ñe˘rodes
;

786 
ªg_addr
 +
F54_CONTROL_16_SIZE
 * 
g_rmi_pdt
.
f54_quîy
.
num_of_tx_ñe˘rodes
;

790 i‡(
g_rmi_pdt
.
f54_quîy
.
has_£n£_‰equícy_c⁄åﬁ
) {

791 
ªg_addr
 +
F54_CONTROL_17_SIZE
 * 
num_of_£nsög_‰eqs
;

792 
ªg_addr
 +
F54_CONTROL_18_SIZE
 * 
num_of_£nsög_‰eqs
;

793 
ªg_addr
 +
F54_CONTROL_19_SIZE
 * 
num_of_£nsög_‰eqs
;

797 
ªg_addr
 +
F54_CONTROL_20_SIZE
;

800 i‡(
g_rmi_pdt
.
f54_quîy
.
has_£n£_‰equícy_c⁄åﬁ
)

801 
ªg_addr
 +
F54_CONTROL_21_SIZE
;

804 i‡(
g_rmi_pdt
.
f54_quîy
.
has_fúmw¨e_noi£_môig©i⁄
)

805 
ªg_addr
 +
F54_CONTROL_22_26_SIZE
;

808 i‡(
g_rmi_pdt
.
f54_quîy
.
has_iú_fûãr
)

809 
ªg_addr
 +
F54_CONTROL_27_SIZE
;

812 i‡(
g_rmi_pdt
.
f54_quîy
.
has_fúmw¨e_noi£_môig©i⁄
)

813 
ªg_addr
 +
F54_CONTROL_28_SIZE
;

816 i‡(
g_rmi_pdt
.
f54_quîy
.
has_cmn_ªmovÆ
)

817 
ªg_addr
 +
F54_CONTROL_29_SIZE
;

820 i‡(
g_rmi_pdt
.
f54_quîy
.
has_cmn_maximum
)

821 
ªg_addr
 +
F54_CONTROL_30_SIZE
;

824 i‡(
g_rmi_pdt
.
f54_quîy
.
has_touch_hy°îesis
)

825 
ªg_addr
 +
F54_CONTROL_31_SIZE
;

828 i‡(
g_rmi_pdt
.
f54_quîy
.
has_edge_com≥nßti⁄
)

829 
ªg_addr
 +
F54_CONTROL_32_35_SIZE
;

832 i‡((
g_rmi_pdt
.
f54_quîy
.
curve_com≥nßti⁄_mode
 == 1) ||

833 (
g_rmi_pdt
.
f54_quîy
.
curve_com≥nßti⁄_mode
 == 2)) {

834 i‡(
g_rmi_pdt
.
f54_quîy
.
curve_com≥nßti⁄_mode
 == 1) {

835 
Àngth
 = (
g_rmi_pdt
.
f54_quîy
.
num_of_rx_ñe˘rodes
 > g_rmi_pdt.f54_quîy.
num_of_tx_ñe˘rodes
)?

836 
g_rmi_pdt
.
f54_quîy
.
num_of_rx_ñe˘rodes
 : g_rmi_pdt.f54_quîy.
num_of_tx_ñe˘rodes
;

838 i‡(
g_rmi_pdt
.
f54_quîy
.
curve_com≥nßti⁄_mode
 == 2) {

839 
Àngth
 = 
g_rmi_pdt
.
f54_quîy
.
num_of_rx_ñe˘rodes
;

841 
ªg_addr
 +
F54_CONTROL_36_SIZE
 * 
Àngth
;

845 i‡(
g_rmi_pdt
.
f54_quîy
.
curve_com≥nßti⁄_mode
 == 2)

846 
ªg_addr
 +
F54_CONTROL_37_SIZE
 * 
g_rmi_pdt
.
f54_quîy
.
num_of_tx_ñe˘rodes
;

849 i‡(
g_rmi_pdt
.
f54_quîy
.
has_≥r_‰equícy_noi£_c⁄åﬁ
) {

850 
ªg_addr
 +
F54_CONTROL_38_SIZE
 * 
num_of_£nsög_‰eqs
;

851 
ªg_addr
 +
F54_CONTROL_39_SIZE
 * 
num_of_£nsög_‰eqs
;

852 
ªg_addr
 +
F54_CONTROL_40_SIZE
 * 
num_of_£nsög_‰eqs
;

856 i‡(
g_rmi_pdt
.
f54_quîy
.
has_sig«l_˛¨ôy
) {

857 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_41
.
addªss
 = 
ªg_addr
;

858 
ªg_addr
 +
F54_CONTROL_41_SIZE
;

862 i‡(
g_rmi_pdt
.
f54_quîy
.
has_v¨ün˚_mëric
)

863 
ªg_addr
 +
F54_CONTROL_42_SIZE
;

866 i‡(
g_rmi_pdt
.
f54_quîy
.
has_mu…i_mëric_°©e_machöe
)

867 
ªg_addr
 +
F54_CONTROL_43_54_SIZE
;

870 i‡(
g_rmi_pdt
.
f54_quîy
.
has_0d_ªœx©i⁄_c⁄åﬁ
)

871 
ªg_addr
 +
F54_CONTROL_55_56_SIZE
;

874 i‡(
g_rmi_pdt
.
f54_quîy
.
has_0d_acquisôi⁄_c⁄åﬁ
) {

875 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_57
.
addªss
 = 
ªg_addr
;

876 
ªg_addr
 +
F54_CONTROL_57_SIZE
;

880 i‡(
g_rmi_pdt
.
f54_quîy
.
has_0d_acquisôi⁄_c⁄åﬁ
)

881 
ªg_addr
 +
F54_CONTROL_58_SIZE
;

884 i‡(
g_rmi_pdt
.
f54_quîy
.
has_h_bœnk
)

885 
ªg_addr
 +
F54_CONTROL_59_SIZE
;

888 i‡((
g_rmi_pdt
.
f54_quîy
.
has_h_bœnk
) ||

889 (
g_rmi_pdt
.
f54_quîy
.
has_v_bœnk
) ||

890 (
g_rmi_pdt
.
f54_quîy
.
has_l⁄g_h_bœnk
))

891 
ªg_addr
 +
F54_CONTROL_60_62_SIZE
;

894 i‡((
g_rmi_pdt
.
f54_quîy
.
has_h_bœnk
) ||

895 (
g_rmi_pdt
.
f54_quîy
.
has_v_bœnk
) ||

896 (
g_rmi_pdt
.
f54_quîy
.
has_l⁄g_h_bœnk
) ||

897 (
g_rmi_pdt
.
f54_quîy
.
has_¶ew_mëric
) ||

898 (
g_rmi_pdt
.
f54_quîy
.
has_¶ew_›ti⁄
) ||

899 (
g_rmi_pdt
.
f54_quîy
.
has_noi£_môig©i⁄2
))

900 
ªg_addr
 +
F54_CONTROL_63_SIZE
;

903 i‡(
g_rmi_pdt
.
f54_quîy
.
has_h_bœnk
)

904 
ªg_addr
 +
F54_CONTROL_64_67_SIZE
 * 7;

905 i‡((
g_rmi_pdt
.
f54_quîy
.
has_v_bœnk
) ||

906 (
g_rmi_pdt
.
f54_quîy
.
has_l⁄g_h_bœnk
))

907 
ªg_addr
 +
F54_CONTROL_64_67_SIZE
;

910 i‡((
g_rmi_pdt
.
f54_quîy
.
has_h_bœnk
) ||

911 (
g_rmi_pdt
.
f54_quîy
.
has_v_bœnk
) ||

912 (
g_rmi_pdt
.
f54_quîy
.
has_l⁄g_h_bœnk
))

913 
ªg_addr
 +
F54_CONTROL_68_73_SIZE
;

916 i‡(
g_rmi_pdt
.
f54_quîy
.
has_¶ew_mëric
)

917 
ªg_addr
 +
F54_CONTROL_74_SIZE
;

920 i‡(
g_rmi_pdt
.
f54_quîy
.
has_íh™˚d_°ªtch
)

921 
ªg_addr
 +
F54_CONTROL_75_SIZE
 * 
num_of_£nsög_‰eqs
;

924 i‡(
g_rmi_pdt
.
f54_quîy
.
has_°¨tup_Á°_ªœx©i⁄
)

925 
ªg_addr
 +
F54_CONTROL_76_SIZE
;

928 i‡(
g_rmi_pdt
.
f54_quîy
.
has_esd_c⁄åﬁ
)

929 
ªg_addr
 +
F54_CONTROL_77_78_SIZE
;

932 i‡(
g_rmi_pdt
.
f54_quîy
.
has_noi£_môig©i⁄2
)

933 
ªg_addr
 +
F54_CONTROL_79_83_SIZE
;

936 i‡(
g_rmi_pdt
.
f54_quîy
.
has_íîgy_øtio_ªœx©i⁄
)

937 
ªg_addr
 +
F54_CONTROL_84_85_SIZE
;

940 i‡(
g_rmi_pdt
.
f54_quîy_13
.
has_˘æ86
) {

941 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_86
.
addªss
 = 
ªg_addr
;

942 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_86
.
addªss
,

943 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_86
.
d©a
,

944 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_86
.
d©a
));

945 i‡(
ªtvÆ
 < 0) {

946 
	`¥ötf_e
("%sÉrror: failÅoÑead f54_control_86 (0x%x)\n",

947 
__func__
, 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_86
.
addªss
);

949 
ªg_addr
 +
F54_CONTROL_86_SIZE
;

953 i‡(
g_rmi_pdt
.
f54_quîy_13
.
has_˘æ87
)

954 
ªg_addr
 +
F54_CONTROL_87_SIZE
;

957 i‡(
g_rmi_pdt
.
f54_quîy
.
has_˘æ88
) {

958 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_88
.
addªss
 = 
ªg_addr
;

959 
ªg_addr
 +
F54_CONTROL_88_SIZE
;

963 i‡(
g_rmi_pdt
.
f54_quîy_13
.
has_cidim
 ||

964 
g_rmi_pdt
.
f54_quîy_13
.
has_noi£_môig©i⁄_íh™˚mít
 ||

965 
g_rmi_pdt
.
f54_quîy_13
.
has_øû_im
)

966 
ªg_addr
 +
F54_CONTROL_89_SIZE
;

969 i‡(
g_rmi_pdt
.
f54_quîy_15
.
has_˘æ90
)

970 
ªg_addr
 +
F54_CONTROL_90_SIZE
;

973 i‡(
g_rmi_pdt
.
f54_quîy_21
.
has_˘æ91
) {

974 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_91
.
addªss
 = 
ªg_addr
;

975 
ªg_addr
 +
F54_CONTROL_91_SIZE
;

979 i‡(
g_rmi_pdt
.
f54_quîy_16
.
has_˘æ92
)

980 
ªg_addr
 +
F54_CONTROL_92_SIZE
;

983 i‡(
g_rmi_pdt
.
f54_quîy_16
.
has_˘æ93
)

984 
ªg_addr
 +
F54_CONTROL_93_SIZE
;

987 i‡(
g_rmi_pdt
.
f54_quîy_16
.
has_˘æ94_quîy18
)

988 
ªg_addr
 +
F54_CONTROL_94_SIZE
;

991 i‡(
g_rmi_pdt
.
f54_quîy_16
.
has_˘æ95_quîy19
) {

992 
g_rmi_pdt
.
f54_c⁄åﬁ_ªg95_off£t
 = 
ªg_addr
;

993 
ªg_addr
 +
F54_CONTROL_95_SIZE
;;

998 i‡(
g_rmi_pdt
.
f54_quîy_21
.
has_˘æ96
) {

999 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_96
.
addªss
 = 
ªg_addr
;

1000 
ªg_addr
 +
F54_CONTROL_96_SIZE
;

1004 i‡(
g_rmi_pdt
.
f54_quîy_21
.
has_˘æ97
)

1005 
ªg_addr
 +
F54_CONTROL_97_SIZE
;

1008 i‡(
g_rmi_pdt
.
f54_quîy_21
.
has_˘æ98
)

1009 
ªg_addr
 +
F54_CONTROL_98_SIZE
;

1012 i‡(
g_rmi_pdt
.
f54_quîy
.
touch_c⁄åﬁÀr_Ámûy
 == 2) {

1013 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_99
.
addªss
 = 
ªg_addr
;

1014 
ªg_addr
 +
F54_CONTROL_99_SIZE
;

1018 i‡(
g_rmi_pdt
.
f54_quîy_16
.
has_˘æ100
)

1019 
ªg_addr
 +
F54_CONTROL_100_SIZE
;

1022 i‡(
g_rmi_pdt
.
f54_quîy_22
.
has_˘æ101
)

1023 
ªg_addr
 +
F54_CONTROL_101_SIZE
;

1027 i‡(
g_rmi_pdt
.
f54_quîy_23
.
has_˘æ102
)

1028 
ªg_addr
 +
F54_CONTROL_102_SIZE
;

1031 i‡(
g_rmi_pdt
.
f54_quîy_22
.
has_˘æ103_quîy26
) {

1032 
g_rmi_pdt
.
f54_skù_cdc_cdm_c⁄åﬁ
 = 
åue
;

1033 
ªg_addr
 +
F54_CONTROL_103_SIZE
;

1037 i‡(
g_rmi_pdt
.
f54_quîy_22
.
has_˘æ104
)

1038 
ªg_addr
 +
F54_CONTROL_104_SIZE
;

1041 i‡(
g_rmi_pdt
.
f54_quîy_22
.
has_˘æ105
)

1042 
ªg_addr
 +
F54_CONTROL_105_SIZE
;

1045 i‡(
g_rmi_pdt
.
f54_quîy_25
.
has_˘æ106
)

1046 
ªg_addr
 +
F54_CONTROL_106_SIZE
;

1049 i‡(
g_rmi_pdt
.
f54_quîy_25
.
has_˘æ107
)

1050 
ªg_addr
 +
F54_CONTROL_107_SIZE
;

1053 i‡(
g_rmi_pdt
.
f54_quîy_25
.
has_˘æ108
)

1054 
ªg_addr
 +
F54_CONTROL_108_SIZE
;

1057 i‡(
g_rmi_pdt
.
f54_quîy_25
.
has_˘æ109
)

1058 
ªg_addr
 +
F54_CONTROL_109_SIZE
;

1061 i‡(
g_rmi_pdt
.
f54_quîy_27
.
has_˘æ110
) {

1062 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_110
.
addªss
 = 
ªg_addr
;

1063 
ªg_addr
 +
F54_CONTROL_110_SIZE
;

1067 i‡(
g_rmi_pdt
.
f54_quîy_27
.
has_˘æ111
)

1068 
ªg_addr
 +
F54_CONTROL_111_SIZE
;

1071 i‡(
g_rmi_pdt
.
f54_quîy_27
.
has_˘æ112
)

1072 
ªg_addr
 +
F54_CONTROL_112_SIZE
;

1075 i‡(
g_rmi_pdt
.
f54_quîy_27
.
has_˘æ113
)

1076 
ªg_addr
 +
F54_CONTROL_113_SIZE
;

1079 i‡(
g_rmi_pdt
.
f54_quîy_27
.
has_˘æ114
)

1080 
ªg_addr
 +
F54_CONTROL_114_SIZE
;

1083 i‡(
g_rmi_pdt
.
f54_quîy_29
.
has_˘æ115
)

1084 
ªg_addr
 +
F54_CONTROL_115_SIZE
;

1087 i‡(
g_rmi_pdt
.
f54_quîy_29
.
has_˘æ116
)

1088 
ªg_addr
 +
F54_CONTROL_116_SIZE
;

1091 i‡(
g_rmi_pdt
.
f54_quîy_29
.
has_˘æ117
)

1092 
ªg_addr
 +
F54_CONTROL_117_SIZE
;

1095 i‡(
g_rmi_pdt
.
f54_quîy_30
.
has_˘æ118
)

1096 
ªg_addr
 +
F54_CONTROL_118_SIZE
;

1099 i‡(
g_rmi_pdt
.
f54_quîy_30
.
has_˘æ119
)

1100 
ªg_addr
 +
F54_CONTROL_119_SIZE
;

1103 i‡(
g_rmi_pdt
.
f54_quîy_30
.
has_˘æ120
)

1104 
ªg_addr
 +
F54_CONTROL_120_SIZE
;

1107 i‡(
g_rmi_pdt
.
f54_quîy_30
.
has_˘æ121
)

1108 
ªg_addr
 +
F54_CONTROL_121_SIZE
;

1111 i‡(
g_rmi_pdt
.
f54_quîy_30
.
has_˘æ122_quîy31
)

1112 
ªg_addr
 +
F54_CONTROL_122_SIZE
;

1115 i‡(
g_rmi_pdt
.
f54_quîy_30
.
has_˘æ123
)

1116 
ªg_addr
 +
F54_CONTROL_123_SIZE
;

1119 i‡(
g_rmi_pdt
.
f54_quîy_30
.
has_˘æ124
)

1120 
ªg_addr
 +
F54_CONTROL_124_SIZE
;

1123 i‡(
g_rmi_pdt
.
f54_quîy_32
.
has_˘æ125
)

1124 
ªg_addr
 +
F54_CONTROL_125_SIZE
;

1127 i‡(
g_rmi_pdt
.
f54_quîy_32
.
has_˘æ126
)

1128 
ªg_addr
 +
F54_CONTROL_126_SIZE
;

1131 i‡(
g_rmi_pdt
.
f54_quîy_32
.
has_˘æ127
)

1132 
ªg_addr
 +
F54_CONTROL_127_SIZE
;

1135 i‡(
g_rmi_pdt
.
f54_quîy_33
.
has_˘æ128
)

1136 
ªg_addr
 +
F54_CONTROL_128_SIZE
;

1139 i‡(
g_rmi_pdt
.
f54_quîy_33
.
has_˘æ129
)

1140 
ªg_addr
 +
F54_CONTROL_129_SIZE
;

1143 i‡(
g_rmi_pdt
.
f54_quîy_33
.
has_˘æ130
)

1144 
ªg_addr
 +
F54_CONTROL_130_SIZE
;

1147 i‡(
g_rmi_pdt
.
f54_quîy_33
.
has_˘æ131
)

1148 
ªg_addr
 +
F54_CONTROL_131_SIZE
;

1151 i‡(
g_rmi_pdt
.
f54_quîy_33
.
has_˘æ132
)

1152 
ªg_addr
 +
F54_CONTROL_132_SIZE
;

1155 i‡(
g_rmi_pdt
.
f54_quîy_33
.
has_˘æ133
)

1156 
ªg_addr
 +
F54_CONTROL_133_SIZE
;

1159 i‡(
g_rmi_pdt
.
f54_quîy_33
.
has_˘æ134
)

1160 
ªg_addr
 +
F54_CONTROL_134_SIZE
;

1163 i‡(
g_rmi_pdt
.
f54_quîy_35
.
has_˘æ135
)

1164 
ªg_addr
 +
F54_CONTROL_135_SIZE
;

1167 i‡(
g_rmi_pdt
.
f54_quîy_35
.
has_˘æ136
)

1168 
ªg_addr
 +
F54_CONTROL_136_SIZE
;

1171 i‡(
g_rmi_pdt
.
f54_quîy_35
.
has_˘æ137
)

1172 
ªg_addr
 +
F54_CONTROL_137_SIZE
;

1175 i‡(
g_rmi_pdt
.
f54_quîy_35
.
has_˘æ138
)

1176 
ªg_addr
 +
F54_CONTROL_138_SIZE
;

1179 i‡(
g_rmi_pdt
.
f54_quîy_35
.
has_˘æ139
)

1180 
ªg_addr
 +
F54_CONTROL_139_SIZE
;

1183 i‡(
g_rmi_pdt
.
f54_quîy_35
.
has_˘æ140
)

1184 
ªg_addr
 +
F54_CONTROL_140_SIZE
;

1187 i‡(
g_rmi_pdt
.
f54_quîy_36
.
has_˘æ141
)

1188 
ªg_addr
 +
F54_CONTROL_141_SIZE
;

1191 i‡(
g_rmi_pdt
.
f54_quîy_36
.
has_˘æ142
)

1192 
ªg_addr
 +
F54_CONTROL_142_SIZE
;

1195 i‡(
g_rmi_pdt
.
f54_quîy_36
.
has_˘æ143
)

1196 
ªg_addr
 +
F54_CONTROL_143_SIZE
;

1199 i‡(
g_rmi_pdt
.
f54_quîy_36
.
has_˘æ144
)

1200 
ªg_addr
 +
F54_CONTROL_144_SIZE
;

1203 i‡(
g_rmi_pdt
.
f54_quîy_36
.
has_˘æ145
)

1204 
ªg_addr
 +
F54_CONTROL_145_SIZE
;

1207 i‡(
g_rmi_pdt
.
f54_quîy_36
.
has_˘æ146
)

1208 
ªg_addr
 +
F54_CONTROL_146_SIZE
;

1211 i‡(
g_rmi_pdt
.
f54_quîy_38
.
has_˘æ147
)

1212 
ªg_addr
 +
F54_CONTROL_147_SIZE
;

1215 i‡(
g_rmi_pdt
.
f54_quîy_38
.
has_˘æ148
)

1216 
ªg_addr
 +
F54_CONTROL_148_SIZE
;

1219 i‡(
g_rmi_pdt
.
f54_quîy_38
.
has_˘æ149
) {

1220 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_149
.
addªss
 = 
ªg_addr
;

1221 
ªg_addr
 +
F54_CONTROL_149_SIZE
;

1225 i‡(
g_rmi_pdt
.
f54_quîy_38
.
has_˘æ150
)

1226 
ªg_addr
 +
F54_CONTROL_150_SIZE
;

1229 i‡(
g_rmi_pdt
.
f54_quîy_38
.
has_˘æ151
)

1230 
ªg_addr
 +
F54_CONTROL_151_SIZE
;

1233 i‡(
g_rmi_pdt
.
f54_quîy_38
.
has_˘æ152
)

1234 
ªg_addr
 +
F54_CONTROL_152_SIZE
;

1237 i‡(
g_rmi_pdt
.
f54_quîy_38
.
has_˘æ153
)

1238 
ªg_addr
 +
F54_CONTROL_153_SIZE
;

1241 i‡(
g_rmi_pdt
.
f54_quîy_39
.
has_˘æ154
)

1242 
ªg_addr
 +
F54_CONTROL_154_SIZE
;

1245 i‡(
g_rmi_pdt
.
f54_quîy_39
.
has_˘æ155
)

1246 
ªg_addr
 +
F54_CONTROL_155_SIZE
;

1249 i‡(
g_rmi_pdt
.
f54_quîy_39
.
has_˘æ156
)

1250 
ªg_addr
 +
F54_CONTROL_156_SIZE
;

1253 i‡(
g_rmi_pdt
.
f54_quîy_39
.
has_˘æ157_˘æ158
)

1254 
ªg_addr
 +
F54_CONTROL_157_158_SIZE
;

1259 i‡(
g_rmi_pdt
.
f54_quîy_40
.
has_˘æ163_quîy41
)

1260 
ªg_addr
 +
F54_CONTROL_163_SIZE
;

1265 i‡(
g_rmi_pdt
.
f54_quîy_40
.
has_˘æ165_quîy42
)

1266 
ªg_addr
 +
F54_CONTROL_165_SIZE
;

1269 i‡(
g_rmi_pdt
.
f54_quîy_40
.
has_˘æ166
)

1270 
ªg_addr
 +
F54_CONTROL_166_SIZE
;

1273 i‡(
g_rmi_pdt
.
f54_quîy_40
.
has_˘æ167
)

1274 
ªg_addr
 +
F54_CONTROL_167_SIZE
;

1277 i‡(
g_rmi_pdt
.
f54_quîy_40
.
has_˘æ168
)

1278 
ªg_addr
 +
F54_CONTROL_168_SIZE
;

1281 i‡(
g_rmi_pdt
.
f54_quîy_40
.
has_˘æ169
)

1282 
ªg_addr
 +
F54_CONTROL_169_SIZE
;

1287 i‡(
g_rmi_pdt
.
f54_quîy_43
.
has_˘æ171
)

1288 
ªg_addr
 +
F54_CONTROL_171_SIZE
;

1291 i‡(
g_rmi_pdt
.
f54_quîy_43
.
has_˘æ172_quîy44_quîy45
)

1292 
ªg_addr
 +
F54_CONTROL_172_SIZE
;

1295 i‡(
g_rmi_pdt
.
f54_quîy_43
.
has_˘æ173
)

1296 
ªg_addr
 +
F54_CONTROL_173_SIZE
;

1299 i‡(
g_rmi_pdt
.
f54_quîy_43
.
has_˘æ174
)

1300 
ªg_addr
 +
F54_CONTROL_174_SIZE
;

1303 i‡(
g_rmi_pdt
.
f54_quîy_43
.
has_˘æ175
)

1304 
ªg_addr
 +
F54_CONTROL_175_SIZE
;

1307 i‡(
g_rmi_pdt
.
f54_quîy_46
.
has_˘æ176
)

1308 
ªg_addr
 +
F54_CONTROL_176_SIZE
;

1311 i‡(
g_rmi_pdt
.
f54_quîy_46
.
has_˘æ177_˘æ178
)

1312 
ªg_addr
 +
F54_CONTROL_177_178_SIZE
;

1315 i‡(
g_rmi_pdt
.
f54_quîy_46
.
has_˘æ179
)

1316 
ªg_addr
 +
F54_CONTROL_179_SIZE
;

1321 i‡(
g_rmi_pdt
.
f54_quîy_47
.
has_˘æ182
) {

1322 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_182
.
addªss
 = 
ªg_addr
;

1323 
ªg_addr
 +
F54_CONTROL_182_SIZE
;

1327 i‡(
g_rmi_pdt
.
f54_quîy_47
.
has_˘æ183
)

1328 
ªg_addr
 +
F54_CONTROL_183_SIZE
;

1333 i‡(
g_rmi_pdt
.
f54_quîy_47
.
has_˘æ185
)

1334 
ªg_addr
 +
F54_CONTROL_185_SIZE
;

1337 i‡(
g_rmi_pdt
.
f54_quîy_47
.
has_˘æ186
)

1338 
ªg_addr
 +
F54_CONTROL_186_SIZE
;

1341 i‡(
g_rmi_pdt
.
f54_quîy_47
.
has_˘æ187
)

1342 
ªg_addr
 +
F54_CONTROL_187_SIZE
;

1345 i‡(
g_rmi_pdt
.
f54_quîy_49
.
has_˘æ188
) {

1346 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_188
.
addªss
 = 
ªg_addr
;

1347 
ªg_addr
 +
F54_CONTROL_188_SIZE
;

1353 i‡(
g_rmi_pdt
.
f54_quîy_51
.
has_˘æ196
)

1354 
ªg_addr
 +
F54_CONTROL_196_SIZE
;

1359 i‡(
g_rmi_pdt
.
f54_quîy_61
.
has_˘æ218
)

1360 
ªg_addr
 +
F54_CONTROL_218_SIZE
;

1365 i‡(
g_rmi_pdt
.
f54_quîy_64
.
has_˘æ103_sub3
) {

1366 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_223
.
addªss
 = 
ªg_addr
;

1369 
	}
}

1378 
boﬁ
 
	$rmi_∑r£_f54_öf‹m©i⁄
()

1380 
ªtvÆ
;

1381 
off£t
;

1384 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
,

1385 
g_rmi_pdt
.
f54_quîy
.
d©a
,

1386 (
g_rmi_pdt
.
f54_quîy
.
d©a
));

1387 i‡(
ªtvÆ
 < 0) {

1388 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy (0x%x)\n", 
__func__
,

1389 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
);

1390  
Ál£
;

1392 
off£t
 = (
g_rmi_pdt
.
f54_quîy
.
d©a
);

1395 i‡(
g_rmi_pdt
.
f54_quîy
.
has_£n£_‰equícy_c⁄åﬁ
 == 0)

1396 
off£t
 -= 1;

1399 i‡(
g_rmi_pdt
.
f54_quîy
.
has_quîy13
) {

1400 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1401 
g_rmi_pdt
.
f54_quîy_13
.
d©a
,

1402 (
g_rmi_pdt
.
f54_quîy_13
.
d©a
));

1403 i‡(
ªtvÆ
 < 0) {

1404 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_13 (0x%x)\n", 
__func__
,

1405 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1406  
Ál£
;

1408 
off£t
 += 1;

1412 i‡(
g_rmi_pdt
.
f54_quîy_13
.
has_˘æ87
)

1413 
off£t
 += 1;

1416 i‡(
g_rmi_pdt
.
f54_quîy
.
has_quîy15
) {

1417 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1418 
g_rmi_pdt
.
f54_quîy_15
.
d©a
,

1419 (
g_rmi_pdt
.
f54_quîy_15
.
d©a
));

1420 i‡(
ªtvÆ
 < 0) {

1421 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_15 (0x%x)\n", 
__func__
,

1422 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1423  
Ál£
;

1425 
off£t
 += 1;

1429 i‡(
g_rmi_pdt
.
f54_quîy_15
.
has_quîy16
) {

1430 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1431 
g_rmi_pdt
.
f54_quîy_16
.
d©a
,

1432 (
g_rmi_pdt
.
f54_quîy_16
.
d©a
));

1433 i‡(
ªtvÆ
 < 0) {

1434 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_16 (0x%x)\n", 
__func__
,

1435 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1436  
Ál£
;

1438 
off£t
 += 1;

1442 i‡(
g_rmi_pdt
.
f54_quîy_16
.
has_quîy17
) {

1443 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1444 &
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
,

1446 i‡(
ªtvÆ
 < 0) {

1447 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_16 (0x%x)\n", 
__func__
,

1448 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1449  
Ál£
;

1452 
off£t
 += 1;

1456 i‡(
g_rmi_pdt
.
f54_quîy_16
.
has_˘æ94_quîy18
)

1457 
off£t
 += 1;

1460 i‡(
g_rmi_pdt
.
f54_quîy_16
.
has_˘æ95_quîy19
)

1461 
off£t
 += 1;

1464 i‡(
g_rmi_pdt
.
f54_quîy_15
.
has_quîy20
)

1465 
off£t
 += 1;

1468 i‡(
g_rmi_pdt
.
f54_quîy_15
.
has_quîy21
) {

1469 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1470 
g_rmi_pdt
.
f54_quîy_21
.
d©a
,

1471 (
g_rmi_pdt
.
f54_quîy_21
.
d©a
));

1472 i‡(
ªtvÆ
 < 0) {

1473 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_21 (0x%x)\n", 
__func__
,

1474 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1475  
Ál£
;

1477 
off£t
 += 1;

1481 i‡(
g_rmi_pdt
.
f54_quîy_15
.
has_quîy22
) {

1482 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1483 
g_rmi_pdt
.
f54_quîy_22
.
d©a
,

1484 (
g_rmi_pdt
.
f54_quîy_22
.
d©a
));

1485 i‡(
ªtvÆ
 < 0) {

1486 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_22 (0x%x)\n", 
__func__
,

1487 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1488  
Ál£
;

1490 
off£t
 += 1;

1494 i‡(
g_rmi_pdt
.
f54_quîy_22
.
has_quîy23
) {

1495 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1496 
g_rmi_pdt
.
f54_quîy_23
.
d©a
,

1497 (
g_rmi_pdt
.
f54_quîy_23
.
d©a
));

1498 i‡(
ªtvÆ
 < 0) {

1499 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_23 (0x%x)\n", 
__func__
,

1500 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1501  
Ál£
;

1503 
off£t
 += 1;

1507 i‡(
g_rmi_pdt
.
f54_quîy_21
.
has_quîy24_d©a18
)

1508 
off£t
 += 1;

1511 i‡(
g_rmi_pdt
.
f54_quîy_15
.
has_quîy25
) {

1512 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1513 
g_rmi_pdt
.
f54_quîy_25
.
d©a
,

1514 (
g_rmi_pdt
.
f54_quîy_25
.
d©a
));

1515 i‡(
ªtvÆ
 < 0) {

1516 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_25 (0x%x)\n", 
__func__
,

1517 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1518  
Ál£
;

1520 
off£t
 += 1;

1524 i‡(
g_rmi_pdt
.
f54_quîy_22
.
has_˘æ103_quîy26
)

1525 
off£t
 += 1;

1528 i‡(
g_rmi_pdt
.
f54_quîy_25
.
has_quîy27
) {

1529 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1530 
g_rmi_pdt
.
f54_quîy_27
.
d©a
,

1531 (
g_rmi_pdt
.
f54_quîy_27
.
d©a
));

1532 i‡(
ªtvÆ
 < 0) {

1533 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_27 (0x%x)\n", 
__func__
,

1534 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1535  
Ál£
;

1537 
off£t
 += 1;

1541 i‡(
g_rmi_pdt
.
f54_quîy_22
.
has_quîy28
)

1542 
off£t
 += 1;

1545 i‡(
g_rmi_pdt
.
f54_quîy_27
.
has_quîy29
) {

1546 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1547 
g_rmi_pdt
.
f54_quîy_29
.
d©a
,

1548 (
g_rmi_pdt
.
f54_quîy_29
.
d©a
));

1549 i‡(
ªtvÆ
 < 0) {

1550 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_29 (0x%x)\n", 
__func__
,

1551 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1552  
Ál£
;

1554 
off£t
 += 1;

1558 i‡(
g_rmi_pdt
.
f54_quîy_29
.
has_quîy30
) {

1559 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1560 
g_rmi_pdt
.
f54_quîy_30
.
d©a
,

1561 (
g_rmi_pdt
.
f54_quîy_30
.
d©a
));

1562 i‡(
ªtvÆ
 < 0) {

1563 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_30 (0x%x)\n", 
__func__
,

1564 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1565  
Ál£
;

1567 
off£t
 += 1;

1571 i‡(
g_rmi_pdt
.
f54_quîy_30
.
has_˘æ122_quîy31
)

1572 
off£t
 += 1;

1575 i‡(
g_rmi_pdt
.
f54_quîy_30
.
has_quîy32
) {

1576 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1577 
g_rmi_pdt
.
f54_quîy_32
.
d©a
,

1578 (
g_rmi_pdt
.
f54_quîy_32
.
d©a
));

1579 i‡(
ªtvÆ
 < 0) {

1580 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_32 (0x%x)\n", 
__func__
,

1581 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1582  
Ál£
;

1584 
off£t
 += 1;

1588 i‡(
g_rmi_pdt
.
f54_quîy_32
.
has_quîy33
) {

1589 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1590 
g_rmi_pdt
.
f54_quîy_33
.
d©a
,

1591 (
g_rmi_pdt
.
f54_quîy_33
.
d©a
));

1592 i‡(
ªtvÆ
 < 0) {

1593 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_33 (0x%x)\n", 
__func__
,

1594 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1595  
Ál£
;

1597 
off£t
 += 1;

1601 i‡(
g_rmi_pdt
.
f54_quîy_32
.
has_quîy34
)

1602 
off£t
 += 1;

1605 i‡(
g_rmi_pdt
.
f54_quîy_32
.
has_quîy35
) {

1606 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1607 
g_rmi_pdt
.
f54_quîy_35
.
d©a
,

1608 (
g_rmi_pdt
.
f54_quîy_35
.
d©a
));

1609 i‡(
ªtvÆ
 < 0) {

1610 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_35 (0x%x)\n", 
__func__
,

1611 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1612  
Ál£
;

1614 
off£t
 += 1;

1618 i‡(
g_rmi_pdt
.
f54_quîy_33
.
has_quîy36
) {

1619 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1620 
g_rmi_pdt
.
f54_quîy_36
.
d©a
,

1621 (
g_rmi_pdt
.
f54_quîy_36
.
d©a
));

1622 i‡(
ªtvÆ
 < 0) {

1623 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_36 (0x%x)\n", 
__func__
,

1624 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1625  
Ál£
;

1627 
off£t
 += 1;

1631 i‡(
g_rmi_pdt
.
f54_quîy_36
.
has_quîy37
)

1632 
off£t
 += 1;

1635 i‡(
g_rmi_pdt
.
f54_quîy_36
.
has_quîy38
) {

1636 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1637 
g_rmi_pdt
.
f54_quîy_38
.
d©a
,

1638 (
g_rmi_pdt
.
f54_quîy_38
.
d©a
));

1639 i‡(
ªtvÆ
 < 0) {

1640 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_38 (0x%x)\n", 
__func__
,

1641 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1642  
Ál£
;

1644 
off£t
 += 1;

1648 i‡(
g_rmi_pdt
.
f54_quîy_38
.
has_quîy39
) {

1649 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1650 
g_rmi_pdt
.
f54_quîy_39
.
d©a
,

1651 (
g_rmi_pdt
.
f54_quîy_39
.
d©a
));

1652 i‡(
ªtvÆ
 < 0) {

1653 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_39 (0x%x)\n", 
__func__
,

1654 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1655  
Ál£
;

1657 
off£t
 += 1;

1661 i‡(
g_rmi_pdt
.
f54_quîy_39
.
has_quîy40
) {

1662 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1663 
g_rmi_pdt
.
f54_quîy_40
.
d©a
,

1664 (
g_rmi_pdt
.
f54_quîy_40
.
d©a
));

1665 i‡(
ªtvÆ
 < 0) {

1666 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_40 (0x%x)\n", 
__func__
,

1667 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1668  
Ál£
;

1670 
off£t
 += 1;

1674 i‡(
g_rmi_pdt
.
f54_quîy_40
.
has_˘æ163_quîy41
)

1675 
off£t
 += 1;

1678 i‡(
g_rmi_pdt
.
f54_quîy_40
.
has_˘æ165_quîy42
)

1679 
off£t
 += 1;

1682 i‡(
g_rmi_pdt
.
f54_quîy_40
.
has_quîy43
) {

1683 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1684 
g_rmi_pdt
.
f54_quîy_43
.
d©a
,

1685 (
g_rmi_pdt
.
f54_quîy_43
.
d©a
));

1686 i‡(
ªtvÆ
 < 0) {

1687 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_43 (0x%x)\n", 
__func__
,

1688 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1689  
Ál£
;

1691 
off£t
 += 1;

1694 i‡(
g_rmi_pdt
.
f54_quîy_43
.
has_˘æ172_quîy44_quîy45
)

1695 
off£t
 += 2;

1698 i‡(
g_rmi_pdt
.
f54_quîy_43
.
has_quîy46
) {

1699 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1700 
g_rmi_pdt
.
f54_quîy_46
.
d©a
,

1701 (
g_rmi_pdt
.
f54_quîy_46
.
d©a
));

1702 i‡(
ªtvÆ
 < 0) {

1703 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_46 (0x%x)\n", 
__func__
,

1704 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1705  
Ál£
;

1707 
off£t
 += 1;

1711 i‡(
g_rmi_pdt
.
f54_quîy_46
.
has_quîy47
) {

1712 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1713 
g_rmi_pdt
.
f54_quîy_47
.
d©a
,

1714 (
g_rmi_pdt
.
f54_quîy_47
.
d©a
));

1715 i‡(
ªtvÆ
 < 0) {

1716 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_47 (0x%x)\n", 
__func__
,

1717 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1718  
Ál£
;

1720 
off£t
 += 1;

1726 i‡(
g_rmi_pdt
.
f54_quîy_47
.
has_quîy49
) {

1727 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1728 
g_rmi_pdt
.
f54_quîy_49
.
d©a
,

1729 (
g_rmi_pdt
.
f54_quîy_49
.
d©a
));

1730 i‡(
ªtvÆ
 < 0) {

1731 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_49 (0x%x)\n", 
__func__
,

1732 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1733  
Ál£
;

1735 
off£t
 += 1;

1739 i‡(
g_rmi_pdt
.
f54_quîy_49
.
has_quîy50
) {

1740 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1741 
g_rmi_pdt
.
f54_quîy_50
.
d©a
,

1742 (
g_rmi_pdt
.
f54_quîy_50
.
d©a
));

1743 i‡(
ªtvÆ
 < 0) {

1744 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_50 (0x%x)\n", 
__func__
,

1745 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1746  
Ál£
;

1748 
off£t
 += 1;

1752 i‡(
g_rmi_pdt
.
f54_quîy_50
.
has_quîy51
) {

1753 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1754 
g_rmi_pdt
.
f54_quîy_51
.
d©a
,

1755 (
g_rmi_pdt
.
f54_quîy_51
.
d©a
));

1756 i‡(
ªtvÆ
 < 0) {

1757 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_51 (0x%x)\n", 
__func__
,

1758 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1759  
Ál£
;

1761 
off£t
 += 1;

1769 i‡(
g_rmi_pdt
.
f54_quîy_51
.
has_quîy53_quîy54_˘æ198
)

1770 
off£t
 += 2;

1773 i‡(
g_rmi_pdt
.
f54_quîy_51
.
has_quîy55
) {

1774 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1775 
g_rmi_pdt
.
f54_quîy_55
.
d©a
,

1776 (
g_rmi_pdt
.
f54_quîy_55
.
d©a
));

1777 i‡(
ªtvÆ
 < 0) {

1778 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_55 (0x%x)\n", 
__func__
,

1779 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1780  
Ál£
;

1782 
off£t
 += 1;

1786 i‡(
g_rmi_pdt
.
f54_quîy_55
.
has_quîy56
)

1787 
off£t
 += 1;

1790 i‡(
g_rmi_pdt
.
f54_quîy_55
.
has_quîy57
) {

1791 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1792 
g_rmi_pdt
.
f54_quîy_57
.
d©a
,

1793 (
g_rmi_pdt
.
f54_quîy_57
.
d©a
));

1794 i‡(
ªtvÆ
 < 0) {

1795 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_57 (0x%x)\n", 
__func__
,

1796 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1797  
Ál£
;

1799 
off£t
 += 1;

1803 i‡(
g_rmi_pdt
.
f54_quîy_57
.
has_quîy58
) {

1804 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1805 
g_rmi_pdt
.
f54_quîy_58
.
d©a
,

1806 (
g_rmi_pdt
.
f54_quîy_58
.
d©a
));

1807 i‡(
ªtvÆ
 < 0) {

1808 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_58 (0x%x)\n", 
__func__
,

1809 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1810  
Ál£
;

1812 
off£t
 += 1;

1816 i‡(
g_rmi_pdt
.
f54_quîy_58
.
has_quîy59
)

1817 
off£t
 += 1;

1820 i‡(
g_rmi_pdt
.
f54_quîy_58
.
has_quîy60
)

1821 
off£t
 += 1;

1824 i‡(
g_rmi_pdt
.
f54_quîy_58
.
has_quîy61
) {

1825 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1826 
g_rmi_pdt
.
f54_quîy_61
.
d©a
,

1827 (
g_rmi_pdt
.
f54_quîy_61
.
d©a
));

1828 i‡(
ªtvÆ
 < 0) {

1829 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_61 (0x%x)\n", 
__func__
,

1830 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1831  
Ál£
;

1833 
off£t
 += 1;

1837 i‡(
g_rmi_pdt
.
f54_quîy_61
.
has_˘æ215_quîy62_quîy63
)

1838 
off£t
 += 2;

1841 i‡(
g_rmi_pdt
.
f54_quîy_61
.
has_quîy64
) {

1842 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1843 
g_rmi_pdt
.
f54_quîy_64
.
d©a
,

1844 (
g_rmi_pdt
.
f54_quîy_64
.
d©a
));

1845 i‡(
ªtvÆ
 < 0) {

1846 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_64 (0x%x)\n", 
__func__
,

1847 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1848  
Ál£
;

1850 
off£t
 += 1;

1854 i‡(
g_rmi_pdt
.
f54_quîy_64
.
has_quîy65
) {

1855 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1856 
g_rmi_pdt
.
f54_quîy_65
.
d©a
,

1857 (
g_rmi_pdt
.
f54_quîy_65
.
d©a
));

1858 i‡(
ªtvÆ
 < 0) {

1859 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_65 (0x%x)\n", 
__func__
,

1860 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1861  
Ál£
;

1863 
off£t
 += 1;

1867 i‡(
g_rmi_pdt
.
f54_quîy_65
.
has_quîy66_˘æ231
)

1868 
off£t
 += 1;

1871 i‡(
g_rmi_pdt
.
f54_quîy_65
.
has_quîy67
) {

1872 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1873 
g_rmi_pdt
.
f54_quîy_67
.
d©a
,

1874 (
g_rmi_pdt
.
f54_quîy_67
.
d©a
));

1875 i‡(
ªtvÆ
 < 0) {

1876 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_67 (0x%x)\n", 
__func__
,

1877 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1878  
Ál£
;

1880 
off£t
 += 1;

1884 i‡(
g_rmi_pdt
.
f54_quîy_67
.
has_quîy68
) {

1885 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1886 
g_rmi_pdt
.
f54_quîy_68
.
d©a
,

1887 (
g_rmi_pdt
.
f54_quîy_68
.
d©a
));

1888 i‡(
ªtvÆ
 < 0) {

1889 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_68 (0x%x)\n", 
__func__
,

1890 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1891  
Ál£
;

1893 
off£t
 += 1;

1897 i‡(
g_rmi_pdt
.
f54_quîy_68
.
has_quîy69
) {

1898 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
,

1899 
g_rmi_pdt
.
f54_quîy_69
.
d©a
,

1900 (
g_rmi_pdt
.
f54_quîy_69
.
d©a
));

1901 i‡(
ªtvÆ
 < 0) {

1902 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_quîy_68 (0x%x)\n", 
__func__
,

1903 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 + 
off£t
);

1904  
Ál£
;

1909 
g_rmi_pdt
.
tx_assig√d
 = g_rmi_pdt.
f54_quîy
.
num_of_tx_ñe˘rodes
;

1910 
g_rmi_pdt
.
rx_assig√d
 = g_rmi_pdt.
f54_quîy
.
num_of_rx_ñe˘rodes
;

1912 
	`¥ötf_i
("%†öfo: ch™√»assignmíà—x,ÑxË(%d, %d)\n", 
__func__
,

1913 
g_rmi_pdt
.
tx_assig√d
, g_rmi_pdt.
rx_assig√d
);

1916 
	`rmi_∑r£_f54_c⁄åﬁ
();

1918 
	`rmi_∑r£_f54_d©a
();

1920  
åue
;

1921 
	}
}

1929 
	$rmi_∑r£_f55_c⁄åﬁ
()

1931 
off£t
 = 0;

1934 i‡(
g_rmi_pdt
.
f55_quîy
.
has_£ns‹_assignmít
)

1935 
off£t
 += 3;

1938 i‡(
g_rmi_pdt
.
f55_quîy
.
has_edge_com≥nßti⁄
)

1939 
off£t
++;

1942 i‡(
g_rmi_pdt
.
f55_quîy
.
curve_com≥nßti⁄_mode
 == 0x1 ||

1943 
g_rmi_pdt
.
f55_quîy
.
curve_com≥nßti⁄_mode
 == 0x2)

1944 
off£t
++;

1947 i‡(
g_rmi_pdt
.
f55_quîy
.
curve_com≥nßti⁄_mode
 == 0x2)

1948 
off£t
++;

1951 i‡(
g_rmi_pdt
.
f55_quîy
.
has_˘æ6
)

1952 
off£t
++;

1955 i‡(
g_rmi_pdt
.
f55_quîy
.
has_Æã∫©e_å™smôãr_assignmít
)

1956 
off£t
++;

1959 i‡(
g_rmi_pdt
.
f55_quîy_3
.
has_˘æ8
)

1960 
off£t
++;

1963 i‡(
g_rmi_pdt
.
f55_quîy_3
.
has_˘æ9
)

1964 
off£t
++;

1967 i‡(
g_rmi_pdt
.
f55_quîy_5
.
has_c‹√r_com≥nßti⁄
)

1968 
off£t
++;

1971 i‡(
g_rmi_pdt
.
f55_quîy
.
curve_com≥nßti⁄_mode
 == 0x3)

1972 
off£t
++;

1975 i‡(
g_rmi_pdt
.
f55_quîy_5
.
has_˘æ12
)

1976 
off£t
++;

1979 i‡(
g_rmi_pdt
.
f55_quîy_5
.
has_˘æ13
)

1980 
off£t
++;

1983 i‡(
g_rmi_pdt
.
f55_quîy_5
.
has_˘æ14
)

1984 
off£t
++;

1987 i‡(
g_rmi_pdt
.
f55_quîy_5
.
has_basis_fun˘i⁄
)

1988 
off£t
++;

1991 i‡(
g_rmi_pdt
.
f55_quîy_17
.
has_˘æ16
)

1992 
off£t
++;

1995 i‡(
g_rmi_pdt
.
f55_quîy_17
.
has_˘æ17
)

1996 
off£t
++;

1999 i‡(
g_rmi_pdt
.
f55_quîy_17
.
has_˘æ18_˘æ19
)

2000 
off£t
 += 2;

2003 i‡(
g_rmi_pdt
.
f55_quîy_17
.
has_˘æ20
)

2004 
off£t
++;

2007 i‡(
g_rmi_pdt
.
f55_quîy_17
.
has_˘æ21
)

2008 
off£t
++;

2011 i‡(
g_rmi_pdt
.
f55_quîy_17
.
has_˘æ22
)

2012 
off£t
++;

2015 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_˘æ23
)

2016 
off£t
++;

2019 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_˘æ24
)

2020 
off£t
++;

2023 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_˘æ25
)

2024 
off£t
++;

2027 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_˘æ26
)

2028 
off£t
++;

2031 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_˘æ27_quîy20
)

2032 
off£t
++;

2035 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_˘æ28_quîy21
)

2036 
off£t
++;

2039 i‡(
g_rmi_pdt
.
f55_quîy_22
.
has_˘æ29
)

2040 
off£t
++;

2043 i‡(
g_rmi_pdt
.
f55_quîy_22
.
has_˘æ30
)

2044 
off£t
++;

2047 i‡(
g_rmi_pdt
.
f55_quîy_22
.
has_˘æ31
)

2048 
off£t
++;

2051 i‡(
g_rmi_pdt
.
f55_quîy_22
.
has_˘æ32
)

2052 
off£t
++;

2057 i‡(
g_rmi_pdt
.
f55_quîy_28
.
has_˘æ37
)

2058 
off£t
++;

2061 i‡(
g_rmi_pdt
.
f55_quîy_30
.
has_˘æ38
)

2062 
off£t
++;

2065 i‡(
g_rmi_pdt
.
f55_quîy_30
.
has_˘æ39
)

2066 
off£t
++;

2069 i‡(
g_rmi_pdt
.
f55_quîy_30
.
has_˘æ40
)

2070 
off£t
++;

2073 i‡(
g_rmi_pdt
.
f55_quîy_30
.
has_˘æ41
)

2074 
off£t
++;

2077 i‡(
g_rmi_pdt
.
f55_quîy_30
.
has_˘æ42
)

2078 
off£t
++;

2081 i‡(
g_rmi_pdt
.
f55_quîy_30
.
has_˘æ43_˘æ44
) {

2082 
g_rmi_pdt
.
a„_mux_off£t
 = 
off£t
;

2086 
	}
}

2095 
boﬁ
 
	$rmi_∑r£_f55_öf‹m©i⁄
()

2097 
ªtvÆ
;

2098 
off£t
;

2099 
rx_ñe˘rodes
;

2100 
tx_ñe˘rodes
;

2101 
f55_c⁄åﬁ_43
 
˘æ_43
;

2102 
ii
;

2105 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
,

2106 
g_rmi_pdt
.
f55_quîy
.
d©a
,

2107 (
g_rmi_pdt
.
f55_quîy
.
d©a
));

2108 i‡(
ªtvÆ
 < 0) {

2109 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy (0x%x)\n", 
__func__
,

2110 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
);

2111  
Ál£
;

2113 
off£t
 = (
g_rmi_pdt
.
f55_quîy
.
d©a
);

2116 i‡(
g_rmi_pdt
.
f55_quîy
.
has_sögÀ_œyî_mu…i_touch
) {

2117 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
,

2118 
g_rmi_pdt
.
f55_quîy_3
.
d©a
,

2119 (
g_rmi_pdt
.
f55_quîy_3
.
d©a
));

2120 i‡(
ªtvÆ
 < 0) {

2121 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy_3 (0x%x)\n", 
__func__
,

2122 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
);

2123  
Ál£
;

2125 
off£t
 += 1;

2129 i‡(
g_rmi_pdt
.
f55_quîy_3
.
has_˘æ9
)

2130 
off£t
 += 1;

2133 i‡(
g_rmi_pdt
.
f55_quîy
.
has_quîy5
) {

2134 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
,

2135 
g_rmi_pdt
.
f55_quîy_5
.
d©a
,

2136 (
g_rmi_pdt
.
f55_quîy_5
.
d©a
));

2137 i‡(
ªtvÆ
 < 0) {

2138 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy_5 (0x%x)\n", 
__func__
,

2139 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
);

2140  
Ál£
;

2142 
off£t
 += 1;

2146 i‡(
g_rmi_pdt
.
f55_quîy
.
curve_com≥nßti⁄_mode
 == 0x3)

2147 
off£t
 += 2;

2150 i‡(
g_rmi_pdt
.
f55_quîy_3
.
has_˘æ8
)

2151 
off£t
 += 1;

2154 i‡(
g_rmi_pdt
.
f55_quîy_3
.
has_quîy9
)

2155 
off£t
 += 1;

2158 i‡(
g_rmi_pdt
.
f55_quîy_5
.
has_basis_fun˘i⁄
)

2159 
off£t
 += 7;

2162 i‡(
g_rmi_pdt
.
f55_quîy_5
.
has_quîy17
) {

2163 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
,

2164 
g_rmi_pdt
.
f55_quîy_17
.
d©a
,

2165 (
g_rmi_pdt
.
f55_quîy_17
.
d©a
));

2166 i‡(
ªtvÆ
 < 0) {

2167 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy_17 (0x%x)\n", 
__func__
,

2168 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
);

2169  
Ál£
;

2171 
off£t
 += 1;

2175 i‡(
g_rmi_pdt
.
f55_quîy_17
.
has_quîy18
) {

2176 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
,

2177 
g_rmi_pdt
.
f55_quîy_18
.
d©a
,

2178 (
g_rmi_pdt
.
f55_quîy_18
.
d©a
));

2179 i‡(
ªtvÆ
 < 0) {

2180 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy_18 (0x%x)\n", 
__func__
,

2181 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
);

2182  
Ál£
;

2184 
off£t
 += 1;

2188 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_quîy19
)

2189 
off£t
 += 1;

2192 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_˘æ27_quîy20
)

2193 
off£t
 += 1;

2196 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_˘æ28_quîy21
)

2197 
off£t
 += 1;

2200 i‡(
g_rmi_pdt
.
f55_quîy_18
.
has_quîy22
) {

2201 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
,

2202 
g_rmi_pdt
.
f55_quîy_22
.
d©a
,

2203 (
g_rmi_pdt
.
f55_quîy_22
.
d©a
));

2204 i‡(
ªtvÆ
 < 0) {

2205 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy_22 (0x%x)\n", 
__func__
,

2206 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
);

2207  
Ál£
;

2209 
off£t
 += 1;

2213 i‡(
g_rmi_pdt
.
f55_quîy_22
.
has_quîy23
) {

2214 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
,

2215 
g_rmi_pdt
.
f55_quîy_23
.
d©a
,

2216 (
g_rmi_pdt
.
f55_quîy_23
.
d©a
));

2217 i‡(
ªtvÆ
 < 0) {

2218 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy_23 (0x%x)\n", 
__func__
,

2219 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
);

2220  
Ál£
;

2222 
off£t
 += 1;

2224 
g_rmi_pdt
.
amp_£ns‹
 = g_rmi_pdt.
f55_quîy_23
.
amp_£ns‹_íabÀd
;

2225 
g_rmi_pdt
.
size_of_cﬁumn2mux
 = g_rmi_pdt.
f55_quîy_23
.size_of_column2mux;

2231 i‡(
g_rmi_pdt
.
f55_quîy_22
.
has_quîy28
) {

2232 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
,

2233 
g_rmi_pdt
.
f55_quîy_28
.
d©a
,

2234 (
g_rmi_pdt
.
f55_quîy_28
.
d©a
));

2235 i‡(
ªtvÆ
 < 0) {

2236 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy_28 (0x%x)\n", 
__func__
,

2237 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
);

2238  
Ál£
;

2240 
off£t
 += 1;

2244 i‡(
g_rmi_pdt
.
f55_quîy_28
.
has_quîy29
)

2245 
off£t
 += 1;

2248 i‡(
g_rmi_pdt
.
f55_quîy_28
.
has_quîy30
) {

2249 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
,

2250 
g_rmi_pdt
.
f55_quîy_30
.
d©a
,

2251 (
g_rmi_pdt
.
f55_quîy_30
.
d©a
));

2252 i‡(
ªtvÆ
 < 0) {

2253 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy_30 (0x%x)\n", 
__func__
,

2254 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
);

2255  
Ál£
;

2257 
off£t
 += 1;

2261 i‡(
g_rmi_pdt
.
f55_quîy_30
.
has_quîy31_quîy32
)

2262 
off£t
 += 2;

2265 i‡(
g_rmi_pdt
.
f55_quîy_30
.
has_quîy33
) {

2266 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
,

2267 
g_rmi_pdt
.
f55_quîy_33
.
d©a
,

2268 (
g_rmi_pdt
.
f55_quîy_33
.
d©a
));

2269 i‡(
ªtvÆ
 < 0) {

2270 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55_quîy_33 (0x%x)\n", 
__func__
,

2271 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 + 
off£t
);

2272  
Ál£
;

2276 
g_rmi_pdt
.
exãnded_amp
 = g_rmi_pdt.
f55_quîy_33
.
has_exãnded_amp_∑d
;

2277 
g_rmi_pdt
.
exãnded_amp_bä
 = g_rmi_pdt.
f55_quîy_33
.
has_exãnded_amp_bä
;

2280 i‡(!
g_rmi_pdt
.
f55_quîy
.
has_£ns‹_assignmít
) {

2281 
	`¥ötf_e
("%†îr‹:Çÿ£ns‹ássignmíàdeföed\n", 
__func__
);

2282  
Ál£
;

2286 
	`rmi_∑r£_f55_c⁄åﬁ
();

2288 
tx_ñe˘rodes
 = 
g_rmi_pdt
.
f55_quîy
.
num_of_tx_ñe˘rodes
;

2289 
rx_ñe˘rodes
 = 
g_rmi_pdt
.
f55_quîy
.
num_of_rx_ñe˘rodes
;

2292 i‡(
tx_ñe˘rodes
 > 
MAX_SENSOR_MAP_SIZE
){

2293 
	`¥ötf_e
("%†îr‹: u√x≥˘edÅxÉÀ˘rode†%d", 
__func__
, 
tx_ñe˘rodes
);

2294  
Ál£
;

2296 
ªtvÆ
 = 
	`rmi_ªad_ªg
(()(
g_rmi_pdt
.
F55
.
c⁄åﬁ_ba£_addr
 + 
SENSOR_TX_MAPPING_OFFSET
),

2297 
g_rmi_pdt
.
tx_assignmít
,

2298 
tx_ñe˘rodes
);

2299 i‡(
ªtvÆ
 < 0) {

2300 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55Åxássignmít", 
__func__
);

2301  
Ál£
;

2304 i‡(
rx_ñe˘rodes
 > 
MAX_SENSOR_MAP_SIZE
){

2305 
	`¥ötf_e
("%†îr‹: u√x≥˘edÑxÉÀ˘rode†%d", 
__func__
, 
rx_ñe˘rodes
);

2306  
Ál£
;

2308 
ªtvÆ
 = 
	`rmi_ªad_ªg
(()(
g_rmi_pdt
.
F55
.
c⁄åﬁ_ba£_addr
 + 
SENSOR_RX_MAPPING_OFFSET
),

2309 
g_rmi_pdt
.
rx_assignmít
,

2310 
rx_ñe˘rodes
);

2311 i‡(
ªtvÆ
 < 0) {

2312 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55Ñxássignmít", 
__func__
);

2313  
Ál£
;

2316 
g_rmi_pdt
.
tx_assig√d
 = 0;

2317 
ii
 = 0; iò< 
tx_ñe˘rodes
; ii++) {

2318 i‡(
g_rmi_pdt
.
tx_assignmít
[
ii
] != 0xff)

2319 
g_rmi_pdt
.
tx_assig√d
++;

2322 
g_rmi_pdt
.
rx_assig√d
 = 0;

2323 
ii
 = 0; iò< 
rx_ñe˘rodes
; ii++) {

2324 i‡(
g_rmi_pdt
.
rx_assignmít
[
ii
] != 0xff)

2325 
g_rmi_pdt
.
rx_assig√d
++;

2328 i‡(
g_rmi_pdt
.
amp_£ns‹
) {

2329 
g_rmi_pdt
.
tx_assig√d
 = g_rmi_pdt.
size_of_cﬁumn2mux
;

2330 
g_rmi_pdt
.
rx_assig√d
 /= 2;

2333 i‡(
g_rmi_pdt
.
exãnded_amp
) {

2334 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F55
.
c⁄åﬁ_ba£_addr
 + g_rmi_pdt.
a„_mux_off£t
,

2335 
˘æ_43
.
d©a
,

2336 (
˘æ_43
.
d©a
));

2337 i‡(
ªtvÆ
 < 0) {

2338 
	`¥ötf_e
("%†îr‹: faûÅÿªad f55á„ mux sizes", 
__func__
);

2339  
Ál£
;

2342 
g_rmi_pdt
.
tx_assig√d
 = 
˘æ_43
.
a„_l_mux_size
 + cål_43.
a„_r_mux_size
;

2344 
g_rmi_pdt
.
sw≠_£ns‹_side
 = 
˘æ_43
.swap_sensor_side;

2345 
g_rmi_pdt
.
À·_mux_size
 = 
˘æ_43
.
a„_l_mux_size
;

2346 
g_rmi_pdt
.
right_mux_size
 = 
˘æ_43
.
a„_r_mux_size
;

2349  
åue
;

2350 
	}
}

2360 
	$rmi_sˇn_pdt
()

2362 #ifde‡
SAVE_ERR_MSG


2363 
îr
[
MAX_ERR_STRING_LEN
];

2365 
addªss
;

2366 
buf„r
[6];

2367 
∑ge
 = 0;

2368 
∑geAddªss
 = 0;

2369 
boﬁ
 
ªt
;

2371 i‡(
rmi_is_öôülized
) {

2372 
	`¥ötf_i
("%s:Ñmòha†bì¿öôülized\n", 
__func__
);

2376 
	`mem£t
(&
g_rmi_pdt
.
F01
, 0, (
Fun˘i⁄Des¸ùt‹
));

2377 
	`mem£t
(&
g_rmi_pdt
.
F12
, 0, (
Fun˘i⁄Des¸ùt‹
));

2378 
	`mem£t
(&
g_rmi_pdt
.
F1A
, 0, (
Fun˘i⁄Des¸ùt‹
));

2379 
	`mem£t
(&
g_rmi_pdt
.
F34
, 0, (
Fun˘i⁄Des¸ùt‹
));

2380 
	`mem£t
(&
g_rmi_pdt
.
F54
, 0, (
Fun˘i⁄Des¸ùt‹
));

2381 
	`mem£t
(&
g_rmi_pdt
.
F55
, 0, (
Fun˘i⁄Des¸ùt‹
));

2388 
∑ge
 = 0x0;Öage < 6;Öage++) {

2389 
∑geAddªss
 = 0xe9;ÖageAddress > 0xc0;ÖageAddress -= 6) {

2390 
addªss
 = (
∑ge
 << 8Ë| 
∑geAddªss
;

2391 
	`rmi_ªad_ªg
(
addªss
, 
buf„r
, (buffer));

2393 i‡(
buf„r
[5] == 0x01){

2394 
g_rmi_pdt
.
F01
.
quîy_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[0];

2395 
g_rmi_pdt
.
F01
.
comm™d_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[1];

2396 
g_rmi_pdt
.
F01
.
c⁄åﬁ_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[2];

2397 
g_rmi_pdt
.
F01
.
d©a_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[3];

2398 
g_rmi_pdt
.
F01
.
Vîsi⁄
 = (Ë((
buf„r
[4] >> 5) & 0x03);

2399 
g_rmi_pdt
.
F01
.
I¡îru±Sour˚Cou¡
 = (Ë(
buf„r
[4] & 0x07);

2400 
g_rmi_pdt
.
F01
.
ID
 = 
buf„r
[5];

2402 i‡(
buf„r
[5] == 0x11){

2403 
g_rmi_pdt
.
F11
.
quîy_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[0];

2404 
g_rmi_pdt
.
F11
.
comm™d_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[1];

2405 
g_rmi_pdt
.
F11
.
c⁄åﬁ_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[2];

2406 
g_rmi_pdt
.
F11
.
d©a_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[3];

2407 
g_rmi_pdt
.
F11
.
Vîsi⁄
 = (Ë((
buf„r
[4] >> 5) & 0x03);

2408 
g_rmi_pdt
.
F11
.
I¡îru±Sour˚Cou¡
 = (Ë(
buf„r
[4] & 0x07);

2409 
g_rmi_pdt
.
F11
.
ID
 = 
buf„r
[5];

2411 i‡(
buf„r
[5] == 0x12){

2412 
g_rmi_pdt
.
F12
.
quîy_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[0];

2413 
g_rmi_pdt
.
F12
.
comm™d_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[1];

2414 
g_rmi_pdt
.
F12
.
c⁄åﬁ_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[2];

2415 
g_rmi_pdt
.
F12
.
d©a_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[3];

2416 
g_rmi_pdt
.
F12
.
Vîsi⁄
 = (Ë((
buf„r
[4] >> 5) & 0x03);

2417 
g_rmi_pdt
.
F12
.
I¡îru±Sour˚Cou¡
 = (Ë(
buf„r
[4] & 0x07);

2418 
g_rmi_pdt
.
F12
.
ID
 = 
buf„r
[5];

2420 i‡(
buf„r
[5] == 0x1A){

2421 
g_rmi_pdt
.
F1A
.
quîy_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[0];

2422 
g_rmi_pdt
.
F1A
.
comm™d_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[1];

2423 
g_rmi_pdt
.
F1A
.
c⁄åﬁ_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[2];

2424 
g_rmi_pdt
.
F1A
.
d©a_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[3];

2425 
g_rmi_pdt
.
F1A
.
Vîsi⁄
 = (Ë((
buf„r
[4] >> 5) & 0x03);

2426 
g_rmi_pdt
.
F1A
.
I¡îru±Sour˚Cou¡
 = (Ë(
buf„r
[4] & 0x07);

2427 
g_rmi_pdt
.
F1A
.
ID
 = 
buf„r
[5];

2429 i‡(
buf„r
[5] == 0x34){

2430 
g_rmi_pdt
.
F34
.
quîy_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[0];

2431 
g_rmi_pdt
.
F34
.
comm™d_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[1];

2432 
g_rmi_pdt
.
F34
.
c⁄åﬁ_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[2];

2433 
g_rmi_pdt
.
F34
.
d©a_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[3];

2434 
g_rmi_pdt
.
F34
.
Vîsi⁄
 = (Ë((
buf„r
[4] >> 5) & 0x03);

2435 
g_rmi_pdt
.
F34
.
I¡îru±Sour˚Cou¡
 = (Ë(
buf„r
[4] & 0x07);

2436 
g_rmi_pdt
.
F34
.
ID
 = 
buf„r
[5];

2438 i‡(
buf„r
[5] == 0x54){

2440 
g_rmi_pdt
.
F54
.
quîy_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[0];

2441 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[1];

2442 
g_rmi_pdt
.
F54
.
c⁄åﬁ_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[2];

2443 
g_rmi_pdt
.
F54
.
d©a_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[3];

2444 
g_rmi_pdt
.
F54
.
Vîsi⁄
 = (Ë((
buf„r
[4] >> 5) & 0x03);

2445 
g_rmi_pdt
.
F54
.
I¡îru±Sour˚Cou¡
 = (Ë(
buf„r
[4] & 0x07);

2446 
g_rmi_pdt
.
F54
.
ID
 = 
buf„r
[5];

2448 i‡(
buf„r
[5] == 0x55){

2449 
g_rmi_pdt
.
F55
.
quîy_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[0];

2450 
g_rmi_pdt
.
F55
.
comm™d_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[1];

2451 
g_rmi_pdt
.
F55
.
c⁄åﬁ_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[2];

2452 
g_rmi_pdt
.
F55
.
d©a_ba£_addr
 = (
∑ge
 << 8Ë| 
buf„r
[3];

2453 
g_rmi_pdt
.
F55
.
Vîsi⁄
 = (Ë((
buf„r
[4] >> 5) & 0x03);

2454 
g_rmi_pdt
.
F55
.
I¡îru±Sour˚Cou¡
 = (Ë(
buf„r
[4] & 0x07);

2455 
g_rmi_pdt
.
F55
.
ID
 = 
buf„r
[5];

2457 i‡(
buf„r
[5] == 0x00) {

2465 i‡(
g_rmi_pdt
.
F34
.
ID
 == 0x34) {

2466 
ªt
 = 
	`rmi_∑r£_f34_öf‹m©i⁄
();

2467 i‡(!
ªt
) {

2468 
	`¥ötf_e
("%†îr‹: faûÅÿgë f34 info,Éxô\n", 
__func__
);

2469 #ifde‡
SAVE_ERR_MSG


2470 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë f34 info,Éxô\n", 
__func__
);

2471 
	`add_îr‹_msg
(
îr
);

2477 i‡(
g_rmi_pdt
.
F01
.
ID
 == 0x01) {

2478 
ªt
 = 
	`rmi_∑r£_f01_öf‹m©i⁄
();

2479 i‡(!
ªt
) {

2480 
	`¥ötf_e
("%†îr‹: faûÅÿgë f01 info,Éxô\n", 
__func__
);

2481 #ifde‡
SAVE_ERR_MSG


2482 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë f01 info,Éxô\n", 
__func__
);

2483 
	`add_îr‹_msg
(
îr
);

2489 
	`¥ötf_e
("%†îr‹: F$01 i†nŸ found,Éxô\n", 
__func__
);

2490 #ifde‡
SAVE_ERR_MSG


2491 
	`•rötf
(
îr
, "%†îr‹: F$01 i†nŸ found,Éxô\n", 
__func__
);

2492 
	`add_îr‹_msg
(
îr
);

2498 i‡(
g_rmi_pdt
.
F12
.
ID
 == 0x12) {

2499 
ªt
 = 
	`rmi_∑r£_f12_öf‹m©i⁄
();

2500 i‡(!
ªt
) {

2501 
	`¥ötf_e
("%†îr‹: faûÅÿgë f12 info,Éxô\n", 
__func__
);

2502 #ifde‡
SAVE_ERR_MSG


2503 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë f12 info,Éxô\n", 
__func__
);

2504 
	`add_îr‹_msg
(
îr
);

2510 
	`¥ötf_e
("%†îr‹: F$12 i†nŸ found,Éxô\n", 
__func__
);

2511 #ifde‡
SAVE_ERR_MSG


2512 
	`•rötf
(
îr
, "%†îr‹: F$12 i†nŸ found,Éxô\n", 
__func__
);

2513 
	`add_îr‹_msg
(
îr
);

2519 i‡(
g_rmi_pdt
.
F54
.
ID
 == 0x54) {

2520 
ªt
 = 
	`rmi_∑r£_f54_öf‹m©i⁄
();

2521 i‡(
ªt
) {

2523 i‡(
	`rmi_f54_sˇn_‰eq_gór
() < 0) {

2524 
	`¥ötf_e
("%†îr‹: faûÅÿfödÅhêavaûabÀ gór\n", 
__func__
);

2525 #ifde‡
SAVE_ERR_MSG


2526 
	`•rötf
(
îr
, "%†îr‹: faûÅÿfödÅhêavaûabÀ gór\n", 
__func__
);

2527 
	`add_îr‹_msg
(
îr
);

2532 
	`¥ötf_e
("%†îr‹: faûÅÿgë f54 info,Éxô\n", 
__func__
);

2533 #ifde‡
SAVE_ERR_MSG


2534 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë f54 info,Éxô\n", 
__func__
);

2535 
	`add_îr‹_msg
(
îr
);

2542 
	`¥ötf_e
("%†îr‹: F$54 i†nŸ found,Éxô\n", 
__func__
);

2543 #ifde‡
SAVE_ERR_MSG


2544 
	`•rötf
(
îr
, "%†îr‹: F$54 i†nŸ found,Éxô\n", 
__func__
);

2545 
	`add_îr‹_msg
(
îr
);

2551 i‡(
g_rmi_pdt
.
F55
.
ID
 == 0x55) {

2552 
ªt
 = 
	`rmi_∑r£_f55_öf‹m©i⁄
();

2553 i‡(!
ªt
) {

2554 
	`¥ötf_e
("%†îr‹: faûÅÿgë f55 info,Éxô\n", 
__func__
);

2555 #ifde‡
SAVE_ERR_MSG


2556 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë f55 info,Éxô\n", 
__func__
);

2557 
	`add_îr‹_msg
(
îr
);

2564 i‡(
g_rmi_pdt
.
F1A
.
ID
 == 0x1a){

2565 
g_rmi_pdt
.
has_buâ⁄
 = 
åue
;

2568 
g_rmi_pdt
.
has_buâ⁄
 = 
Ál£
;

2573 
rmi_is_öôülized
 = 
åue
;

2576 
	}
}

2586 
	$rmi_f01_sw_ª£t
()

2588 
ªtvÆ
;

2589 
comm™d
 = 0x01;

2591 
	`¥ötf_i
("%†öfo: dÿª£t", 
__func__
);

2593 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
F01
.
comm™d_ba£_addr
, &
comm™d
, (command));

2594 i‡(
ªtvÆ
 < 0)

2595 
	`¥ötf_e
("%†îr‹: faûÅÿdÿswÑe£t\n", 
__func__
);

2597 
	`u¶ìp
(
RMI_SW_RESET_DELAY_MS
 * 1000);

2598  
ªtvÆ
;

2599 
	}
}

2608 
	$rmi_f01_£t_no_¶ìp
()

2610 
ªtvÆ
;

2611 
devi˚_˘æ
;

2613 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F01
.
c⁄åﬁ_ba£_addr
,

2614 &
devi˚_˘æ
,

2615 (
devi˚_˘æ
));

2616 i‡(
ªtvÆ
 < 0) {

2617 
	`¥ötf_e
("%†îr‹: faûÅÿªad devi˚ cål\n", 
__func__
);

2618  
ªtvÆ
;

2621 
devi˚_˘æ
 |
RMI_NO_SLEEP_ON
;

2623 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
F01
.
c⁄åﬁ_ba£_addr
,

2624 &
devi˚_˘æ
,

2625 (
devi˚_˘æ
));

2626 i‡(
ªtvÆ
 < 0) {

2627 
	`¥ötf_e
("%†îr‹: faûÅÿ£ànÿ¶ìp\n", 
__func__
);

2628  
ªtvÆ
;

2631  
ªtvÆ
;

2632 
	}
}

2643 
	$rmi_f54_f‹˚_upd©e
()

2645 
ªtvÆ
 = 0;

2646 
cmd_d©a
;

2647 
time_cou¡
 = 0;

2648 #ifde‡
SAVE_ERR_MSG


2649 
îr
[
MAX_ERR_STRING_LEN
];

2652 
cmd_d©a
 = 
RMI_COMMAND_FORCE_UPDATE
;

2654 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, &
cmd_d©a
, (cmd_data));

2655 i‡(
ªtvÆ
 < 0) {

2656 
	`¥ötf_e
("%†îr‹: faûÅÿ£àf‹˚ upd©êÊag\n", 
__func__
);

2657 #ifde‡
SAVE_ERR_MSG


2658 
	`•rötf
(
îr
, "%sÉrror: failÅo write force_update command\nreg_addr=0x%x, write_data=0x%x\n",

2659 
__func__
, 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, 
cmd_d©a
);

2660 
	`add_îr‹_msg
(
îr
);

2662 
exô
;

2665 
	`u¶ìp
(100000);

2668 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, &
cmd_d©a
, (cmd_data));

2669 i‡(
ªtvÆ
 < 0) {

2670 
	`¥ötf_e
("%†îr‹: faûÅÿªad comm™dÑegi°î\n", 
__func__
);

2671 #ifde‡
SAVE_ERR_MSG


2672 
	`•rötf
(
îr
, "%sÉrror: failÅoÑead F54_CMD baseÑegister(addr=0x%x) inÖolling\n",

2673 
__func__
, 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
);

2674 
	`add_îr‹_msg
(
îr
);

2676 
exô
;

2679 i‡((
cmd_d©a
 & 0x04) == 0x00)

2682 
	`u¶ìp
(100000);

2683 
time_cou¡
 += 1;

2685 } 
time_cou¡
 < 
RMI_COMMAND_TIMEOUT
);

2687 i‡(
time_cou¡
 =
RMI_COMMAND_TIMEOUT
) {

2688 
	`¥ötf_e
("%sÉrror:Åimeout! failÅo set command (f54_cmd data=0x%x)\n",

2689 
__func__
, 
cmd_d©a
);

2690 #ifde‡
SAVE_ERR_MSG


2691 
	`•rötf
(
îr
, "%sÉrror:Åimeout! failÅo do force_update (f54_cmd=0x%x)\n",

2692 
__func__
, 
cmd_d©a
);

2693 
	`add_îr‹_msg
(
îr
);

2695 
ªtvÆ
 = -
ETIMEDOUT
;

2696 
exô
;

2699 
	`¥ötf_i
("%s: f‹˚ upd©êd⁄e\n", 
__func__
);

2701 
exô
:

2702  
ªtvÆ
;

2703 
	}
}

2710 
	$rmi_f54_no_ªœx
(
boﬁ
 
í
)

2712 
ªtvÆ
 = 0;

2713 
vÆue
 = 0x00;

2714 #ifde‡
SAVE_ERR_MSG


2715 
îr
[
MAX_ERR_STRING_LEN
];

2718 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
c⁄åﬁ_ba£_addr
, &
vÆue
, (value));

2719 i‡(
ªtvÆ
 < 0) {

2720 
	`¥ötf_e
("%†îr‹: faûÅÿªad F54Cå00Ñegi°î\n", 
__func__
);

2721 #ifde‡
SAVE_ERR_MSG


2722 
	`•rötf
(
îr
, "%sÉrror: failÅoÑead F54_ctrl00Ñegister (addr=0x%x)\n",

2723 
__func__
, 
g_rmi_pdt
.
F54
.
c⁄åﬁ_ba£_addr
);

2724 
	`add_îr‹_msg
(
îr
);

2726 
exô
;

2729 i‡(
í
)

2730 
vÆue
 = () (value | 0x01);

2732 
vÆue
 = () (value & 0xfe);

2734 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
F54
.
c⁄åﬁ_ba£_addr
, &
vÆue
, (value));

2735 i‡(
ªtvÆ
 < 0) {

2736 
	`¥ötf_e
("%†îr‹: faûÅÿwrôêd©®tÿF54Cå00Ñegi°î\n", 
__func__
);

2737 #ifde‡
SAVE_ERR_MSG


2738 
	`•rötf
(
îr
, "%sÉrror: failÅo write F54Ctr00Ñegister (addr=0x%x)(data=0x%x)\n",

2739 
__func__
, 
g_rmi_pdt
.
F54
.
c⁄åﬁ_ba£_addr
, 
vÆue
);

2740 
	`add_îr‹_msg
(
îr
);

2742 
exô
;

2745 
ªtvÆ
 = 
	`rmi_f54_f‹˚_upd©e
();

2746 i‡(
ªtvÆ
 < 0) {

2747 
	`¥ötf_e
("%†îr‹: faûÅÿdÿf‹˚_upd©e\n", 
__func__
);

2748 #ifde‡
SAVE_ERR_MSG


2749 
	`•rötf
(
îr
, "%†îr‹: faûÅÿdÿf‹˚_upd©e\n", 
__func__
);

2750 
	`add_îr‹_msg
(
îr
);

2754 
vÆue
 = 0x00;

2755 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
c⁄åﬁ_ba£_addr
, &
vÆue
, (value));

2757 
	`¥ötf_i
("%s:Çÿªœx d⁄e\n", 
__func__
);

2759 
exô
:

2760  
ªtvÆ
;

2761 
	}
}

2771 
	$rmi_f54_f‹˚_ˇl
()

2773 
ªtvÆ
 = 0;

2774 
cmd_d©a
;

2775 
time_cou¡
 = 0;

2776 #ifde‡
SAVE_ERR_MSG


2777 
îr
[
MAX_ERR_STRING_LEN
];

2780 
cmd_d©a
 = 
RMI_COMMAND_FORCE_CAL
;

2782 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, &
cmd_d©a
, (cmd_data));

2783 i‡(
ªtvÆ
 < 0) {

2784 
	`¥ötf_e
("%†îr‹: faûÅÿ£àf‹˚ upd©êÊag\n", 
__func__
);

2785 #ifde‡
SAVE_ERR_MSG


2786 
	`•rötf
(
îr
, "%sÉrror: failÅo write force_cal command\nreg_addr=0x%x, write_data=0x%x\n",

2787 
__func__
, 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, 
cmd_d©a
);

2788 
	`add_îr‹_msg
(
îr
);

2790 
exô
;

2793 
	`u¶ìp
(100000);

2796 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, &
cmd_d©a
, (cmd_data));

2797 i‡(
ªtvÆ
 < 0) {

2798 
	`¥ötf_e
("%†îr‹: faûÅÿªad comm™dÑegi°î\n", 
__func__
);

2799 #ifde‡
SAVE_ERR_MSG


2800 
	`•rötf
(
îr
, "%sÉrror: failÅoÑead F54_CMD baseÑegister(addr=0x%x) inÖolling\n",

2801 
__func__
, 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
);

2802 
	`add_îr‹_msg
(
îr
);

2804 
exô
;

2807 i‡((
cmd_d©a
 & 0x04) == 0x00)

2810 
	`u¶ìp
(100000);

2811 
time_cou¡
 += 1;

2813 } 
time_cou¡
 < 
RMI_COMMAND_TIMEOUT
);

2815 i‡(
time_cou¡
 =
RMI_COMMAND_TIMEOUT
) {

2816 
	`¥ötf_e
("%sÉrror:Åimeout! failÅo set command (f54_cmd data=0x%x)\n",

2817 
__func__
, 
cmd_d©a
);

2818 #ifde‡
SAVE_ERR_MSG


2819 
	`•rötf
(
îr
, "%sÉrror:Åimeout! failÅo do force_cal (f54_cmd=0x%x)\n",

2820 
__func__
, 
cmd_d©a
);

2821 
	`add_îr‹_msg
(
îr
);

2823 
ªtvÆ
 = -
ETIMEDOUT
;

2824 
exô
;

2827 
	`¥ötf_i
("%s: f‹˚ cÆ d⁄e\n", 
__func__
);

2829 
exô
:

2830  
ªtvÆ
;

2831 
	}
}

2842 
	$rmi_f54_sˇn_‰eq_gór
()

2844 
ªtvÆ
 = 0;

2845 
size
 = (
F54FªqCål
);

2846 
‰eqCål
[
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
 * 
size
];

2847 
idx
;

2848 #ifde‡
SAVE_ERR_MSG


2849 
îr
[
MAX_ERR_STRING_LEN
];

2852 i‡(
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
 == 0) {

2853 
	`¥ötf_i
("%†îr‹: invÆidÖ¨amëî\n", 
__func__
);

2854  -
EINVAL
;

2857 
	`¥ötf_i
("%s:ÅŸÆ gór†%d\n", 
__func__
, 
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
);

2858 
g_rmi_avaûabÀ_górs
 = 0;

2860 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ_ªg95_off£t
, 
‰eqCål
, (freqCtrl));

2861 i‡(
ªtvÆ
 < 0) {

2862 
	`¥ötf_e
("%†îr‹: faûÅÿªad F54Cå95Ñegi°î\n", 
__func__
);

2863 #ifde‡
SAVE_ERR_MSG


2864 
	`•rötf
(
îr
, "%sÉrror: failÅoÑead F54_ctrl95Ñegister (addr = 0x%x)\n",

2865 
__func__
, 
g_rmi_pdt
.
f54_c⁄åﬁ_ªg95_off£t
);

2866 
	`add_îr‹_msg
(
îr
);

2868 
	`•rötf
(
îr
, "%sÉrror:Åotal gears defined in F54_Query17 = %d, sizeÅoÑead = %d\n",

2869 
__func__
, 
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
, ()(
‰eqCål
));

2870 
	`add_îr‹_msg
(
îr
);

2872 
exô
;

2875 
idx
 = 0; idx < 
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
; idx++ ) {

2876 i‡–
‰eqCål
[
idx
 * 
size
] & 0x80 ) {

2877 
g_rmi_gór_í
[
idx
] = 0;

2880 
g_rmi_gór_í
[
idx
] = 1;

2881 
g_rmi_avaûabÀ_górs
++;

2884 
	`¥ötf_i
("%s:Çumbî o‡avaûabÀ gó∏%d\n", 
__func__
, 
g_rmi_avaûabÀ_górs
);

2886 
ªtvÆ
 = 
g_rmi_avaûabÀ_górs
;

2888 
exô
:

2889  
ªtvÆ
;

2890 
	}
}

2899 
	$rmi_f54_íabÀ_⁄e_gór
(
gór
)

2901 
ªtvÆ
 = 0;

2902 
size
 = (
F54FªqCål
);

2903 
‰eqCål
[
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
 * 
size
];

2904 #ifde‡
SAVE_ERR_MSG


2905 
îr
[
MAX_ERR_STRING_LEN
];

2908 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ_ªg95_off£t
, 
‰eqCål
, (freqCtrl));

2909 i‡(
ªtvÆ
 < 0) {

2910 
	`¥ötf_e
("%†îr‹: faûÅÿªad F54Cå95Ñegi°î\n", 
__func__
);

2911 #ifde‡
SAVE_ERR_MSG


2912 
	`•rötf
(
îr
, "%sÉrror: failÅoÑead F54_ctrl95Ñegister (addr=0x%x)\n"

2914 
__func__
, 
g_rmi_pdt
.
f54_c⁄åﬁ_ªg95_off£t
,

2915 
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
, ()(
‰eqCål
));

2916 
	`add_îr‹_msg
(
îr
);

2918 
exô
;

2921 
i
 = 0; i < 
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
; i++ ) {

2922 i‡(
i
 =
gór
) {

2923 
‰eqCål
[
i
 * 
size
] = () (freqCtrl[i * size] & 0x7F);

2926 
‰eqCål
[
i
 * 
size
] = () (freqCtrl[i * size] | 0x80);

2929 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ_ªg95_off£t
, 
‰eqCål
, (freqCtrl));

2930 i‡(
ªtvÆ
 < 0) {

2931 
	`¥ötf_e
("%sÉrror: failÅo write dataÅoÅhe f54Ctrl95,ÅryÅoÉnable gear %d \n",

2932 
__func__
, 
gór
);

2933 #ifde‡
SAVE_ERR_MSG


2934 
	`•rötf
(
îr
, "%sÉrror: failÅo write dataÅoÅhe f54Ctrl95 (addr=0x%x)\n",

2935 
__func__
, 
g_rmi_pdt
.
f54_c⁄åﬁ_ªg95_off£t
);

2936 
	`add_îr‹_msg
(
îr
);

2938 
	`•rötf
(
îr
, "%sÉrror: failÅoÉnable gear %d\n",

2939 
__func__
, 
gór
);

2940 
	`add_îr‹_msg
(
îr
);

2942 
	`•rötf
(
îr
, "%sÉrror:Åotal gears defined in F54_Query17 = %d, sizeÅo write = %d\n",

2943 
__func__
, 
g_rmi_pdt
.
numbî_of_£nsög_‰equícõs
, ()(
‰eqCål
));

2944 
	`add_îr‹_msg
(
îr
);

2946 
exô
;

2949 
ªtvÆ
 = 
	`rmi_f54_f‹˚_upd©e
();

2950 i‡(
ªtvÆ
 < 0) {

2951 #ifde‡
SAVE_ERR_MSG


2952 
	`•rötf
(
îr
, "%†îr‹: faûÅÿdÿf‹˚_upd©e\n", 
__func__
);

2953 
	`add_îr‹_msg
(
îr
);

2955 
exô
;

2958 
	`¥ötf_i
("%s: ch™gêtÿ‰equícy gór-%d d⁄e\n", 
__func__
, 
gór
);

2960 
exô
:

2961 #ifde‡
SAVE_ERR_MSG


2962 i‡(
ªtvÆ
 < 0) {

2963 
	`•rötf
(
îr
, "%†îr‹: c™'àch™gêtÿ‰equícy gó∏%d \n", 
__func__
, 
gór
);

2964 
	`add_îr‹_msg
(
îr
);

2968  
ªtvÆ
;

2969 
	}
}

2978 
	$rmi_f54_gë_logiˇl_rx
(
pö
)

2980 
i
 = 0;

2981  
i
 = 0; i < 
g_rmi_pdt
.
rx_assig√d
; i++ )

2983 i‡–
g_rmi_pdt
.
rx_assignmít
[
i
] =
pö
 )

2984  
i
;

2987 
	}
}

2997 
	$rmi_dißbÀ_cbc_cdm
()

2999 
ªtvÆ
 = 0;

3000 
zîo
 = 0x00;

3001 
vÆue
;

3002 #ifde‡
SAVE_ERR_MSG


3003 
îr
[
MAX_ERR_STRING_LEN
];

3006 i‡(
g_rmi_pdt
.
f54_skù_cdc_cdm_c⁄åﬁ
) {

3007 
	`¥ötf_i
("%†öfo: f54_skù_cdc_cdm_c⁄åﬁ i†åue\n", 
__func__
);

3011 i‡(
g_rmi_pdt
.
f54_quîy
.
touch_c⁄åﬁÀr_Ámûy
 == 1) {

3013 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_7
.
addªss
,

3014 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_7
.
d©a
,

3015 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_7
.
d©a
));

3016 i‡(
ªtvÆ
 < 0) {

3017 
	`¥ötf_e
("%†îr‹: faûÅÿªad d©®f54_c⁄åﬁÑeg_7\n", 
__func__
);

3018 #ifde‡
SAVE_ERR_MSG


3019 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad d©®f54_c⁄åﬁÑeg_7\n", 
__func__
);

3020 
	`add_îr‹_msg
(
îr
);

3022 
exô
;

3024 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_7
.
cbc_tx_ˇºõr_£À˘i⁄
 = 0;

3025 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_7
.
addªss
,

3026 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_7
.
d©a
,

3027 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_7
.
d©a
));

3028 i‡(
ªtvÆ
 < 0) {

3029 #ifde‡
SAVE_ERR_MSG


3030 
	`¥ötf_e
("%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_7\n", 
__func__
);

3031 
	`•rötf
(
îr
, "%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_7\n", 
__func__
);

3032 
	`add_îr‹_msg
(
îr
);

3034 
exô
;

3037 i‡(
g_rmi_pdt
.
f54_quîy
.
has_˘æ88
) {

3039 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_88
.
addªss
,

3040 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_88
.
d©a
,

3041 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_88
.
d©a
));

3042 i‡(
ªtvÆ
 < 0) {

3043 
	`¥ötf_e
("%†îr‹: faûÅÿªad d©®f54_c⁄åﬁÑeg_88\n", 
__func__
);

3044 #ifde‡
SAVE_ERR_MSG


3045 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad d©®f54_c⁄åﬁÑeg_88\n", 
__func__
);

3046 
	`add_îr‹_msg
(
îr
);

3048 
exô
;

3050 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_88
.
cbc_tx_ˇºõr_£À˘i⁄
 = 0;

3051 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_88
.
addªss
,

3052 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_88
.
d©a
,

3053 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_88
.
d©a
));

3054 i‡(
ªtvÆ
 < 0) {

3055 
	`¥ötf_e
("%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_88\n", 
__func__
);

3056 #ifde‡
SAVE_ERR_MSG


3057 
	`•rötf
(
îr
, "%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_88\n", 
__func__
);

3058 
	`add_îr‹_msg
(
îr
);

3060 
exô
;

3064 i‡(
g_rmi_pdt
.
f54_quîy
.
has_0d_acquisôi⁄_c⁄åﬁ
) {

3066 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_57
.
addªss
,

3067 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_57
.
d©a
,

3068 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_57
.
d©a
));

3069 i‡(
ªtvÆ
 < 0) {

3070 
	`¥ötf_e
("%†îr‹: faûÅÿªad d©®f54_c⁄åﬁÑeg_57\n", 
__func__
);

3071 #ifde‡
SAVE_ERR_MSG


3072 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad d©®f54_c⁄åﬁÑeg_57\n", 
__func__
);

3073 
	`add_îr‹_msg
(
îr
);

3075 
exô
;

3077 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_57
.
cbc_tx_ˇºõr_£À˘i⁄
 = 0;

3078 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_57
.
addªss
,

3079 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_57
.
d©a
,

3080 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_57
.
d©a
));

3081 i‡(
ªtvÆ
 < 0) {

3082 
	`¥ötf_e
("%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_57\n", 
__func__
);

3083 #ifde‡
SAVE_ERR_MSG


3084 
	`•rötf
(
îr
, "%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_57\n", 
__func__
);

3085 
	`add_îr‹_msg
(
îr
);

3087 
exô
;

3091 i‡((
g_rmi_pdt
.
f54_quîy
.
has_quîy15
) &&

3092 (
g_rmi_pdt
.
f54_quîy_15
.
has_quîy25
) &&

3093 (
g_rmi_pdt
.
f54_quîy_25
.
has_quîy27
) &&

3094 (
g_rmi_pdt
.
f54_quîy_27
.
has_quîy29
) &&

3095 (
g_rmi_pdt
.
f54_quîy_29
.
has_quîy30
) &&

3096 (
g_rmi_pdt
.
f54_quîy_30
.
has_quîy32
) &&

3097 (
g_rmi_pdt
.
f54_quîy_32
.
has_quîy33
) &&

3098 (
g_rmi_pdt
.
f54_quîy_33
.
has_quîy36
) &&

3099 (
g_rmi_pdt
.
f54_quîy_36
.
has_quîy38
) &&

3100 (
g_rmi_pdt
.
f54_quîy_38
.
has_˘æ149
)) {

3101 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_149
.
addªss
,

3102 &
zîo
,

3103 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_149
.
d©a
));

3104 i‡(
ªtvÆ
 < 0) {

3105 
	`¥ötf_e
("%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_149\n", 
__func__
);

3106 #ifde‡
SAVE_ERR_MSG


3107 
	`•rötf
(
îr
, "%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_149\n", 
__func__
);

3108 
	`add_îr‹_msg
(
îr
);

3110 
exô
;

3114 i‡(
g_rmi_pdt
.
f54_quîy
.
has_sig«l_˛¨ôy
) {

3115 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_41
.
addªss
,

3116 &
vÆue
,

3117 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_41
.
d©a
));

3118 i‡(
ªtvÆ
 < 0) {

3119 
	`¥ötf_e
("%†îr‹: faûÅÿªad d©®f54_c⁄åﬁÑeg_41\n", 
__func__
);

3120 #ifde‡
SAVE_ERR_MSG


3121 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad d©®f54_c⁄åﬁÑeg_41\n", 
__func__
);

3122 
	`add_îr‹_msg
(
îr
);

3124 
exô
;

3126 
vÆue
 |= 0x01;

3127 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_41
.
addªss
,

3128 &
vÆue
,

3129 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_41
.
d©a
));

3130 i‡(
ªtvÆ
 < 0) {

3131 
	`¥ötf_e
("%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_149\n", 
__func__
);

3132 #ifde‡
SAVE_ERR_MSG


3133 
	`•rötf
(
îr
, "%†îr‹: faûÅÿwrôêd©®f54_c⁄åﬁÑeg_149\n", 
__func__
);

3134 
	`add_îr‹_msg
(
îr
);

3136 
exô
;

3140 
ªtvÆ
 = 
	`rmi_f54_f‹˚_upd©e
();

3141 i‡(
ªtvÆ
 < 0) {

3142 
	`¥ötf_e
("%†îr‹: faûÅÿdÿf‹˚ upd©e\n", 
__func__
);

3143 #ifde‡
SAVE_ERR_MSG


3144 
	`•rötf
(
îr
, "%†îr‹: faûÅÿdÿf‹˚ upd©e\n", 
__func__
);

3145 
	`add_îr‹_msg
(
îr
);

3147 
exô
;

3150 
ªtvÆ
 = 
	`rmi_f54_f‹˚_ˇl
();;

3151 i‡(
ªtvÆ
 < 0) {

3152 
	`¥ötf_e
("%†îr‹: faûÅÿdÿf‹˚ cÆ\n", 
__func__
);

3153 #ifde‡
SAVE_ERR_MSG


3154 
	`•rötf
(
îr
, "%†îr‹: faûÅÿdÿf‹˚ cÆ\n", 
__func__
);

3155 
	`add_îr‹_msg
(
îr
);

3157 
exô
;

3159 
exô
:

3160  
ªtvÆ
;

3161 
	}
}

	@cpp/jni/rmi_control.h

28 #i‚de‡
_RMI_CONTROL_H__


29 
	#_RMI_CONTROL_H__


	)

31 
	#TRX_MAPPING_MAX
 64

	)

32 
	#MUX_MAX
 32

	)

34 
	#MAX_INTR_REGISTERS
 4

	)

36 
	#RMI_GET_REPORT_TIMEOUT
 500

	)

37 
	#RMI_COMMAND_TIMEOUT
 30

	)

39 
	#RMI_REPROT_DATA_OFFSET
 3

	)

41 
	#MAX_SENSOR_MAP_SIZE
 128

	)

42 
	#SENSOR_RX_MAPPING_OFFSET
 1

	)

43 
	#SENSOR_TX_MAPPING_OFFSET
 2

	)

45 
	#RMI_COMMAND_GET_REPORT
 1

	)

46 
	#RMI_COMMAND_FORCE_CAL
 2

	)

47 
	#RMI_COMMAND_FORCE_UPDATE
 4

	)

49 
	#MAX_RMI_FREUENCY_GEAR
 20

	)

51 
	#TRX_OPEN_SHORT_DATA_SIZE
 (8)

	)

52 
	#TRX_OPEN_SHORT_MAX_PINS
 (
TRX_OPEN_SHORT_DATA_SIZE
 * 8)

	)

54 
	#RMI_NORMAL_OPERATION
 (0 << 0)

	)

55 
	#RMI_SENSOR_SLEEP
 (1 << 0)

	)

56 
	#RMI_NO_SLEEP_OFF
 (0 << 2)

	)

57 
	#RMI_NO_SLEEP_ON
 (1 << 2)

	)

58 
	#RMI_CONFIGURED
 (1 << 7)

	)

60 
	ef34_vîsi⁄
 {

61 
	mF34_V0
 = 0,

62 
	mF34_V1
,

63 
	mF34_V2
,

66 
	ebl_vîsi⁄
 {

67 
	mBL_V5
 = 5,

68 
	mBL_V6
 = 6,

69 
	mBL_V7
 = 7,

70 
	mBL_V8
 = 8,

73 
	#V5V6_BOOTLOADER_ID_OFFSET
 0

	)

74 
	#V5V6_CONFIG_ID_SIZE
 4

	)

75 
	#V7_CONFIG_ID_SIZE
 32

	)

77 
	#F12_FINGERS_TO_SUPPORT
 10

	)

78 
	#F12_NO_OBJECT_STATUS
 0x00

	)

79 
	#F12_FINGER_STATUS
 0x01

	)

81 
	#F54_CONTROL_0_SIZE
 1

	)

82 
	#F54_CONTROL_1_SIZE
 1

	)

83 
	#F54_CONTROL_2_SIZE
 2

	)

84 
	#F54_CONTROL_3_SIZE
 1

	)

85 
	#F54_CONTROL_4_6_SIZE
 3

	)

86 
	#F54_CONTROL_7_SIZE
 1

	)

87 
	#F54_CONTROL_8_9_SIZE
 3

	)

88 
	#F54_CONTROL_10_SIZE
 1

	)

89 
	#F54_CONTROL_11_SIZE
 2

	)

90 
	#F54_CONTROL_12_13_SIZE
 2

	)

91 
	#F54_CONTROL_14_SIZE
 1

	)

92 
	#F54_CONTROL_15_SIZE
 1

	)

93 
	#F54_CONTROL_16_SIZE
 1

	)

94 
	#F54_CONTROL_17_SIZE
 1

	)

95 
	#F54_CONTROL_18_SIZE
 1

	)

96 
	#F54_CONTROL_19_SIZE
 1

	)

97 
	#F54_CONTROL_20_SIZE
 1

	)

98 
	#F54_CONTROL_21_SIZE
 2

	)

99 
	#F54_CONTROL_22_26_SIZE
 7

	)

100 
	#F54_CONTROL_27_SIZE
 1

	)

101 
	#F54_CONTROL_28_SIZE
 2

	)

102 
	#F54_CONTROL_29_SIZE
 1

	)

103 
	#F54_CONTROL_30_SIZE
 1

	)

104 
	#F54_CONTROL_31_SIZE
 1

	)

105 
	#F54_CONTROL_32_35_SIZE
 8

	)

106 
	#F54_CONTROL_36_SIZE
 1

	)

107 
	#F54_CONTROL_37_SIZE
 1

	)

108 
	#F54_CONTROL_38_SIZE
 1

	)

109 
	#F54_CONTROL_39_SIZE
 1

	)

110 
	#F54_CONTROL_40_SIZE
 1

	)

111 
	#F54_CONTROL_41_SIZE
 1

	)

112 
	#F54_CONTROL_42_SIZE
 2

	)

113 
	#F54_CONTROL_43_54_SIZE
 13

	)

114 
	#F54_CONTROL_55_56_SIZE
 2

	)

115 
	#F54_CONTROL_57_SIZE
 1

	)

116 
	#F54_CONTROL_58_SIZE
 1

	)

117 
	#F54_CONTROL_59_SIZE
 2

	)

118 
	#F54_CONTROL_60_62_SIZE
 3

	)

119 
	#F54_CONTROL_63_SIZE
 1

	)

120 
	#F54_CONTROL_64_67_SIZE
 4

	)

121 
	#F54_CONTROL_68_73_SIZE
 8

	)

122 
	#F54_CONTROL_74_SIZE
 2

	)

123 
	#F54_CONTROL_75_SIZE
 1

	)

124 
	#F54_CONTROL_76_SIZE
 1

	)

125 
	#F54_CONTROL_77_78_SIZE
 2

	)

126 
	#F54_CONTROL_79_83_SIZE
 5

	)

127 
	#F54_CONTROL_84_85_SIZE
 2

	)

128 
	#F54_CONTROL_86_SIZE
 1

	)

129 
	#F54_CONTROL_87_SIZE
 1

	)

130 
	#F54_CONTROL_88_SIZE
 1

	)

131 
	#F54_CONTROL_89_SIZE
 1

	)

132 
	#F54_CONTROL_90_SIZE
 1

	)

133 
	#F54_CONTROL_91_SIZE
 1

	)

134 
	#F54_CONTROL_92_SIZE
 1

	)

135 
	#F54_CONTROL_93_SIZE
 1

	)

136 
	#F54_CONTROL_94_SIZE
 1

	)

137 
	#F54_CONTROL_95_SIZE
 1

	)

138 
	#F54_CONTROL_96_SIZE
 1

	)

139 
	#F54_CONTROL_97_SIZE
 1

	)

140 
	#F54_CONTROL_98_SIZE
 1

	)

141 
	#F54_CONTROL_99_SIZE
 1

	)

142 
	#F54_CONTROL_100_SIZE
 1

	)

143 
	#F54_CONTROL_101_SIZE
 1

	)

144 
	#F54_CONTROL_102_SIZE
 1

	)

145 
	#F54_CONTROL_103_SIZE
 1

	)

146 
	#F54_CONTROL_104_SIZE
 1

	)

147 
	#F54_CONTROL_105_SIZE
 1

	)

148 
	#F54_CONTROL_106_SIZE
 1

	)

149 
	#F54_CONTROL_107_SIZE
 1

	)

150 
	#F54_CONTROL_108_SIZE
 1

	)

151 
	#F54_CONTROL_109_SIZE
 1

	)

152 
	#F54_CONTROL_110_SIZE
 1

	)

153 
	#F54_CONTROL_111_SIZE
 1

	)

154 
	#F54_CONTROL_112_SIZE
 1

	)

155 
	#F54_CONTROL_113_SIZE
 1

	)

156 
	#F54_CONTROL_114_SIZE
 1

	)

157 
	#F54_CONTROL_115_SIZE
 1

	)

158 
	#F54_CONTROL_116_SIZE
 1

	)

159 
	#F54_CONTROL_117_SIZE
 1

	)

160 
	#F54_CONTROL_118_SIZE
 1

	)

161 
	#F54_CONTROL_119_SIZE
 1

	)

162 
	#F54_CONTROL_120_SIZE
 1

	)

163 
	#F54_CONTROL_121_SIZE
 1

	)

164 
	#F54_CONTROL_122_SIZE
 1

	)

165 
	#F54_CONTROL_123_SIZE
 1

	)

166 
	#F54_CONTROL_124_SIZE
 1

	)

167 
	#F54_CONTROL_125_SIZE
 1

	)

168 
	#F54_CONTROL_126_SIZE
 1

	)

169 
	#F54_CONTROL_127_SIZE
 1

	)

170 
	#F54_CONTROL_128_SIZE
 1

	)

171 
	#F54_CONTROL_129_SIZE
 1

	)

172 
	#F54_CONTROL_130_SIZE
 1

	)

173 
	#F54_CONTROL_131_SIZE
 1

	)

174 
	#F54_CONTROL_132_SIZE
 1

	)

175 
	#F54_CONTROL_133_SIZE
 1

	)

176 
	#F54_CONTROL_134_SIZE
 1

	)

177 
	#F54_CONTROL_135_SIZE
 1

	)

178 
	#F54_CONTROL_136_SIZE
 1

	)

179 
	#F54_CONTROL_137_SIZE
 1

	)

180 
	#F54_CONTROL_138_SIZE
 1

	)

181 
	#F54_CONTROL_139_SIZE
 1

	)

182 
	#F54_CONTROL_140_SIZE
 1

	)

183 
	#F54_CONTROL_141_SIZE
 1

	)

184 
	#F54_CONTROL_142_SIZE
 1

	)

185 
	#F54_CONTROL_143_SIZE
 1

	)

186 
	#F54_CONTROL_144_SIZE
 1

	)

187 
	#F54_CONTROL_145_SIZE
 1

	)

188 
	#F54_CONTROL_146_SIZE
 1

	)

189 
	#F54_CONTROL_147_SIZE
 1

	)

190 
	#F54_CONTROL_148_SIZE
 1

	)

191 
	#F54_CONTROL_149_SIZE
 1

	)

192 
	#F54_CONTROL_150_SIZE
 1

	)

193 
	#F54_CONTROL_151_SIZE
 1

	)

194 
	#F54_CONTROL_152_SIZE
 1

	)

195 
	#F54_CONTROL_153_SIZE
 1

	)

196 
	#F54_CONTROL_154_SIZE
 1

	)

197 
	#F54_CONTROL_155_SIZE
 1

	)

198 
	#F54_CONTROL_156_SIZE
 1

	)

199 
	#F54_CONTROL_157_158_SIZE
 2

	)

200 
	#F54_CONTROL_163_SIZE
 1

	)

201 
	#F54_CONTROL_165_SIZE
 1

	)

202 
	#F54_CONTROL_166_SIZE
 1

	)

203 
	#F54_CONTROL_167_SIZE
 1

	)

204 
	#F54_CONTROL_168_SIZE
 1

	)

205 
	#F54_CONTROL_169_SIZE
 1

	)

206 
	#F54_CONTROL_171_SIZE
 1

	)

207 
	#F54_CONTROL_172_SIZE
 1

	)

208 
	#F54_CONTROL_173_SIZE
 1

	)

209 
	#F54_CONTROL_174_SIZE
 1

	)

210 
	#F54_CONTROL_175_SIZE
 1

	)

211 
	#F54_CONTROL_176_SIZE
 1

	)

212 
	#F54_CONTROL_177_178_SIZE
 2

	)

213 
	#F54_CONTROL_179_SIZE
 1

	)

214 
	#F54_CONTROL_182_SIZE
 1

	)

215 
	#F54_CONTROL_183_SIZE
 1

	)

216 
	#F54_CONTROL_185_SIZE
 1

	)

217 
	#F54_CONTROL_186_SIZE
 1

	)

218 
	#F54_CONTROL_187_SIZE
 1

	)

219 
	#F54_CONTROL_188_SIZE
 1

	)

220 
	#F54_CONTROL_196_SIZE
 1

	)

221 
	#F54_CONTROL_218_SIZE
 1

	)

222 
	#F54_CONTROL_223_SIZE
 1

	)

225 
	sf12_quîy_5
 {

228 
	msize_of_quîy6
;

230 
	m˘æ0_is_¥e£¡
:1;

231 
	m˘æ1_is_¥e£¡
:1;

232 
	m˘æ2_is_¥e£¡
:1;

233 
	m˘æ3_is_¥e£¡
:1;

234 
	m˘æ4_is_¥e£¡
:1;

235 
	m˘æ5_is_¥e£¡
:1;

236 
	m˘æ6_is_¥e£¡
:1;

237 
	m˘æ7_is_¥e£¡
:1;

238 } 
__©åibuã__
((
∑cked
));;

240 
	m˘æ8_is_¥e£¡
:1;

241 
	m˘æ9_is_¥e£¡
:1;

242 
	m˘æ10_is_¥e£¡
:1;

243 
	m˘æ11_is_¥e£¡
:1;

244 
	m˘æ12_is_¥e£¡
:1;

245 
	m˘æ13_is_¥e£¡
:1;

246 
	m˘æ14_is_¥e£¡
:1;

247 
	m˘æ15_is_¥e£¡
:1;

248 } 
__©åibuã__
((
∑cked
));;

250 
	m˘æ16_is_¥e£¡
:1;

251 
	m˘æ17_is_¥e£¡
:1;

252 
	m˘æ18_is_¥e£¡
:1;

253 
	m˘æ19_is_¥e£¡
:1;

254 
	m˘æ20_is_¥e£¡
:1;

255 
	m˘æ21_is_¥e£¡
:1;

256 
	m˘æ22_is_¥e£¡
:1;

257 
	m˘æ23_is_¥e£¡
:1;

258 } 
__©åibuã__
((
∑cked
));;

260 
	m˘æ24_is_¥e£¡
:1;

261 
	m˘æ25_is_¥e£¡
:1;

262 
	m˘æ26_is_¥e£¡
:1;

263 
	m˘æ27_is_¥e£¡
:1;

264 
	m˘æ28_is_¥e£¡
:1;

265 
	m˘æ29_is_¥e£¡
:1;

266 
	m˘æ30_is_¥e£¡
:1;

267 
	m˘æ31_is_¥e£¡
:1;

268 } 
__©åibuã__
((
∑cked
));;

270 
	m˘æ32_is_¥e£¡
:1;

271 
	m˘æ33_is_¥e£¡
:1;

272 
	m˘æ34_is_¥e£¡
:1;

273 
	m˘æ35_is_¥e£¡
:1;

274 
	m˘æ36_is_¥e£¡
:1;

275 
	m˘æ37_is_¥e£¡
:1;

276 
	m˘æ38_is_¥e£¡
:1;

277 
	m˘æ39_is_¥e£¡
:1;

278 } 
__©åibuã__
((
∑cked
));;

280 
	m˘æ40_is_¥e£¡
:1;

281 
	m˘æ41_is_¥e£¡
:1;

282 
	m˘æ42_is_¥e£¡
:1;

283 
	m˘æ43_is_¥e£¡
:1;

284 
	m˘æ44_is_¥e£¡
:1;

285 
	m˘æ45_is_¥e£¡
:1;

286 
	m˘æ46_is_¥e£¡
:1;

287 
	m˘æ47_is_¥e£¡
:1;

288 } 
__©åibuã__
((
∑cked
));;

290 
	m˘æ48_is_¥e£¡
:1;

291 
	m˘æ49_is_¥e£¡
:1;

292 
	m˘æ50_is_¥e£¡
:1;

293 
	m˘æ51_is_¥e£¡
:1;

294 
	m˘æ52_is_¥e£¡
:1;

295 
	m˘æ53_is_¥e£¡
:1;

296 
	m˘æ54_is_¥e£¡
:1;

297 
	m˘æ55_is_¥e£¡
:1;

298 } 
__©åibuã__
((
∑cked
));;

300 
	m˘æ56_is_¥e£¡
:1;

301 
	m˘æ57_is_¥e£¡
:1;

302 
	m˘æ58_is_¥e£¡
:1;

303 
	m˘æ59_is_¥e£¡
:1;

304 
	m˘æ60_is_¥e£¡
:1;

305 
	m˘æ61_is_¥e£¡
:1;

306 
	m˘æ62_is_¥e£¡
:1;

307 
	m˘æ63_is_¥e£¡
:1;

308 } 
__©åibuã__
((
∑cked
));;

310 
	md©a
[9];

314 
	sf12_quîy_8
 {

317 
	msize_of_quîy9
;

319 
	md©a0_is_¥e£¡
:1;

320 
	md©a1_is_¥e£¡
:1;

321 
	md©a2_is_¥e£¡
:1;

322 
	md©a3_is_¥e£¡
:1;

323 
	md©a4_is_¥e£¡
:1;

324 
	md©a5_is_¥e£¡
:1;

325 
	md©a6_is_¥e£¡
:1;

326 
	md©a7_is_¥e£¡
:1;

327 } 
__©åibuã__
((
∑cked
));;

329 
	md©a8_is_¥e£¡
:1;

330 
	md©a9_is_¥e£¡
:1;

331 
	md©a10_is_¥e£¡
:1;

332 
	md©a11_is_¥e£¡
:1;

333 
	md©a12_is_¥e£¡
:1;

334 
	md©a13_is_¥e£¡
:1;

335 
	md©a14_is_¥e£¡
:1;

336 
	md©a15_is_¥e£¡
:1;

337 } 
__©åibuã__
((
∑cked
));;

339 
	md©a16_is_¥e£¡
:1;

340 
	md©a17_is_¥e£¡
:1;

341 
	md©a18_is_¥e£¡
:1;

342 
	md©a19_is_¥e£¡
:1;

343 
	md©a20_is_¥e£¡
:1;

344 
	md©a21_is_¥e£¡
:1;

345 
	md©a22_is_¥e£¡
:1;

346 
	md©a23_is_¥e£¡
:1;

347 } 
__©åibuã__
((
∑cked
));;

349 
	md©a24_is_¥e£¡
:1;

350 
	md©a25_is_¥e£¡
:1;

351 
	md©a26_is_¥e£¡
:1;

352 
	md©a27_is_¥e£¡
:1;

353 
	md©a28_is_¥e£¡
:1;

354 
	md©a29_is_¥e£¡
:1;

355 
	md©a30_is_¥e£¡
:1;

356 
	md©a31_is_¥e£¡
:1;

357 } 
__©åibuã__
((
∑cked
));;

359 
	md©a
[5];

363 
	sf12_˘æ_8
 {

366 
	mmax_x_co‹d_lsb
;

367 
	mmax_x_co‹d_msb
;

368 
	mmax_y_co‹d_lsb
;

369 
	mmax_y_co‹d_msb
;

370 
	mrx_pôch_lsb
;

371 
	mrx_pôch_msb
;

372 
	mtx_pôch_lsb
;

373 
	mtx_pôch_msb
;

374 
	mlow_rx_˛ù
;

375 
	mhigh_rx_˛ù
;

376 
	mlow_tx_˛ù
;

377 
	mhigh_tx_˛ù
;

378 
	mnum_of_rx
;

379 
	mnum_of_tx
;

380 }
__©åibuã__
((
∑cked
));;

381 
	md©a
[14];

386 
	sf12_˘æ_23
 {

389 
	mfögî_íabÀ
:1;

390 
	ma˘ive_°ylus_íabÀ
:1;

391 
	m∑lm_íabÀ
:1;

392 
	mun˛assifõd_obje˘_íabÀ
:1;

393 
	mhovîög_fögî_íabÀ
:1;

394 
	mgloved_fögî_íabÀ
:1;

395 
	mf12_˘r23_00_b6__7
:2;

396 
	mmax_ªp‹ãd_obje˘s
;

397 
	mf12_˘r23_02_b0
:1;

398 
	mªp‹t_a˘ive_°ylus_as_fögî
:1;

399 
	mªp‹t_∑lm_as_fögî
:1;

400 
	mªp‹t_un˛assifõd_obje˘_as_fögî
:1;

401 
	mªp‹t_hovîög_fögî_as_fögî
:1;

402 
	mªp‹t_gloved_fögî_as_fögî
:1;

403 
	mªp‹t_«ºow_obje˘_swùe_as_fögî
:1;

404 
	mªp‹t_h™dedge_as_fögî
:1;

405 
	mcovî_íabÀ
:1;

406 
	m°ylus_íabÀ
:1;

407 
	mîa£r_íabÀ
:1;

408 
	msmÆl_obje˘_íabÀ
:1;

409 
	mf12_˘r23_03_b4__7
:4;

410 
	mªp‹t_covî_as_fögî
:1;

411 
	mªp‹t_°ylus_as_fögî
:1;

412 
	mªp‹t_îa£r_as_fögî
:1;

413 
	mªp‹t_smÆl_obje˘_as_fögî
:1;

414 
	mf12_˘r23_04_b4__7
:4;

415 }
__©åibuã__
((
∑cked
));;

416 
	md©a
[5];

420 
	sf12_˘æ_31
 {

423 
	mmax_x_co‹d_lsb
;

424 
	mmax_x_co‹d_msb
;

425 
	mmax_y_co‹d_lsb
;

426 
	mmax_y_co‹d_msb
;

427 
	mrx_pôch_lsb
;

428 
	mrx_pôch_msb
;

429 
	mrx_˛ù_low
;

430 
	mrx_˛ù_high
;

431 
	mwedge_˛ù_low
;

432 
	mwedge_˛ù_high
;

433 
	mnum_of_p
;

434 
	mnum_of_q
;

435 }
__©åibuã__
((
∑cked
));;

436 
	md©a
[12];

455 
	sf12_exåa_d©a
 {

456 
	md©a1_off£t
;

457 
	md©a4_off£t
;

458 
	md©a15_off£t
;

459 
	md©a15_size
;

460 
	md©a15_d©a
[(
F12_FINGERS_TO_SUPPORT
 + 7) / 8];

461 
	md©a29_off£t
;

462 
	md©a29_size
;

463 
	md©a29_d©a
[
F12_FINGERS_TO_SUPPORT
 * 2];

464 
	m˘æ20_off£t
;

468 
	sf12_fögî_d©a
 {

469 
	mobje˘_ty≥_™d_°©us
;

470 
	mx_lsb
;

471 
	mx_msb
;

472 
	my_lsb
;

473 
	my_msb
;

474 
	mz
;

475 
	mwx
;

476 
	mwy
;

480 
	sF54FªqCål
 {

481 
	mC⁄åﬁ
;

482 
	mFú°Bur°_lsb
;

483 
	mFú°Bur°_msb
;

484 
	mAddBur°_lsb
;

485 
	mAddBur°_msb
;

486 
	mISåëch
;

487 
	mRSåëch
;

488 
	mNoi£Cål_1
;

489 
	mNoi£Cål_2
;

490 
	mNoi£Cål_3
;

491 
	mNoi£Cål_4
;

494 
	sFun˘i⁄Des¸ùt‹
 {

496 
	mquîy_ba£_addr
;

497 
	mcomm™d_ba£_addr
;

498 
	mc⁄åﬁ_ba£_addr
;

499 
	md©a_ba£_addr
;

500 
	mVîsi⁄
;

501 
	mI¡îru±Sour˚Cou¡
;

502 
	mID
;

505 
	sf54_quîy
 {

509 
	mnum_of_rx_ñe˘rodes
;

512 
	mnum_of_tx_ñe˘rodes
;

515 
	mf54_quîy2_b0__1
:2;

516 
	mhas_ba£löe
:1;

517 
	mhas_image8
:1;

518 
	mf54_quîy2_b4__5
:2;

519 
	mhas_image16
:1;

520 
	mf54_quîy2_b7
:1;

523 
	m˛ock_øã
;

526 
	mtouch_c⁄åﬁÀr_Ámûy
;

529 
	mhas_pixñ_touch_thªshﬁd_adju°mít
:1;

530 
	mf54_quîy5_b1__7
:7;

533 
	mhas_£ns‹_assignmít
:1;

534 
	mhas_öãr„ªn˚_mëric
:1;

535 
	mhas_£n£_‰equícy_c⁄åﬁ
:1;

536 
	mhas_fúmw¨e_noi£_môig©i⁄
:1;

537 
	mhas_˘æ11
:1;

538 
	mhas_two_byã_ªp‹t_øã
:1;

539 
	mhas_⁄e_byã_ªp‹t_øã
:1;

540 
	mhas_ªœx©i⁄_c⁄åﬁ
:1;

543 
	mcurve_com≥nßti⁄_mode
:2;

544 
	mf54_quîy7_b2__7
:6;

547 
	mf54_quîy8_b0
:1;

548 
	mhas_iú_fûãr
:1;

549 
	mhas_cmn_ªmovÆ
:1;

550 
	mhas_cmn_maximum
:1;

551 
	mhas_touch_hy°îesis
:1;

552 
	mhas_edge_com≥nßti⁄
:1;

553 
	mhas_≥r_‰equícy_noi£_c⁄åﬁ
:1;

554 
	mhas_íh™˚d_°ªtch
:1;

557 
	mhas_f‹˚_Á°_ªœx©i⁄
:1;

558 
	mhas_mu…i_mëric_°©e_machöe
:1;

559 
	mhas_sig«l_˛¨ôy
:1;

560 
	mhas_v¨ün˚_mëric
:1;

561 
	mhas_0d_ªœx©i⁄_c⁄åﬁ
:1;

562 
	mhas_0d_acquisôi⁄_c⁄åﬁ
:1;

563 
	mhas_°©us
:1;

564 
	mhas_¶ew_mëric
:1;

567 
	mhas_h_bœnk
:1;

568 
	mhas_v_bœnk
:1;

569 
	mhas_l⁄g_h_bœnk
:1;

570 
	mhas_°¨tup_Á°_ªœx©i⁄
:1;

571 
	mhas_esd_c⁄åﬁ
:1;

572 
	mhas_noi£_môig©i⁄2
:1;

573 
	mhas_noi£_°©e
:1;

574 
	mhas_íîgy_øtio_ªœx©i⁄
:1;

577 
	mhas_ex˚ssive_noi£_ªp‹tög
:1;

578 
	mhas_¶ew_›ti⁄
:1;

579 
	mhas_two_ovîhód_bur°s
:1;

580 
	mhas_quîy13
:1;

581 
	mhas_⁄e_ovîhód_bur°
:1;

582 
	mf54_quîy11_b5
:1;

583 
	mhas_˘æ88
:1;

584 
	mhas_quîy15
:1;

587 
	mnumbî_of_£nsög_‰equícõs
:4;

588 
	mf54_quîy12_b4__7
:4;

589 } 
__©åibuã__
((
∑cked
));;

590 
	md©a
[14];

594 
	sf54_quîy_13
 {

597 
	mhas_˘æ86
:1;

598 
	mhas_˘æ87
:1;

599 
	mhas_˘æ87_sub0
:1;

600 
	mhas_˘æ87_sub1
:1;

601 
	mhas_˘æ87_sub2
:1;

602 
	mhas_cidim
:1;

603 
	mhas_noi£_môig©i⁄_íh™˚mít
:1;

604 
	mhas_øû_im
:1;

605 } 
__©åibuã__
((
∑cked
));;

606 
	md©a
[1];

610 
	sf54_quîy_15
 {

613 
	mhas_˘æ90
:1;

614 
	mhas_å™smô_°ªngth
:1;

615 
	mhas_˘æ87_sub3
:1;

616 
	mhas_quîy16
:1;

617 
	mhas_quîy20
:1;

618 
	mhas_quîy21
:1;

619 
	mhas_quîy22
:1;

620 
	mhas_quîy25
:1;

621 } 
__©åibuã__
((
∑cked
));;

622 
	md©a
[1];

626 
	sf54_quîy_16
 {

629 
	mhas_quîy17
:1;

630 
	mhas_d©a17
:1;

631 
	mhas_˘æ92
:1;

632 
	mhas_˘æ93
:1;

633 
	mhas_˘æ94_quîy18
:1;

634 
	mhas_˘æ95_quîy19
:1;

635 
	mhas_˘æ99
:1;

636 
	mhas_˘æ100
:1;

637 } 
__©åibuã__
((
∑cked
));;

638 
	md©a
[1];

642 
	sf54_quîy_21
 {

645 
	mhas_abs_rx
:1;

646 
	mhas_abs_tx
:1;

647 
	mhas_˘æ91
:1;

648 
	mhas_˘æ96
:1;

649 
	mhas_˘æ97
:1;

650 
	mhas_˘æ98
:1;

651 
	mhas_d©a19
:1;

652 
	mhas_quîy24_d©a18
:1;

653 } 
__©åibuã__
((
∑cked
));;

654 
	md©a
[1];

658 
	sf54_quîy_22
 {

661 
	mhas_∑cked_image
:1;

662 
	mhas_˘æ101
:1;

663 
	mhas_dy«mic_£n£_di•œy_øtio
:1;

664 
	mhas_quîy23
:1;

665 
	mhas_˘æ103_quîy26
:1;

666 
	mhas_˘æ104
:1;

667 
	mhas_˘æ105
:1;

668 
	mhas_quîy28
:1;

669 } 
__©åibuã__
((
∑cked
));;

670 
	md©a
[1];

674 
	sf54_quîy_23
 {

677 
	mhas_˘æ102
:1;

678 
	mhas_˘æ102_sub1
:1;

679 
	mhas_˘æ102_sub2
:1;

680 
	mhas_˘æ102_sub4
:1;

681 
	mhas_˘æ102_sub5
:1;

682 
	mhas_˘æ102_sub9
:1;

683 
	mhas_˘æ102_sub10
:1;

684 
	mhas_˘æ102_sub11
:1;

685 } 
__©åibuã__
((
∑cked
));;

686 
	md©a
[1];

690 
	sf54_quîy_25
 {

693 
	mhas_˘æ106
:1;

694 
	mhas_˘æ102_sub12
:1;

695 
	mhas_˘æ107
:1;

696 
	mhas_˘æ108
:1;

697 
	mhas_˘æ109
:1;

698 
	mhas_d©a20
:1;

699 
	mf54_quîy25_b6
:1;

700 
	mhas_quîy27
:1;

701 } 
__©åibuã__
((
∑cked
));;

702 
	md©a
[1];

706 
	sf54_quîy_27
 {

709 
	mhas_˘æ110
:1;

710 
	mhas_d©a21
:1;

711 
	mhas_˘æ111
:1;

712 
	mhas_˘æ112
:1;

713 
	mhas_˘æ113
:1;

714 
	mhas_d©a22
:1;

715 
	mhas_˘æ114
:1;

716 
	mhas_quîy29
:1;

717 } 
__©åibuã__
((
∑cked
));;

718 
	md©a
[1];

722 
	sf54_quîy_29
 {

725 
	mhas_˘æ115
:1;

726 
	mhas_ground_rög_›ti⁄s
:1;

727 
	mhas_lo°_bur°s_tunög
:1;

728 
	mhas_aux_exvcom2_£À˘
:1;

729 
	mhas_˘æ116
:1;

730 
	mhas_d©a23
:1;

731 
	mhas_˘æ117
:1;

732 
	mhas_quîy30
:1;

733 } 
__©åibuã__
((
∑cked
));;

734 
	md©a
[1];

738 
	sf54_quîy_30
 {

741 
	mhas_˘æ118
:1;

742 
	mhas_˘æ119
:1;

743 
	mhas_˘æ120
:1;

744 
	mhas_˘æ121
:1;

745 
	mhas_˘æ122_quîy31
:1;

746 
	mhas_˘æ123
:1;

747 
	mhas_˘æ124
:1;

748 
	mhas_quîy32
:1;

749 } 
__©åibuã__
((
∑cked
));;

750 
	md©a
[1];

754 
	sf54_quîy_32
 {

757 
	mhas_˘æ125
:1;

758 
	mhas_˘æ126
:1;

759 
	mhas_˘æ127
:1;

760 
	mhas_abs_ch¨ge_pump_dißbÀ
:1;

761 
	mhas_quîy33
:1;

762 
	mhas_d©a24
:1;

763 
	mhas_quîy34
:1;

764 
	mhas_quîy35
:1;

765 } 
__©åibuã__
((
∑cked
));;

766 
	md©a
[1];

770 
	sf54_quîy_33
 {

773 
	mhas_˘æ128
:1;

774 
	mhas_˘æ129
:1;

775 
	mhas_˘æ130
:1;

776 
	mhas_˘æ131
:1;

777 
	mhas_˘æ132
:1;

778 
	mhas_˘æ133
:1;

779 
	mhas_˘æ134
:1;

780 
	mhas_quîy36
:1;

781 } 
__©åibuã__
((
∑cked
));;

782 
	md©a
[1];

786 
	sf54_quîy_35
 {

789 
	mhas_d©a25
:1;

790 
	mhas_˘æ135
:1;

791 
	mhas_˘æ136
:1;

792 
	mhas_˘æ137
:1;

793 
	mhas_˘æ138
:1;

794 
	mhas_˘æ139
:1;

795 
	mhas_d©a26
:1;

796 
	mhas_˘æ140
:1;

797 } 
__©åibuã__
((
∑cked
));;

798 
	md©a
[1];

802 
	sf54_quîy_36
 {

805 
	mhas_˘æ141
:1;

806 
	mhas_˘æ142
:1;

807 
	mhas_quîy37
:1;

808 
	mhas_˘æ143
:1;

809 
	mhas_˘æ144
:1;

810 
	mhas_˘æ145
:1;

811 
	mhas_˘æ146
:1;

812 
	mhas_quîy38
:1;

813 } 
__©åibuã__
((
∑cked
));;

814 
	md©a
[1];

818 
	sf54_quîy_38
 {

821 
	mhas_˘æ147
:1;

822 
	mhas_˘æ148
:1;

823 
	mhas_˘æ149
:1;

824 
	mhas_˘æ150
:1;

825 
	mhas_˘æ151
:1;

826 
	mhas_˘æ152
:1;

827 
	mhas_˘æ153
:1;

828 
	mhas_quîy39
:1;

829 } 
__©åibuã__
((
∑cked
));;

830 
	md©a
[1];

834 
	sf54_quîy_39
 {

837 
	mhas_˘æ154
:1;

838 
	mhas_˘æ155
:1;

839 
	mhas_˘æ156
:1;

840 
	mhas_˘æ160
:1;

841 
	mhas_˘æ157_˘æ158
:1;

842 
	mf54_quîy39_b5__6
:2;

843 
	mhas_quîy40
:1;

844 } 
__©åibuã__
((
∑cked
));;

845 
	md©a
[1];

849 
	sf54_quîy_40
 {

852 
	mhas_˘æ169
:1;

853 
	mhas_˘æ163_quîy41
:1;

854 
	mf54_quîy40_b2
:1;

855 
	mhas_˘æ165_quîy42
:1;

856 
	mhas_˘æ166
:1;

857 
	mhas_˘æ167
:1;

858 
	mhas_˘æ168
:1;

859 
	mhas_quîy43
:1;

860 } 
__©åibuã__
((
∑cked
));;

861 
	md©a
[1];

865 
	sf54_quîy_43
 {

868 
	mf54_quîy43_b0__1
:2;

869 
	mhas_˘æ171
:1;

870 
	mhas_˘æ172_quîy44_quîy45
:1;

871 
	mhas_˘æ173
:1;

872 
	mhas_˘æ174
:1;

873 
	mhas_˘æ175
:1;

874 
	mhas_quîy46
:1;

875 } 
__©åibuã__
((
∑cked
));;

876 
	md©a
[1];

880 
	sf54_quîy_46
 {

883 
	mhas_˘æ176
:1;

884 
	mhas_˘æ177_˘æ178
:1;

885 
	mhas_˘æ179
:1;

886 
	mf54_quîy46_b3
:1;

887 
	mhas_d©a27
:1;

888 
	mhas_d©a28
:1;

889 
	mf54_quîy46_b6
:1;

890 
	mhas_quîy47
:1;

891 } 
__©åibuã__
((
∑cked
));;

892 
	md©a
[1];

896 
	sf54_quîy_47
 {

899 
	mf54_quîy47_b0
:1;

900 
	mhas_˘æ182
:1;

901 
	mhas_˘æ183
:1;

902 
	mf54_quîy47_b3
:1;

903 
	mhas_˘æ185
:1;

904 
	mhas_˘æ186
:1;

905 
	mhas_˘æ187
:1;

906 
	mhas_quîy49
:1;

907 } 
__©åibuã__
((
∑cked
));;

908 
	md©a
[1];

912 
	sf54_quîy_49
 {

915 
	mf54_quîy49_b0__1
:2;

916 
	mhas_˘æ188
:1;

917 
	mhas_d©a31
:1;

918 
	mf54_quîy49_b4__6
:3;

919 
	mhas_quîy50
:1;

920 } 
__©åibuã__
((
∑cked
));;

921 
	md©a
[1];

925 
	sf54_quîy_50
 {

928 
	mf54_quîy50_b0__6
:7;

929 
	mhas_quîy51
:1;

930 } 
__©åibuã__
((
∑cked
));;

931 
	md©a
[1];

935 
	sf54_quîy_51
 {

938 
	mf54_quîy51_b0
:1;

939 
	mhas_˘æ196
:1;

940 
	mf54_quîy51_b2
:1;

941 
	mf54_quîy51_b3
:1;

942 
	mf54_quîy51_b4
:1;

943 
	mhas_quîy53_quîy54_˘æ198
:1;

944 
	mhas_˘æ199
:1;

945 
	mhas_quîy55
:1;

946 } 
__©åibuã__
((
∑cked
));;

947 
	md©a
[1];

951 
	sf54_quîy_55
 {

954 
	mhas_quîy56
:1;

955 
	mhas_d©a33_d©a34
:1;

956 
	mhas_Æã∫©e_ªp‹t_øã
:1;

957 
	mhas_˘æ200
:1;

958 
	mhas_˘æ201_˘æ202
:1;

959 
	mhas_˘æ203
:1;

960 
	mhas_˘æ204
:1;

961 
	mhas_quîy57
:1;

962 } 
__©åibuã__
((
∑cked
));;

963 
	md©a
[1];

967 
	sf54_quîy_57
 {

970 
	mhas_˘æ205
:1;

971 
	mhas_˘æ206
:1;

972 
	mhas_usb_bulk_ªad
:1;

973 
	mhas_˘æ207
:1;

974 
	mhas_˘æ208
:1;

975 
	mhas_˘æ209
:1;

976 
	mhas_˘æ210
:1;

977 
	mhas_quîy58
:1;

978 } 
__©åibuã__
((
∑cked
));;

979 
	md©a
[1];

983 
	sf54_quîy_58
 {

986 
	mhas_quîy59
:1;

987 
	mhas_quîy60
:1;

988 
	mhas_˘æ211
:1;

989 
	mhas_˘æ212
:1;

990 
	mhas_hybrid_abs_tx_axis_fûãrög
:1;

991 
	mf54_quîy58_b5
:1;

992 
	mhas_˘æ213
:1;

993 
	mhas_quîy61
:1;

994 } 
__©åibuã__
((
∑cked
));;

995 
	md©a
[1];

999 
	sf54_quîy_61
 {

1002 
	mhas_˘æ214
:1;

1003 
	mhas_˘æ215_quîy62_quîy63
:1;

1004 
	mf54_quîy61_b2__4
:3;

1005 
	mhas_˘æ218
:1;

1006 
	mhas_hybrid_abs_buâ⁄s
:1;

1007 
	mhas_quîy64
:1;

1008 } 
__©åibuã__
((
∑cked
));;

1009 
	md©a
[1];

1013 
	sf54_quîy_64
 {

1016 
	mf54_quîy64_b0
:1;

1017 
	mhas_˘æ220
:1;

1018 
	mf54_quîy64_b2__3
:2;

1019 
	mhas_˘æ219_sub1
:1;

1020 
	mhas_˘æ103_sub3
:1;

1021 
	mhas_˘æ224_˘æ226_˘æ227
:1;

1022 
	mhas_quîy65
:1;

1023 } 
__©åibuã__
((
∑cked
));;

1024 
	md©a
[1];

1028 
	sf54_quîy_65
 {

1031 
	mf54_quîy65_b0__4
:5;

1032 
	mhas_quîy66_˘æ231
:1;

1033 
	mhas_˘æ232
:1;

1034 
	mhas_quîy67
:1;

1035 } 
__©åibuã__
((
∑cked
));;

1036 
	md©a
[1];

1040 
	sf54_quîy_67
 {

1043 
	mhas_abs_doze_•©ül_fûãr_íabÀ
:1;

1044 
	mhas_abs_doze_avîage_fûãr_íabÀ
:1;

1045 
	mhas_sögÀ_di•œy_pul£
:1;

1046 
	mf54_quîy67_b3__6
:4;

1047 
	mhas_quîy68
:1;

1048 } 
__©åibuã__
((
∑cked
));;

1049 
	md©a
[1];

1053 
	sf54_quîy_68
 {

1056 
	mf54_quîy68_b0__4
:5;

1057 
	mhas_‰eq_fûãr_bw_ext
:1;

1058 
	mf54_quîy68_b6
:1;

1059 
	mhas_quîy69
:1;

1060 } 
__©åibuã__
((
∑cked
));;

1061 
	md©a
[1];

1065 
	sf54_quîy_69
 {

1068 
	mhas_˘æ240_sub0
:1;

1069 
	mhas_˘æ240_sub1_sub2
:1;

1070 
	mhas_˘æ240_sub3
:1;

1071 
	mhas_˘æ240_sub4
:1;

1072 
	mbur°_mode_ªp‹t_ty≥_íabÀd
:1;

1073 
	mf54_quîy69_b5__7
:3;

1074 } 
__©åibuã__
((
∑cked
));;

1075 
	md©a
[1];

1079 
	sf54_d©a_31
 {

1082 
	mis_ˇlibøti⁄_¸c
:1;

1083 
	mˇlibøti⁄_¸c
:1;

1084 
	msh‹t_ã°_row_numbî
:5;

1085 } 
__©åibuã__
((
∑cked
));;

1087 
	md©a
[1];

1088 
	maddªss
;

1089 } 
__©åibuã__
((
∑cked
));;

1093 
	sf54_c⁄åﬁ_7
 {

1096 
	mcbc_ˇp
:3;

1097 
	mcbc_pﬁ¨ôy
:1;

1098 
	mcbc_tx_ˇºõr_£À˘i⁄
:1;

1099 
	mf54_˘æ7_b5__7
:3;

1100 } 
__©åibuã__
((
∑cked
));;

1102 
	md©a
[1];

1103 
	maddªss
;

1104 } 
__©åibuã__
((
∑cked
));;

1108 
	sf54_c⁄åﬁ_41
 {

1111 
	mno_sig«l_˛¨ôy
:1;

1112 
	mf54_˘æ41_b1__7
:7;

1113 } 
__©åibuã__
((
∑cked
));;

1115 
	md©a
[1];

1116 
	maddªss
;

1117 } 
__©åibuã__
((
∑cked
));;

1121 
	sf54_c⁄åﬁ_57
 {

1124 
	mcbc_ˇp
:3;

1125 
	mcbc_pﬁ¨ôy
:1;

1126 
	mcbc_tx_ˇºõr_£À˘i⁄
:1;

1127 
	mf54_˘æ57_b5__7
:3;

1128 } 
__©åibuã__
((
∑cked
));;

1130 
	md©a
[1];

1131 
	maddªss
;

1132 } 
__©åibuã__
((
∑cked
));;

1136 
	sf54_c⁄åﬁ_86
 {

1139 
	míabÀ_high_noi£_°©e
:1;

1140 
	mdy«mic_£n£_di•œy_øtio
:2;

1141 
	mf54_˘æ86_b3__7
:5;

1142 } 
__©åibuã__
((
∑cked
));;

1144 
	md©a
[1];

1145 
	maddªss
;

1146 } 
__©åibuã__
((
∑cked
));;

1150 
	sf54_c⁄åﬁ_88
 {

1153 
	mtx_low_ª„ªn˚_pﬁ¨ôy
:1;

1154 
	mtx_high_ª„ªn˚_pﬁ¨ôy
:1;

1155 
	mabs_low_ª„ªn˚_pﬁ¨ôy
:1;

1156 
	mabs_pﬁ¨ôy
:1;

1157 
	mcbc_pﬁ¨ôy
:1;

1158 
	mcbc_tx_ˇºõr_£À˘i⁄
:1;

1159 
	mch¨ge_pump_íabÀ
:1;

1160 
	mcbc_abs_auto_£rvo
:1;

1161 } 
__©åibuã__
((
∑cked
));;

1163 
	md©a
[1];

1164 
	maddªss
;

1165 } 
__©åibuã__
((
∑cked
));;

1169 
	sf54_c⁄åﬁ_91
 {

1172 
	mªÊo_å™sˇp_ˇ∑cô™˚
;

1173 
	mªfhi_å™sˇp_ˇ∑cô™˚
;

1174 
	mª˚ivî_„edback_ˇ∑cô™˚
;

1175 
	mª„ªn˚_ª˚ivî_„edback_ˇ∑cô™˚
;

1176 
	mgaö_˘æ
;

1177 } 
__©åibuã__
((
∑cked
));;

1179 
	md©a
[5];

1180 
	maddªss
;

1181 } 
__©åibuã__
((
∑cked
));;

1185 
	sf54_c⁄åﬁ_96
 {

1188 
	mcbc_å™sˇp
[64];

1189 } 
__©åibuã__
((
∑cked
));;

1191 
	md©a
[64];

1192 
	maddªss
;

1193 } 
__©åibuã__
((
∑cked
));;

1197 
	sf54_c⁄åﬁ_99
 {

1200 
	möãgøti⁄_duøti⁄_lsb
;

1201 
	möãgøti⁄_duøti⁄_msb
;

1202 
	mª£t_duøti⁄
;

1203 } 
__©åibuã__
((
∑cked
));;

1205 
	md©a
[3];

1206 
	maddªss
;

1207 } 
__©åibuã__
((
∑cked
));;

1212 
	sf54_c⁄åﬁ_110
 {

1215 
	ma˘ive_°ylus_rx_„edback_ˇp
;

1216 
	ma˘ive_°ylus_rx_„edback_ˇp_ª„ªn˚
;

1217 
	ma˘ive_°ylus_low_ª„ªn˚
;

1218 
	ma˘ive_°ylus_high_ª„ªn˚
;

1219 
	ma˘ive_°ylus_gaö_c⁄åﬁ
;

1220 
	ma˘ive_°ylus_gaö_c⁄åﬁ_ª„ªn˚
;

1221 
	ma˘ive_°ylus_timög_mode
;

1222 
	ma˘ive_°ylus_discovîy_bur°s
;

1223 
	ma˘ive_°ylus_dëe˘i⁄_bur°s
;

1224 
	ma˘ive_°ylus_discovîy_noi£_mu…ùlõr
;

1225 
	ma˘ive_°ylus_dëe˘i⁄_ívñ›e_mö
;

1226 
	ma˘ive_°ylus_dëe˘i⁄_ívñ›e_max
;

1227 
	ma˘ive_°ylus_lo£_cou¡
;

1228 } 
__©åibuã__
((
∑cked
));;

1230 
	md©a
[13];

1231 
	maddªss
;

1232 } 
__©åibuã__
((
∑cked
));;

1236 
	sf54_c⁄åﬁ_149
 {

1239 
	må™s_cbc_globÆ_ˇp_íabÀ
:1;

1240 
	mf54_˘æ149_b1__7
:7;

1241 } 
__©åibuã__
((
∑cked
));;

1243 
	md©a
[1];

1244 
	maddªss
;

1245 } 
__©åibuã__
((
∑cked
));;

1249 
	sf54_c⁄åﬁ_182
 {

1252 
	mcbc_timög_˘æ_tx_lsb
;

1253 
	mcbc_timög_˘æ_tx_msb
;

1254 
	mcbc_timög_˘æ_rx_lsb
;

1255 
	mcbc_timög_˘æ_rx_msb
;

1256 } 
__©åibuã__
((
∑cked
));;

1258 
	md©a
[4];

1259 
	maddªss
;

1260 } 
__©åibuã__
((
∑cked
));;

1264 
	sf54_c⁄åﬁ_188
 {

1267 
	m°¨t_ˇlibøti⁄
:1;

1268 
	m°¨t_is_ˇlibøti⁄
:1;

1269 
	m‰equícy
:2;

1270 
	m°¨t_¥odu˘i⁄_ã°
:1;

1271 
	msh‹t_ã°_ˇlibøti⁄
:1;

1272 
	mf54_˘æ188_b7
:1;

1273 } 
__©åibuã__
((
∑cked
));;

1275 
	md©a
[1];

1276 
	maddªss
;

1277 } 
__©åibuã__
((
∑cked
));;

1281 
	sf54_c⁄åﬁ_223
 {

1284 
	mvﬁèges_f‹_0d
:8;

1285 } 
__©åibuã__
((
∑cked
));;

1287 
	md©a
[1];

1288 
	maddªss
;

1289 } 
__©åibuã__
((
∑cked
));;

1293 
	sf54_c⁄åﬁ
 {

1294 
f54_c⁄åﬁ_7
 
	mªg_7
;

1295 
f54_c⁄åﬁ_41
 
	mªg_41
;

1296 
f54_c⁄åﬁ_57
 
	mªg_57
;

1297 
f54_c⁄åﬁ_86
 
	mªg_86
;

1298 
f54_c⁄åﬁ_88
 
	mªg_88
;

1299 
f54_c⁄åﬁ_91
 
	mªg_91
;

1300 
f54_c⁄åﬁ_96
 
	mªg_96
;

1301 
f54_c⁄åﬁ_99
 
	mªg_99
;

1302 
f54_c⁄åﬁ_110
 
	mªg_110
;

1303 
f54_c⁄åﬁ_149
 
	mªg_149
;

1304 
f54_c⁄åﬁ_182
 
	mªg_182
;

1305 
f54_c⁄åﬁ_188
 
	mªg_188
;

1306 
f54_c⁄åﬁ_223
 
	mªg_223
;

1309 
	sf55_quîy
 {

1313 
	mnum_of_rx_ñe˘rodes
;

1316 
	mnum_of_tx_ñe˘rodes
;

1319 
	mhas_£ns‹_assignmít
:1;

1320 
	mhas_edge_com≥nßti⁄
:1;

1321 
	mcurve_com≥nßti⁄_mode
:2;

1322 
	mhas_˘æ6
:1;

1323 
	mhas_Æã∫©e_å™smôãr_assignmít
:1;

1324 
	mhas_sögÀ_œyî_mu…i_touch
:1;

1325 
	mhas_quîy5
:1;

1326 } 
__©åibuã__
((
∑cked
));;

1327 
	md©a
[3];

1331 
	sf55_quîy_3
 {

1334 
	mhas_˘æ8
:1;

1335 
	mhas_˘æ9
:1;

1336 
	mhas_⁄˚Œ_∑âîn_suµ‹t
:1;

1337 
	mhas_d©a0
:1;

1338 
	mhas_sögÀ_wide_∑âîn_suµ‹t
:1;

1339 
	mhas_múr‹ed_tx_∑âîn_suµ‹t
:1;

1340 
	mhas_dis¸ëe_∑âîn_suµ‹t
:1;

1341 
	mhas_quîy9
:1;

1342 } 
__©åibuã__
((
∑cked
));;

1343 
	md©a
[1];

1347 
	sf55_quîy_5
 {

1350 
	mhas_c‹√r_com≥nßti⁄
:1;

1351 
	mhas_˘æ12
:1;

1352 
	mhas_åx_c⁄figuøti⁄
:1;

1353 
	mhas_˘æ13
:1;

1354 
	mf55_quîy5_b4
:1;

1355 
	mhas_˘æ14
:1;

1356 
	mhas_basis_fun˘i⁄
:1;

1357 
	mhas_quîy17
:1;

1358 } 
__©åibuã__
((
∑cked
));;

1359 
	md©a
[1];

1363 
	sf55_quîy_17
 {

1366 
	mf55_quîy17_b0
:1;

1367 
	mhas_˘æ16
:1;

1368 
	mhas_˘æ18_˘æ19
:1;

1369 
	mhas_˘æ17
:1;

1370 
	mhas_˘æ20
:1;

1371 
	mhas_˘æ21
:1;

1372 
	mhas_˘æ22
:1;

1373 
	mhas_quîy18
:1;

1374 } 
__©åibuã__
((
∑cked
));;

1375 
	md©a
[1];

1379 
	sf55_quîy_18
 {

1382 
	mhas_˘æ23
:1;

1383 
	mhas_˘æ24
:1;

1384 
	mhas_quîy19
:1;

1385 
	mhas_˘æ25
:1;

1386 
	mhas_˘æ26
:1;

1387 
	mhas_˘æ27_quîy20
:1;

1388 
	mhas_˘æ28_quîy21
:1;

1389 
	mhas_quîy22
:1;

1390 } 
__©åibuã__
((
∑cked
));;

1391 
	md©a
[1];

1395 
	sf55_quîy_22
 {

1398 
	mhas_˘æ29
:1;

1399 
	mhas_quîy23
:1;

1400 
	mhas_gu¨d_dißbÀ
:1;

1401 
	mhas_˘æ30
:1;

1402 
	mhas_˘æ31
:1;

1403 
	mhas_˘æ32
:1;

1404 
	mhas_quîy24_through_quîy27
:1;

1405 
	mhas_quîy28
:1;

1406 } 
__©åibuã__
((
∑cked
));;

1407 
	md©a
[1];

1411 
	sf55_quîy_23
 {

1414 
	mamp_£ns‹_íabÀd
:1;

1415 
	mimage_å™•o£d
:1;

1416 
	mfú°_cﬁumn_©_À·_side
:1;

1417 
	msize_of_cﬁumn2mux
:5;

1418 } 
__©åibuã__
((
∑cked
));;

1419 
	md©a
[1];

1423 
	sf55_quîy_28
 {

1426 
	mf55_quîy28_b0__4
:5;

1427 
	mhas_˘æ37
:1;

1428 
	mhas_quîy29
:1;

1429 
	mhas_quîy30
:1;

1430 } 
__©åibuã__
((
∑cked
));;

1431 
	md©a
[1];

1435 
	sf55_quîy_30
 {

1438 
	mhas_˘æ38
:1;

1439 
	mhas_quîy31_quîy32
:1;

1440 
	mhas_˘æ39
:1;

1441 
	mhas_˘æ40
:1;

1442 
	mhas_˘æ41
:1;

1443 
	mhas_˘æ42
:1;

1444 
	mhas_˘æ43_˘æ44
:1;

1445 
	mhas_quîy33
:1;

1446 } 
__©åibuã__
((
∑cked
));;

1447 
	md©a
[1];

1451 
	sf55_quîy_33
 {

1454 
	mhas_exãnded_amp_∑d
:1;

1455 
	mhas_exãnded_amp_bä
:1;

1456 
	mhas_˘æ45_˘æ46
:1;

1457 
	mf55_quîy33_b3
:1;

1458 
	mhas_˘æ47_sub0_sub1
:1;

1459 
	mf55_quîy33_b5__7
:3;

1460 } 
__©åibuã__
((
∑cked
));;

1461 
	md©a
[1];

1465 
	sf55_c⁄åﬁ_43
 {

1468 
	msw≠_£ns‹_side
:1;

1469 
	mf55_˘æ43_b1__7
:7;

1470 
	ma„_l_mux_size
:4;

1471 
	ma„_r_mux_size
:4;

1472 } 
__©åibuã__
((
∑cked
));;

1473 
	md©a
[2];

1477 
	srmi_pdt
 {

1478 
Fun˘i⁄Des¸ùt‹
 
	mF01
;

1479 
Fun˘i⁄Des¸ùt‹
 
	mF11
;

1480 
Fun˘i⁄Des¸ùt‹
 
	mF12
;

1481 
Fun˘i⁄Des¸ùt‹
 
	mF1A
;

1482 
Fun˘i⁄Des¸ùt‹
 
	mF34
;

1483 
Fun˘i⁄Des¸ùt‹
 
	mF54
;

1484 
Fun˘i⁄Des¸ùt‹
 
	mF55
;

1487 
f12_exåa_d©a
 
	mf12_exåa
;

1488 
	mnum_of_fögîs_suµ‹ãd
;

1489 
f12_fögî_d©a
 
	mf12_fögî_d©a
[
F12_FINGERS_TO_SUPPORT
];

1492 
f54_quîy
 
	mf54_quîy
;

1493 
f54_quîy_13
 
	mf54_quîy_13
;

1494 
f54_quîy_15
 
	mf54_quîy_15
;

1495 
f54_quîy_16
 
	mf54_quîy_16
;

1496 
f54_quîy_21
 
	mf54_quîy_21
;

1497 
f54_quîy_22
 
	mf54_quîy_22
;

1498 
f54_quîy_23
 
	mf54_quîy_23
;

1499 
f54_quîy_25
 
	mf54_quîy_25
;

1500 
f54_quîy_27
 
	mf54_quîy_27
;

1501 
f54_quîy_29
 
	mf54_quîy_29
;

1502 
f54_quîy_30
 
	mf54_quîy_30
;

1503 
f54_quîy_32
 
	mf54_quîy_32
;

1504 
f54_quîy_33
 
	mf54_quîy_33
;

1505 
f54_quîy_35
 
	mf54_quîy_35
;

1506 
f54_quîy_36
 
	mf54_quîy_36
;

1507 
f54_quîy_38
 
	mf54_quîy_38
;

1508 
f54_quîy_39
 
	mf54_quîy_39
;

1509 
f54_quîy_40
 
	mf54_quîy_40
;

1510 
f54_quîy_43
 
	mf54_quîy_43
;

1511 
f54_quîy_46
 
	mf54_quîy_46
;

1512 
f54_quîy_47
 
	mf54_quîy_47
;

1513 
f54_quîy_49
 
	mf54_quîy_49
;

1514 
f54_quîy_50
 
	mf54_quîy_50
;

1515 
f54_quîy_51
 
	mf54_quîy_51
;

1516 
f54_quîy_55
 
	mf54_quîy_55
;

1517 
f54_quîy_57
 
	mf54_quîy_57
;

1518 
f54_quîy_58
 
	mf54_quîy_58
;

1519 
f54_quîy_61
 
	mf54_quîy_61
;

1520 
f54_quîy_64
 
	mf54_quîy_64
;

1521 
f54_quîy_65
 
	mf54_quîy_65
;

1522 
f54_quîy_67
 
	mf54_quîy_67
;

1523 
f54_quîy_68
 
	mf54_quîy_68
;

1524 
f54_quîy_69
 
	mf54_quîy_69
;

1525 
f54_d©a_31
 
	mf54_d©a_31
;

1526 
f54_c⁄åﬁ
 
	mf54_c⁄åﬁ
;

1527 
	mf54_c⁄åﬁ_ªg95_off£t
;

1530 
f55_quîy
 
	mf55_quîy
;

1531 
f55_quîy_3
 
	mf55_quîy_3
;

1532 
f55_quîy_5
 
	mf55_quîy_5
;

1533 
f55_quîy_17
 
	mf55_quîy_17
;

1534 
f55_quîy_18
 
	mf55_quîy_18
;

1535 
f55_quîy_22
 
	mf55_quîy_22
;

1536 
f55_quîy_23
 
	mf55_quîy_23
;

1537 
f55_quîy_28
 
	mf55_quîy_28
;

1538 
f55_quîy_30
 
	mf55_quîy_30
;

1539 
f55_quîy_33
 
	mf55_quîy_33
;

1542 
	mc⁄fig_id
[64];

1543 
	msize_of_c⁄fig_id
;

1544 
bl_vîsi⁄
 
	mbl_vîsi⁄
;

1545 
	m£ns‹_max_x
;

1546 
	m£ns‹_max_y
;

1547 
	mtx_assig√d
;

1548 
	mrx_assig√d
;

1549 
	msw≠_£ns‹_side
;

1550 
	mÀ·_mux_size
;

1551 
	mright_mux_size
;

1552 
	masic_ty≥
[16];

1553 
	mbuûd_id
;

1554 
	mnumbî_of_£nsög_‰equícõs
;

1555 
boﬁ
 
	mhas_buâ⁄
;

1556 
boﬁ
 
	mf54_skù_cdc_cdm_c⁄åﬁ
;

1557 
boﬁ
 
	mamp_£ns‹
;

1558 
boﬁ
 
	mexãnded_amp
;

1559 
boﬁ
 
	mexãnded_amp_bä
;

1560 
	msize_of_cﬁumn2mux
;

1561 
	ma„_mux_off£t
;

1562 
	mtx_assignmít
[
MAX_SENSOR_MAP_SIZE
];

1563 
	mrx_assignmít
[
MAX_SENSOR_MAP_SIZE
];

1565 
boﬁ
 
	mis_tddi_dev
;

1569 
rmi_pdt
 
	gg_rmi_pdt
;

1573 
boﬁ
 
rmi_föd_dev
(*
dev_node
);

1574 
rmi_›í_dev
(c⁄° *
dev_node
);

1575 
rmi_˛o£_dev
(c⁄° *
dev_node
);

1578 
rmi_ªad_ªg
(
addªss
, *
p_rd_d©a
, 
byãs_to_ªad
);

1579 
rmi_wrôe_ªg
(
addªss
, *
p_wr_d©a
, 
byãs_to_wrôe
);

1582 
rmi_f01_sw_ª£t
();

1584 
rmi_f01_£t_no_¶ìp
();

1587 
rmi_f54_f‹˚_upd©e
();

1589 
rmi_f54_f‹˚_ˇl
();

1591 
rmi_f54_no_ªœx
(
boﬁ
 
í
);

1593 
rmi_dißbÀ_cbc_cdm
();

1595 
rmi_f54_gë_logiˇl_rx
(
pö
);

1598 
rmi_gë_idítify
(*
öfo_buf„r
);

1601 
rmi_f54_ªad_ªp‹t_‰ame
(
ªp‹t_ty≥
, *
p_out
, 
size_out
,

1602 
boﬁ
 
out_ö_œndsˇ≥
);

1603 
rmi_f54_ªad_ªp‹t_uˇºay
(
ªp‹t_ty≥
, *
p_out
, 
size_out
);

1606 
rmi_do_ã°_noi£_π02
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1607 *
limô_max
, 
size_limô_max
, 
num_‰ames_ã°ög
);

1608 
rmi_do_ã°_fuŒ_øw_ˇp_π20
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1609 *
limô_mö
, 
size_limô_mö
,

1610 *
limô_max
, 
size_limô_max
);

1611 
rmi_do_ã°_fuŒ_øw_tddi_π92
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1612 *
limô_mö
, 
size_limô_mö
,

1613 *
limô_max
, 
size_limô_max
);

1614 
rmi_do_ã°_ex_high_ªsi°™˚_π20
(*
p_ªsu…_tixñ
, *
p_ªsu…_rx
, *
p_ªsu…_tx
,

1615 *
p_ªf_‰ame
, 
cﬁ
, 
row
,

1616 
limô_tixñ
, 
limô_rxr€
, 
limô_txr€
);

1617 
rmi_do_ã°_åx_sh‹t_π26
(*
p_ªsu…_d©a
, 
size_of_ªsu…_d©a
, *
pös_ªsu…
,

1618 
size_of_pös_ªsu…
, *
limô
, 
size_of_limô
);

1619 
rmi_do_ã°_ex_åx_sh‹t_π26100
(*
p_ªsu…_d©a_26
, 
size_of_ªsu…_d©a_26
,

1620 *
p_ªsu…_d©a_100
, 
size_of_ªsu…_d©a_100
,

1621 *
pös_ªsu…
, 
size_of_pös_ªsu…
,

1622 *
limô_π26
, 
size_of_limô_π26
,

1623 *
limô_π100
, 
size_of_limô_π100
);

1624 
rmi_do_ã°_abs_›í_π63
(*
p_ªsu…_img
, 
size_of_ªsu…_d©a
, *
limô_mö
,

1625 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

1626 
rmi_do_ã°_adc_ønge_π23
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1627 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

1628 
rmi_do_ã°_£ns‹_•ìd_π22
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1629 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

1630 
rmi_do_ã°_ègsmoi°uª_π76
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1631 *
limô_max
, 
size_limô_max
);

1632 
rmi_do_ã°_π133
(*
p_ªsu…_img
, 
size_of_ªsu…_d©a
, *
limô_max
, 
size_limô_max
);

1633 
rmi_do_ã°_abs_dñè_π59
(*
p_ªsu…_img
, 
size_of_ªsu…_d©a
,

1634 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

1637 
rmi_quîy_touch_ª•⁄£
(*
touch_x
, * 
touch_y
, * 
touch_°©us
,

1638 
max_fögîs_to_¥o˚ss
);

	@cpp/jni/rmi_identify.c

28 
	~<°dio.h
>

30 
	~"sy«_dev_m™agî.h
"

31 
	~"rmi_c⁄åﬁ.h
"

42 
	$rmi_gë_idítify
(*
p_buf
)

44 
i
;

45 
°r_off£t
 = 0;

47 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, "[ RMI Dev Identification ]\n");

48 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Firmware Mode = ui\n");

49 
°r_off£t
 +
	`•rötf
(
p_buf
 + så_off£t, " Devi˚ ID = %s\n", 
g_rmi_pdt
.
asic_ty≥
);

50 
°r_off£t
 +
	`•rötf
(
p_buf
 + så_off£t, " FW Buûd ID = %d\n", 
g_rmi_pdt
.
buûd_id
);

51 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " FW Config ID = ");

52 
i
 = 0; i < 
g_rmi_pdt
.
size_of_c⁄fig_id
-1; i++) {

53 
°r_off£t
 +
	`•rötf
(
p_buf
 + så_off£t, "%02x-", 
g_rmi_pdt
.
c⁄fig_id
[
i
]);

54 i‡((
i
 !0Ë&& ((i+1)%12 =0)Ë
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, "\n ");

56 
°r_off£t
 +
	`•rötf
(
p_buf
 + så_off£t, "%02x\n", 
g_rmi_pdt
.
c⁄fig_id
[g_rmi_pdt.
size_of_c⁄fig_id
-1]);

58 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Functions = $34\n");

59 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " $01\n");

60 i‡(
g_rmi_pdt
.
F12
.
ID
 == 0x12)

61 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " $12\n");

62 i‡(
g_rmi_pdt
.
F54
.
ID
 == 0x54)

63 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " $54\n");

64 i‡(
g_rmi_pdt
.
F55
.
ID
 == 0x55)

65 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " $55\n");

66 i‡(
g_rmi_pdt
.
F1A
.
ID
 == 0x1a)

67 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " $1A\n");

69 
°r_off£t
 +
	`•rötf
(
p_buf
 + så_off£t, " Max. X co‹dö©ê = %d\n", 
g_rmi_pdt
.
£ns‹_max_x
);

70 
°r_off£t
 +
	`•rötf
(
p_buf
 + så_off£t, " Max. Y co‹dö©ê = %d\n", 
g_rmi_pdt
.
£ns‹_max_y
);

71 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Number of Fingers Supported = 10\n");

72 
°r_off£t
 +
	`•rötf
(
p_buf
 + så_off£t, " Tx Ch™√l†%d\n", 
	`sy«_gë_image_rows
(
Ál£
));

73 
°r_off£t
 +
	`•rötf
(
p_buf
 + så_off£t, " Rx Ch™√l†%d\n", 
	`sy«_gë_image_cﬁs
(
Ál£
));

76 
	`•rötf
(
p_buf
 + 
°r_off£t
, "\n");

78  
°r_off£t
;

79 
	}
}

	@cpp/jni/rmi_production_test.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

33 
	~<uni°d.h
>

35 
	~"sy«_dev_m™agî.h
"

36 
	~"rmi_c⁄åﬁ.h
"

38 #ifde‡
SAVE_ERR_MSG


39 
	~"îr_msg_˘æ.h
"

42 
exãnded_high_ªsi°™˚_ã°
(

43 
rx_2d_ch™√l
,

44 
tx_2d_ch™√l
,

45 sig√d * 
dñè_2d_image
,

46 sig√d * 
ba£löe_image
,

47 sig√d * 
ªf_2d_image
,

48 sig√d * 
rx_Resu…
,

49 sig√d * 
tx_Resu…
,

50 sig√d * 
surÁ˚_Resu…


62 
	$rmi_do_ã°_noi£_π02
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

63 *
limô_max
, 
size_limô_max
, 
num_‰ames_ã°ög
)

65 
ªtvÆ
 = 0;

66 
i
, 
j
, 
idx_limô
;

67 
Áûuª_‰ame_˙t
 = 0;

68 
Áûuª_˙t
 = 0;

69 *
p_d©a_π2
 = 
NULL
;

70 
d©a
;

71 *
max_dñè_‰ame
 = 
NULL
;

72 *
sum_buf
 = 
NULL
;

73 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

74 
row
 = 
	`sy«_gë_image_rows
(
åue
);

75 
‰ame_size
 = (Ë* 
cﬁ
 * 
row
;

76 
idx
;

77 
max_dñè_sum
 = 0;

78 
dñè_sum
;

79 #ifde‡
SAVE_ERR_MSG


80 
îr
[
MAX_ERR_STRING_LEN
];

83 i‡(!
p_ªsu…_img
) {

84 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

85 #ifde‡
SAVE_ERR_MSG


86 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

87 
	`add_îr‹_msg
(
îr
);

89 
ªtvÆ
 = -
EINVAL
;

90 
exô
;

92 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

93 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

94 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

95 #ifde‡
SAVE_ERR_MSG


96 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

97 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

98 
	`add_îr‹_msg
(
îr
);

100 
ªtvÆ
 = -
EINVAL
;

101 
exô
;

103 i‡((!
limô_max
Ë|| (0 =
size_limô_max
)) {

104 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

105 #ifde‡
SAVE_ERR_MSG


106 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

107 
	`add_îr‹_msg
(
îr
);

109 
ªtvÆ
 = -
EINVAL
;

110 
exô
;

114 
p_d©a_π2
 = 
	`mÆloc
((
size_t
)
‰ame_size
);

115 i‡(!
p_d©a_π2
) {

116 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π2\n", 
__func__
);

117 #ifde‡
SAVE_ERR_MSG


118 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π2\n", 
__func__
);

119 
	`add_îr‹_msg
(
îr
);

121 
ªtvÆ
 = -
ENOMEM
;

122 
exô
;

124 
	`mem£t
(
p_d©a_π2
, 0x00, (
size_t
)
‰ame_size
);

126 
max_dñè_‰ame
 = 
	`mÆloc
((
size_t
)
‰ame_size
);

127 i‡(!
max_dñè_‰ame
) {

128 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ max_dñè_‰ame\n", 
__func__
);

129 #ifde‡
SAVE_ERR_MSG


130 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ max_dñè_‰ame\n", 
__func__
);

131 
	`add_îr‹_msg
(
îr
);

133 
ªtvÆ
 = -
ENOMEM
;

134 
exô
;

136 
	`mem£t
(
max_dñè_‰ame
, 0x00, (
size_t
)
‰ame_size
);

138 
sum_buf
 = 
	`mÆloc
((
size_t
)
‰ame_size
);

139 i‡(!
sum_buf
) {

140 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ sum_buf\n", 
__func__
);

141 #ifde‡
SAVE_ERR_MSG


142 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ sum_buf\n", 
__func__
);

143 
	`add_îr‹_msg
(
îr
);

145 
ªtvÆ
 = -
ENOMEM
;

146 
exô
;

148 
	`mem£t
(
sum_buf
, 0x00, (
size_t
)
‰ame_size
);

151 
idx
 = 0; idx < 
num_‰ames_ã°ög
; idx++) {

152 
Áûuª_˙t
 = 0;

153 
dñè_sum
 = 0;

156 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_‰ame
(2, 
p_d©a_π2
, (
cﬁ
 * 
row
), 
åue
);

157 i‡–
ªtvÆ
 < 0) {

158 #ifde‡
SAVE_ERR_MSG


159 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑt2Ñï‹à© %dÅimes\n", 
__func__
, 
idx
);

160 
	`add_îr‹_msg
(
îr
);

162 
ªtvÆ
 = -
EIO
;

163 
exô
;

168 
idx_limô
 = 0;

169 
i
 = 0; i < 
cﬁ
; i++) {

170 
j
 = 0; j < 
row
; j++) {

172 
sum_buf
[
i
 * 
row
 + 
j
] +
p_d©a_π2
[i *Ñow + j];

173 
dñè_sum
 +
	`abs
(
p_d©a_π2
[
i
 * 
row
 + 
j
]);

175 
d©a
 = 
p_d©a_π2
[
i
 * 
row
 + 
j
];

178 i‡(
size_limô_max
 =
cﬁ
 * 
row
) {

180 i‡(
	`abs
(
d©a
Ë> 
limô_max
[
idx_limô
]) {

181 
Áûuª_˙t
 += 1;

182 
	`¥ötf_e
("%sÉrror: failát frame %2d (%2d, %2d), data = %5d,Üimit max = %5d\n",

183 
__func__
, 
idx
, 
i
, 
j
, 
d©a
, 
limô_max
[
idx_limô
]);

184 #ifde‡
SAVE_ERR_MSG


185 
	`•rötf
(
îr
, "failát frame %2d (%-2d, %-2d), data = %5d,Üimit max = %5d\n",

186 
idx
, 
i
, 
j
, 
d©a
, 
limô_max
[
idx_limô
]);

187 
	`add_îr‹_msg
(
îr
);

193 i‡(
	`abs
(
d©a
Ë> 
limô_max
[0]) {

194 
Áûuª_˙t
 += 1;

195 
	`¥ötf_e
("%sÉrror: failát frame %2d (%2d, %2d) data = %5d,Üimit max = %5d\n",

196 
__func__
, 
idx
, 
i
, 
j
, 
d©a
, 
limô_max
[0]);

197 #ifde‡
SAVE_ERR_MSG


198 
	`•rötf
(
îr
, "failát frame %2d (%2d, %-d), data = %5d,Üimit max = %5d\n",

199 
idx
, 
i
, 
j
, 
d©a
, 
limô_max
[0]);

200 
	`add_îr‹_msg
(
îr
);

205 
idx_limô
 += 1;

209 i‡(
dñè_sum
 > 
max_dñè_sum
) {

210 
	`mem˝y
(
max_dñè_‰ame
, 
p_d©a_π2
, (
size_t
)
‰ame_size
);

211 
max_dñè_sum
 = 
dñè_sum
;

213 i‡(
Áûuª_˙t
 > 0) {

214 
Áûuª_‰ame_˙t
 += 1;

219 i‡(
Áûuª_‰ame_˙t
 > 0) {

220 
i
 = 0; i < 
ªsu…_img_cﬁ
; i++) {

221 
j
 = 0; j < 
ªsu…_img_row
; j++) {

222 
p_ªsu…_img
[
i
 * 
ªsu…_img_row
 + 
j
] = 
max_dñè_‰ame
[i *Ñesult_img_row + j];

227 
i
 = 0; i < 
ªsu…_img_cﬁ
; i++) {

228 
j
 = 0; j < 
ªsu…_img_row
; j++) {

229 
p_ªsu…_img
[
i
 * 
ªsu…_img_row
 + 
j
] =

230 (
sum_buf
[
i
 * 
ªsu…_img_row
 + 
j
] / 
num_‰ames_ã°ög
);

235 
	`¥ötf_i
("%s info: %s (failure_frame_cnt = %d)\n",

236 
__func__
, (
Áûuª_‰ame_˙t
 == 0)?"pass":"fail", failure_frame_cnt);

237 
exô
:

239 
	`sy«_do_sw_ª£t
();

241 if(
p_d©a_π2
)

242 
	`‰ì
(
p_d©a_π2
);

243 if(
max_dñè_‰ame
)

244 
	`‰ì
(
max_dñè_‰ame
);

245 if(
sum_buf
)

246 
	`‰ì
(
sum_buf
);

248  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_‰ame_˙t
;

249 
	}
}

260 
	$rmi_do_ã°_fuŒ_øw_ˇp_π20
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

261 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

263 
ªtvÆ
 = 0;

264 
i
, 
j
, 
idx_limô
;

265 
Áûuª_˙t
 = 0;

266 *
p_d©a_π20
 = 
NULL
;

267 
d©a
;

268 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

269 
row
 = 
	`sy«_gë_image_rows
(
åue
);

270 
limô_mö_d©a
;

271 
limô_max_d©a
;

272 #ifde‡
SAVE_ERR_MSG


273 
îr
[
MAX_ERR_STRING_LEN
];

276 i‡(!
p_ªsu…_img
) {

277 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

278 #ifde‡
SAVE_ERR_MSG


279 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

280 
	`add_îr‹_msg
(
îr
);

282 
ªtvÆ
 = -
EINVAL
;

283 
exô
;

285 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

286 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

287 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

288 #ifde‡
SAVE_ERR_MSG


289 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

290 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

291 
	`add_îr‹_msg
(
îr
);

293 
ªtvÆ
 = -
EINVAL
;

294 
exô
;

296 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

297 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

298 
__func__
, 
size_limô_mö
, 
size_limô_max
);

299 #ifde‡
SAVE_ERR_MSG


300 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

301 
	`add_îr‹_msg
(
îr
);

303 
ªtvÆ
 = -
EINVAL
;

304 
exô
;

308 
p_d©a_π20
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

309 i‡(!
p_d©a_π20
) {

310 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π20\n", 
__func__
);

311 #ifde‡
SAVE_ERR_MSG


312 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π20\n", 
__func__
);

313 
	`add_îr‹_msg
(
îr
);

315 
ªtvÆ
 = -
ENOMEM
;

316 
exô
;

320 
ªtvÆ
 = 
	`rmi_dißbÀ_cbc_cdm
();

321 i‡(
ªtvÆ
 < 0) {

322 
	`¥ötf_e
("%†îr‹: faûÅÿdÿ¥ï¨©i⁄ bef‹êru¬ögÅhêπ20\n", 
__func__
);

323 #ifde‡
SAVE_ERR_MSG


324 
	`•rötf
(
îr
, "%†îr‹: faûÅÿdÿ¥ï¨©i⁄ bef‹êru¬ögÅhêπ20\n", 
__func__
);

325 
	`add_îr‹_msg
(
îr
);

327 
ªtvÆ
 = -
ENOMEM
;

328 
exô
;

332 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_‰ame
(20, 
p_d©a_π20
, (
cﬁ
 * 
row
), 
åue
);

333 i‡–
ªtvÆ
 < 0) {

334 #ifde‡
SAVE_ERR_MSG


335 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ20\n", 
__func__
);

336 
	`add_îr‹_msg
(
îr
);

338 
ªtvÆ
 = -
EIO
;

339 
exô
;

345 
idx_limô
 = 0;

346 
i
 = 0; i < 
cﬁ
; i++) {

347 
j
 = 0; j < 
row
; j++) {

348 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
p_d©a_π20
[i *Ñow + j];

349 
d©a
 = 
p_ªsu…_img
[
i
 * 
row
 + 
j
];

352 i‡(
size_limô_mö
 =(
cﬁ
 * 
row
)) {

353 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

356 
limô_mö_d©a
 = 
limô_mö
[0];

359 i‡(
size_limô_max
 =(
cﬁ
 * 
row
)) {

360 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

363 
limô_max_d©a
 = 
limô_max
[0];

367 i‡(
d©a
 < 
limô_mö_d©a
) {

368 
Áûuª_˙t
 += 1;

369 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

370 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

371 #ifde‡
SAVE_ERR_MSG


372 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

373 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

374 
	`add_îr‹_msg
(
îr
);

378 i‡(
d©a
 > 
limô_max_d©a
) {

379 
Áûuª_˙t
 += 1;

380 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô max = %5d\n", 
__func__
,

381 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

382 #ifde‡
SAVE_ERR_MSG


383 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

384 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

385 
	`add_îr‹_msg
(
îr
);

389 
idx_limô
 += 1;

393 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

394 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

395 
exô
:

397 
	`sy«_do_sw_ª£t
();

399 if(
p_d©a_π20
)

400 
	`‰ì
(
p_d©a_π20
);

402  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

403 
	}
}

414 
	$rmi_do_ã°_fuŒ_øw_tddi_π92
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

415 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

417 
ªtvÆ
 = 0;

418 
i
, 
j
, 
idx_limô
;

419 
Áûuª_˙t
 = 0;

420 *
p_d©a_π92
 = 
NULL
;

421 
d©a
;

422 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

423 
row
 = 
	`sy«_gë_image_rows
(
åue
);

424 
limô_mö_d©a
;

425 
limô_max_d©a
;

426 #ifde‡
SAVE_ERR_MSG


427 
îr
[
MAX_ERR_STRING_LEN
];

430 i‡(!
p_ªsu…_img
) {

431 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

432 #ifde‡
SAVE_ERR_MSG


433 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

434 
	`add_îr‹_msg
(
îr
);

436 
ªtvÆ
 = -
EINVAL
;

437 
exô
;

439 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

440 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

441 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

442 #ifde‡
SAVE_ERR_MSG


443 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

444 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

445 
	`add_îr‹_msg
(
îr
);

447 
ªtvÆ
 = -
EINVAL
;

448 
exô
;

450 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

451 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

452 
__func__
, 
size_limô_mö
, 
size_limô_max
);

453 #ifde‡
SAVE_ERR_MSG


454 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

455 
	`add_îr‹_msg
(
îr
);

457 
ªtvÆ
 = -
EINVAL
;

458 
exô
;

462 
p_d©a_π92
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

463 i‡(!
p_d©a_π92
) {

464 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π92\n", 
__func__
);

465 #ifde‡
SAVE_ERR_MSG


466 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π92\n", 
__func__
);

467 
	`add_îr‹_msg
(
îr
);

469 
ªtvÆ
 = -
ENOMEM
;

470 
exô
;

474 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_‰ame
(92, 
p_d©a_π92
, (
cﬁ
 * 
row
), 
åue
);

475 i‡–
ªtvÆ
 < 0) {

476 #ifde‡
SAVE_ERR_MSG


477 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ92\n", 
__func__
);

478 
	`add_îr‹_msg
(
îr
);

480 
ªtvÆ
 = -
EIO
;

481 
exô
;

487 
idx_limô
 = 0;

488 
i
 = 0; i < 
cﬁ
; i++) {

489 
j
 = 0; j < 
row
; j++) {

490 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
p_d©a_π92
[i *Ñow + j];

491 
d©a
 = 
p_d©a_π92
[
i
 * 
row
 + 
j
];

494 i‡(
size_limô_mö
 =(
cﬁ
 * 
row
)) {

495 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

498 
limô_mö_d©a
 = 
limô_mö
[0];

501 i‡(
size_limô_max
 =(
cﬁ
 * 
row
)) {

502 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

505 
limô_max_d©a
 = 
limô_max
[0];

509 i‡(
d©a
 < 
limô_mö_d©a
) {

510 
Áûuª_˙t
 += 1;

511 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

512 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

513 #ifde‡
SAVE_ERR_MSG


514 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

515 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

516 
	`add_îr‹_msg
(
îr
);

520 i‡(
d©a
 > 
limô_max_d©a
) {

521 
Áûuª_˙t
 += 1;

522 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô max = %5d\n", 
__func__
,

523 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

524 #ifde‡
SAVE_ERR_MSG


525 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

526 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

527 
	`add_îr‹_msg
(
îr
);

531 
idx_limô
 += 1;

535 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

536 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

537 
exô
:

539 
	`sy«_do_sw_ª£t
();

541 if(
p_d©a_π92
)

542 
	`‰ì
(
p_d©a_π92
);

544  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

545 
	}
}

557 
	$rmi_do_ã°_ex_high_ªsi°™˚_π20
(*
p_ªsu…_tixñ
, *
p_ªsu…_rx
, *
p_ªsu…_tx
,

558 *
p_ªf_‰ame
, 
cﬁ
, 
row
,

559 
limô_tixñ
, 
limô_rxr€
, 
limô_txr€
)

561 
ªtvÆ
 = 0;

562 
i
, 
j
;

563 
Áûuª_˙t
 = 0;

564 *
p_d©a_π20
 = 
NULL
;

565 *
‰ame_dñè
 = 
NULL
;

566 *
‰ame_ba£löe
 = 
NULL
;

567 
tx
 = 
g_rmi_pdt
.
tx_assig√d
;

568 
rx
 = 
g_rmi_pdt
.
rx_assig√d
;

569 #ifde‡
SAVE_ERR_MSG


570 
îr
[
MAX_ERR_STRING_LEN
];

573 i‡(!
p_ªsu…_tixñ
) {

574 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_tixñ i†NULL\n", 
__func__
);

575 #ifde‡
SAVE_ERR_MSG


576 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_tixñ i†NULL.\n", 
__func__
);

577 
	`add_îr‹_msg
(
îr
);

579 
ªtvÆ
 = -
EINVAL
;

580 
exô
;

582 i‡(!
p_ªsu…_rx
) {

583 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_rx i†NULL\n", 
__func__
);

584 #ifde‡
SAVE_ERR_MSG


585 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_rx i†NULL.\n", 
__func__
);

586 
	`add_îr‹_msg
(
îr
);

588 
ªtvÆ
 = -
EINVAL
;

589 
exô
;

591 i‡(!
p_ªsu…_tx
) {

592 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_tx i†NULL\n", 
__func__
);

593 #ifde‡
SAVE_ERR_MSG


594 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_tx i†NULL.\n", 
__func__
);

595 
	`add_îr‹_msg
(
îr
);

597 
ªtvÆ
 = -
EINVAL
;

598 
exô
;

600 i‡(!
p_ªf_‰ame
) {

601 
	`¥ötf_e
("%†îr‹:Ö_ªf_‰amêi†NULL\n", 
__func__
);

602 #ifde‡
SAVE_ERR_MSG


603 
	`•rötf
(
îr
, "%†îr‹:Ö_ªf_‰amêi†NULL.\n", 
__func__
);

604 
	`add_îr‹_msg
(
îr
);

606 
ªtvÆ
 = -
EINVAL
;

607 
exô
;

609 i‡((0 =
cﬁ
Ë|| (0 =
row
)) {

610 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d)\n",

611 
__func__
, 
cﬁ
, 
row
);

612 #ifde‡
SAVE_ERR_MSG


613 
	`•rötf
(
îr
, "%sÉrror: invalidÖarameter (row,col) = (%d, %d)\n",

614 
__func__
, 
cﬁ
, 
row
);

615 
	`add_îr‹_msg
(
îr
);

617 
ªtvÆ
 = -
EINVAL
;

618 
exô
;

622 
‰ame_dñè
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

623 i‡(!
‰ame_dñè
) {

624 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹ føme_dñè\n", 
__func__
);

625 #ifde‡
SAVE_ERR_MSG


626 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹ føme_dñè\n", 
__func__
);

627 
	`add_îr‹_msg
(
îr
);

629 
ªtvÆ
 = -
ENOMEM
;

630 
exô
;

633 
‰ame_ba£löe
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

634 i‡(!
‰ame_ba£löe
) {

635 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹ føme_ba£löe\n", 
__func__
);

636 #ifde‡
SAVE_ERR_MSG


637 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹ føme_ba£löe\n", 
__func__
);

638 
	`add_îr‹_msg
(
îr
);

640 
ªtvÆ
 = -
ENOMEM
;

641 
exô
;

644 
p_d©a_π20
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

645 i‡(!
p_d©a_π20
) {

646 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π20\n", 
__func__
);

647 #ifde‡
SAVE_ERR_MSG


648 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π20\n", 
__func__
);

649 
	`add_îr‹_msg
(
îr
);

651 
ªtvÆ
 = -
ENOMEM
;

652 
exô
;

657 
ªtvÆ
 = 
	`rmi_dißbÀ_cbc_cdm
();

658 i‡(
ªtvÆ
 < 0) {

659 
	`¥ötf_e
("%†îr‹: faûÅÿdÿ¥ï¨©i⁄ bef‹êru¬ögÅhêπ20\n", 
__func__
);

660 #ifde‡
SAVE_ERR_MSG


661 
	`•rötf
(
îr
, "%†îr‹: faûÅÿdÿ¥ï¨©i⁄ bef‹êru¬ögÅhêπ20\n", 
__func__
);

662 
	`add_îr‹_msg
(
îr
);

664 
ªtvÆ
 = -
ENOMEM
;

665 
exô
;

669 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_‰ame
(20, 
p_d©a_π20
, (
cﬁ
 * 
row
), 
åue
);

670 i‡–
ªtvÆ
 < 0) {

671 #ifde‡
SAVE_ERR_MSG


672 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ20\n", 
__func__
);

673 
	`add_îr‹_msg
(
îr
);

675 
ªtvÆ
 = -
EIO
;

676 
exô
;

680 
i
 = 0; i < (
cﬁ
 * 
row
); i++) {

681 
‰ame_ba£löe
[
i
] = ()
p_d©a_π20
[i];

685 
i
 = 0; i < (
cﬁ
 * 
row
); i++) {

686 
‰ame_dñè
[
i
] = 
‰ame_ba£löe
[i] - 
p_ªf_‰ame
[i];

690 
	`exãnded_high_ªsi°™˚_ã°
(
rx
, 
tx
, 
‰ame_dñè
, 
‰ame_ba£löe
, 
p_ªf_‰ame
,

691 
p_ªsu…_rx
, 
p_ªsu…_tx
, 
p_ªsu…_tixñ
);

694 
i
 = 0; i < 
tx
; i++) {

695 
j
 = 0; j < 
rx
; j++) {

697 if–
p_ªsu…_tixñ
[
i
 * 
rx
 + 
j
] <
limô_tixñ
) {

699 
Áûuª_˙t
 += 1;

700 
	`¥ötf_e
("%sÉrror: failát (%2d, %2d) data = %5d,Üimit_tixel = %5d\n",

701 
__func__
, 
i
, 
j
, 
p_ªsu…_tixñ
[i* 
rx
 + j], 
limô_tixñ
);

702 #ifde‡
SAVE_ERR_MSG


703 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit_tixel = %5d\n",

704 
i
, 
j
, 
p_ªsu…_tixñ
[ò* 
rx
 + j], 
limô_tixñ
);

705 
	`add_îr‹_msg
(
îr
);

710 
i
 = 0; i < 
tx
; i++){

711 if(
p_ªsu…_tx
[
i
] >
limô_txr€
){

712 
Áûuª_˙t
 += 1;

713 
	`¥ötf_e
("%sÉrror: failát (tx %2d) data = %5d,Üimit_txroe = %5d\n",

714 
__func__
, 
i
, 
p_ªsu…_tx
[i], 
limô_txr€
);

715 #ifde‡
SAVE_ERR_MSG


716 
	`•rötf
(
îr
, "failát (tx %2d) data = %5d,Üimit_txroe = %5d\n",

717 
i
, 
p_ªsu…_tx
[i], 
limô_txr€
);

718 
	`add_îr‹_msg
(
îr
);

722 
j
 = 0; j <
rx
; j++) {

723 i‡(
p_ªsu…_rx
[
j
] >
limô_rxr€
) {

724 
Áûuª_˙t
 += 1;

725 
	`¥ötf_e
("%sÉrror: failát (rx %2d) data = %5d,Üimit_rxroe = %5d\n",

726 
__func__
, 
i
, 
p_ªsu…_rx
[i], 
limô_rxr€
);

727 #ifde‡
SAVE_ERR_MSG


728 
	`•rötf
(
îr
, "failát (rx %2d) data = %5d,Üimit_rxroe = %5d\n",

729 
i
, 
p_ªsu…_rx
[i], 
limô_rxr€
);

730 
	`add_îr‹_msg
(
îr
);

735 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

736 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

737 
exô
:

739 
	`sy«_do_sw_ª£t
();

741 if(
p_d©a_π20
)

742 
	`‰ì
(
p_d©a_π20
);

743 if(
‰ame_ba£löe
)

744 
	`‰ì
(
‰ame_ba£löe
);

745 if(
‰ame_dñè
)

746 
	`‰ì
(
‰ame_dñè
);

748  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

749 
	}
}

759 
boﬁ
 
	$rmi_pö_is_rx_assig√d
(
pö
)

761 
i
;

762 
i
 = 0; i < 
g_rmi_pdt
.
rx_assig√d
; i++) {

763 i‡(
pö
 =
g_rmi_pdt
.
rx_assignmít
[
i
]){

764  
åue
;

767  
Ál£
;

768 
	}
}

777 
boﬁ
 
	$rmi_pö_is_tx_assig√d
(
pö
)

779 
i
;

780 
i
 = 0; i < 
g_rmi_pdt
.
tx_assig√d
; i++) {

781 i‡(
pö
 =
g_rmi_pdt
.
tx_assignmít
[
i
]){

782  
åue
;

786  
Ál£
;

787 
	}
}

798 
	$rmi_do_ã°_åx_sh‹t_π26
(*
p_ªsu…_d©a
, 
size_of_ªsu…_d©a
, *
pös_ªsu…
,

799 
size_of_pös_ªsu…
, *
limô
, 
size_of_limô
)

801 
ªtvÆ
;

802 
p_π26_d©a
[
TRX_OPEN_SHORT_DATA_SIZE
] = {0};

803 
Áûuª_˙t
 = 0;

804 
i
, 
j
;

805 
phy_pö
;

806 
boﬁ
 
do_pö_ã°
;

807 #ifde‡
SAVE_ERR_MSG


808 
îr
[
MAX_ERR_STRING_LEN
];

811 i‡(!
p_ªsu…_d©a
) {

812 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

813 #ifde‡
SAVE_ERR_MSG


814 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

815 
	`add_îr‹_msg
(
îr
);

817 
ªtvÆ
 = -
EINVAL
;

818 
exô
;

820 i‡(!
pös_ªsu…
) {

821 
	`¥ötf_e
("%†îr‹:Öös_ªsu… i†NULL\n", 
__func__
);

822 #ifde‡
SAVE_ERR_MSG


823 
	`•rötf
(
îr
, "%†îr‹:Öös_ªsu… i†NULL.\n", 
__func__
);

824 
	`add_îr‹_msg
(
îr
);

826 
ªtvÆ
 = -
EINVAL
;

827 
exô
;

829 i‡(!
limô
) {

830 
	`¥ötf_e
("%†îr‹:Üimô i†NULL\n", 
__func__
);

831 #ifde‡
SAVE_ERR_MSG


832 
	`•rötf
(
îr
, "%†îr‹:Üimô i†NULL.\n", 
__func__
);

833 
	`add_îr‹_msg
(
îr
);

835 
ªtvÆ
 = -
EINVAL
;

836 
exô
;

838 i‡(
size_of_ªsu…_d©a
 !
size_of_limô
) {

839 
	`¥ötf_e
("%†îr‹: sizêi†mism©chög\n", 
__func__
);

840 #ifde‡
SAVE_ERR_MSG


841 
	`•rötf
(
îr
, "%†îr‹: sizêi†mism©chög\n", 
__func__
);

842 
	`add_îr‹_msg
(
îr
);

844 
ªtvÆ
 = -
EINVAL
;

845 
exô
;

848 i‡(
size_of_ªsu…_d©a
 > 
TRX_OPEN_SHORT_DATA_SIZE
)

849 
size_of_ªsu…_d©a
 = 
TRX_OPEN_SHORT_DATA_SIZE
;

851 
	`¥ötf_i
("%s: sizêo‡ªsu… i†%d-byã\n", 
__func__
, 
size_of_ªsu…_d©a
);

853 i‡(
size_of_ªsu…_d©a
*8 > 
size_of_pös_ªsu…
) {

854 
	`¥ötf_e
("%sÉrror: size_of_pins_result is mismatching (size_of_pins_result = %d)\n",

855 
__func__
, 
size_of_pös_ªsu…
);

856 #ifde‡
SAVE_ERR_MSG


857 
	`•rötf
(
îr
, "%sÉrror: size_of_pins_result is mismatching (size_of_pins_result = %d)\n",

858 
__func__
, 
size_of_pös_ªsu…
);

859 
	`add_îr‹_msg
(
îr
);

861 
ªtvÆ
 = -
EINVAL
;

862 
exô
;

866 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_uˇºay
(26, 
p_π26_d©a
, 
size_of_ªsu…_d©a
);

867 i‡–
ªtvÆ
 < 0) {

868 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑï‹àπ26\n", 
__func__
);

869 #ifde‡
SAVE_ERR_MSG


870 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ26\n", 
__func__
);

871 
	`add_îr‹_msg
(
îr
);

873 
ªtvÆ
 = -
EIO
;

874 
exô
;

880 
i
 = 0; i < 
size_of_ªsu…_d©a
; i++) {

882 
p_ªsu…_d©a
[
i
] = 
p_π26_d©a
[i];

883 
	`¥ötf_i
("%s info:Ñt26 data - byte %2d, value = 0x%02x\n",

884 
__func__
, 
i
, 
p_ªsu…_d©a
[i]);

886 
j
 = 0; j < 8; j ++) {

887 
phy_pö
 = (
i
*8 + 
j
);

890 
do_pö_ã°
 =

891 
	`rmi_pö_is_rx_assig√d
(
phy_pö
Ë|| 
	`rmi_pö_is_tx_assig√d
(phy_pin);

892 i‡(
do_pö_ã°
) {

895 
pös_ªsu…
[
phy_pö
] = 
	`GET_BIT
(
p_π26_d©a
[
i
], 
j
);

897 i‡(
	`GET_BIT
(
limô
[
i
], 
j
) == 1) {

898 
	`¥ötf_i
("%s info:Öin-%2d - ignore. becauseÜimit = 0x%02x\n",

899 
__func__
, 
phy_pö
, 
limô
[
i
]);

904 i‡(–0 =
phy_pö
) || ( 1 ==Öhy_pin) || (32 ==Öhy_pin)|| (33 ==Öhy_pin))

906 i‡(
pös_ªsu…
[
phy_pö
] == 1) {

907 i‡(
	`rmi_pö_is_rx_assig√d
(
phy_pö
)) {

908 
	`¥ötf_e
("%sÉrror:Öin-%2d - fail,ÇeedÑt100Åesting.\n",

909 
__func__
, 
phy_pö
);

912 
	`¥ötf_i
("%†îr‹:Öö-%2d - faû\n", 
__func__
, 
phy_pö
);

913 #ifde‡
SAVE_ERR_MSG


914 
	`•rötf
(
îr
, "failátÖin-%2d,Ñt26 data = 0x%x,Üimit = 0x%x\n",

915 
i
, 
p_π26_d©a
[i], 
limô
[i]);

916 
	`add_îr‹_msg
(
îr
);

918 
Áûuª_˙t
 += 1;

924 i‡(
pös_ªsu…
[
phy_pö
] == 1) {

925 
	`¥ötf_i
("%†îr‹:Öö-%2d - faû\n", 
__func__
, 
phy_pö
);

926 #ifde‡
SAVE_ERR_MSG


927 
	`•rötf
(
îr
, "failátÖin-%2d,Ñt26 data = 0x%x,Üimit = 0x%x\n",

928 
i
, 
p_π26_d©a
[i], 
limô
[i]);

929 
	`add_îr‹_msg
(
îr
);

931 
Áûuª_˙t
 += 1;

936 
pös_ªsu…
[
phy_pö
] = -1;

941 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

942 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

943 
exô
:

945 
	`sy«_do_sw_ª£t
();

947  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

948 
	}
}

960 
	$rmi_do_ã°_ex_åx_sh‹t_π26100
(*
p_ªsu…_d©a_26
, 
size_of_ªsu…_d©a_26
,

961 *
p_ªsu…_d©a_100
, 
size_of_ªsu…_d©a_100
,

962 *
pös_ªsu…
, 
size_of_pös_ªsu…
,

963 *
limô_π26
, 
size_of_limô_π26
,

964 *
limô_π100
, 
size_of_limô_π100
)

966 
ªtvÆ
 = 0;

967 
pö
, 
i
, 
j
, 
rx_idx
;

968 
exãnded_pö
[4] = {0, 1, 32, 33};

969 
Áûuª_˙t_100
 = 0;

970 
Áûuª_˙t_26
 = 0;

971 
tx
 = 
g_rmi_pdt
.
tx_assig√d
;

972 
rx
 = 
g_rmi_pdt
.
rx_assig√d
;

973 
boﬁ
 
do_pö_π100_ã°
 = 
Ál£
;

974 *
p_π100_img1
 = 
NULL
;

975 *
p_π100_img2
 = 
NULL
;

976 *
p_π100_dñè
 = 
NULL
;

977 
logiˇl_pö
;

978 
d©a
 = 0;

979 
ãmp_d©a
[
TRX_OPEN_SHORT_DATA_SIZE
*8] = {0};

980 *
max_vÆ
 = 
NULL
;

981 *
mö_vÆ
 = 
NULL
;

982 
limô_èrgë
;

983 
limô_Ÿhîs
;

984 #ifde‡
SAVE_ERR_MSG


985 
îr
[
MAX_ERR_STRING_LEN
];

988 i‡(!
p_ªsu…_d©a_26
) {

989 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_d©a_26 i†NULL\n", 
__func__
);

990 #ifde‡
SAVE_ERR_MSG


991 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_d©a_26 i†NULL.\n", 
__func__
);

992 
	`add_îr‹_msg
(
îr
);

994 
ªtvÆ
 = -
EINVAL
;

995 
exô
;

997 i‡(!
p_ªsu…_d©a_100
) {

998 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_d©a_100 i†NULL\n", 
__func__
);

999 #ifde‡
SAVE_ERR_MSG


1000 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_d©a_100 i†NULL.\n", 
__func__
);

1001 
	`add_îr‹_msg
(
îr
);

1003 
ªtvÆ
 = -
EINVAL
;

1004 
exô
;

1006 i‡(!
pös_ªsu…
) {

1007 
	`¥ötf_e
("%†îr‹:Öös_ªsu… i†NULL\n", 
__func__
);

1008 #ifde‡
SAVE_ERR_MSG


1009 
	`•rötf
(
îr
, "%†îr‹:Öös_ªsu… i†NULL.\n", 
__func__
);

1010 
	`add_îr‹_msg
(
îr
);

1012 
ªtvÆ
 = -
EINVAL
;

1013 
exô
;

1016 i‡(
size_of_ªsu…_d©a_26
 > 
TRX_OPEN_SHORT_DATA_SIZE
)

1017 
size_of_ªsu…_d©a_26
 = 
TRX_OPEN_SHORT_DATA_SIZE
;

1019 
	`¥ötf_i
("%s: sizêo‡π26 i†%d-byã\n", 
__func__
, 
size_of_ªsu…_d©a_26
);

1021 i‡(
size_of_ªsu…_d©a_26
*8 > 
size_of_pös_ªsu…
) {

1022 
	`¥ötf_e
("%sÉrror: size_of_result_data_26 is mismatching (size_of_pins_result = %d)\n",

1023 
__func__
, 
size_of_pös_ªsu…
);

1024 #ifde‡
SAVE_ERR_MSG


1025 
	`•rötf
(
îr
, "%sÉrror: size_of_result_data_26 is mismatching (size_of_pins_result = %d)\n",

1026 
__func__
, 
size_of_pös_ªsu…
);

1027 
	`add_îr‹_msg
(
îr
);

1029 
ªtvÆ
 = -
EINVAL
;

1030 
exô
;

1033 i‡(
size_of_ªsu…_d©a_100
 !4*
rx
) {

1034 
	`¥ötf_e
("%sÉrror: size_of_result_data_100 is mismatching (size = %d)\n",

1035 
__func__
, 
size_of_ªsu…_d©a_100
);

1036 #ifde‡
SAVE_ERR_MSG


1037 
	`•rötf
(
îr
, "%sÉrror: size_of_result_data_100 is mismatching (size = %d)\n",

1038 
__func__
, 
size_of_ªsu…_d©a_100
);

1039 
	`add_îr‹_msg
(
îr
);

1041 
ªtvÆ
 = -
EINVAL
;

1042 
exô
;

1045 i‡((!
limô_π26
Ë|| (
size_of_limô_π26
 !
size_of_ªsu…_d©a_26
)) {

1046 
	`¥ötf_e
("%†îr‹:Üimô_π26 i†övÆid (sizê%d)\n", 
__func__
, 
size_of_limô_π26
);

1047 #ifde‡
SAVE_ERR_MSG


1048 
	`•rötf
(
îr
, "%†îr‹:Üimô_π26 i†övÆid (sizê%d)\n", 
__func__
, 
size_of_limô_π26
);

1049 
	`add_îr‹_msg
(
îr
);

1051 
ªtvÆ
 = -
EINVAL
;

1052 
exô
;

1055 i‡((!
limô_π100
Ë|| (
size_of_limô_π100
 != 2)) {

1056 
	`¥ötf_e
("%†îr‹:Üimô_π100 i†övÆid (sizê%d)\n", 
__func__
, 
size_of_limô_π100
);

1057 #ifde‡
SAVE_ERR_MSG


1058 
	`•rötf
(
îr
, "%†îr‹:Üimô_π26 i†övÆid (sizê%d)\n", 
__func__
, 
size_of_limô_π100
);

1059 
	`add_îr‹_msg
(
îr
);

1061 
ªtvÆ
 = -
EINVAL
;

1062 
exô
;

1066 
Áûuª_˙t_26
 = 
	`rmi_do_ã°_åx_sh‹t_π26
(
p_ªsu…_d©a_26
, 
size_of_ªsu…_d©a_26
,

1067 
pös_ªsu…
, 
size_of_pös_ªsu…
,

1068 
limô_π26
, 
size_of_limô_π26
);

1070 
i
 = 0; i < ((
exãnded_pö
)/()); i++) {

1071 
do_pö_π100_ã°
 |(
pös_ªsu…
[
exãnded_pö
[
i
]] == 1);

1076 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
c⁄åﬁ_ba£_addr
, &
d©a
, 1);

1077 i‡(
ªtvÆ
 < 0) {

1078 
	`¥ötf_e
("%sÉrror: failÅoÑead f54 control baseÑegister\n",

1079 
__func__
);

1080 #ifde‡
SAVE_ERR_MSG


1081 
	`•rötf
(
îr
, "error: failÅoÑead f54 control baseÑegister\n");

1082 
	`add_îr‹_msg
(
îr
);

1084 
ªtvÆ
 = -
EINVAL
;

1085 
exô
;

1087 
d©a
 = (
uöt8_t
)( data | 0x02 );

1088 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
F54
.
c⁄åﬁ_ba£_addr
, &
d©a
, 1);

1089 i‡(
ªtvÆ
 < 0) {

1090 
	`¥ötf_e
("%†îr‹: faûÅÿ£àno_sˇn\n", 
__func__
);

1091 #ifde‡
SAVE_ERR_MSG


1092 
	`•rötf
(
îr
, "error: failÅo setÇo_scan\n");

1093 
	`add_îr‹_msg
(
îr
);

1095 
ªtvÆ
 = -
EINVAL
;

1096 
exô
;

1100 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_96
.
addªss
,

1101 &
ãmp_d©a
[0], 
g_rmi_pdt
.
rx_assig√d
);

1102 i‡(
ªtvÆ
 < 0) {

1103 
	`¥ötf_e
("%sÉrror: failÅo configureÜocal cbcÅo 0\n",

1104 
__func__
);

1105 #ifde‡
SAVE_ERR_MSG


1106 
	`•rötf
(
îr
, "error: failÅo configureÜocal cbcÅo 0\n");

1107 
	`add_îr‹_msg
(
îr
);

1109 
ªtvÆ
 = -
EINVAL
;

1110 
exô
;

1114 
ªtvÆ
 = 
	`rmi_f54_f‹˚_upd©e
();

1115 i‡–
ªtvÆ
 < 0 ) {

1116 
	`¥ötf_e
("%sÉrror: failÅo do force update\n",

1117 
__func__
);

1118 #ifde‡
SAVE_ERR_MSG


1119 
	`•rötf
(
îr
, "error: failÅo do force update\n");

1120 
	`add_îr‹_msg
(
îr
);

1122 
ªtvÆ
 = -
EINVAL
;

1123 
exô
;

1127 
p_π100_img1
 = 
	`ˇŒoc
((
size_t
)(
tx
 * 
rx
), ());

1128 i‡(!
p_π100_img1
) {

1129 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π100_img1\n", 
__func__
);

1130 #ifde‡
SAVE_ERR_MSG


1131 
	`•rötf
(
îr
, "error: failÅoállocate memory forÖ_rt100_img1\n");

1132 
	`add_îr‹_msg
(
îr
);

1134 
ªtvÆ
 = -
ENOMEM
;

1135 
exô
;

1138 
p_π100_img2
 = 
	`ˇŒoc
((
size_t
)(
tx
 * 
rx
), ());

1139 i‡(!
p_π100_img2
) {

1140 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π100_img2\n", 
__func__
);

1141 #ifde‡
SAVE_ERR_MSG


1142 
	`•rötf
(
îr
, "error: failÅoállocate memory forÖ_rt100_img2\n");

1143 
	`add_îr‹_msg
(
îr
);

1145 
ªtvÆ
 = -
ENOMEM
;

1146 
exô
;

1149 
p_π100_dñè
 = 
	`ˇŒoc
((
size_t
)(
tx
 * 
rx
), ());

1150 i‡(!
p_π100_dñè
) {

1151 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π100_dñè\n", 
__func__
);

1152 #ifde‡
SAVE_ERR_MSG


1153 
	`•rötf
(
îr
, "error: failÅoállocate memory forÖ_rt100_delta\n");

1154 
	`add_îr‹_msg
(
îr
);

1156 
ªtvÆ
 = -
ENOMEM
;

1157 
exô
;

1160 
max_vÆ
 = 
	`ˇŒoc
((
size_t
)
rx
, ());

1161 i‡(!
max_vÆ
) {

1162 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹ max_vÆ\n", 
__func__
);

1163 #ifde‡
SAVE_ERR_MSG


1164 
	`•rötf
(
îr
, "error: failÅoállocate memory for max_val\n");

1165 
	`add_îr‹_msg
(
îr
);

1167 
ªtvÆ
 = -
ENOMEM
;

1168 
exô
;

1171 
mö_vÆ
 = 
	`ˇŒoc
((
size_t
)
rx
, ());

1172 i‡(!
mö_vÆ
) {

1173 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹ mö_vÆ\n", 
__func__
);

1174 #ifde‡
SAVE_ERR_MSG


1175 
	`•rötf
(
îr
, "error: failÅoállocate memory for min_val\n");

1176 
	`add_îr‹_msg
(
îr
);

1178 
ªtvÆ
 = -
ENOMEM
;

1179 
exô
;

1183 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_‰ame
(100, 
p_π100_img1
, (
tx
 * 
rx
), 
Ál£
);

1184 i‡–
ªtvÆ
 < 0) {

1185 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑï‹àπ100 image1\n", 
__func__
);

1186 #ifde‡
SAVE_ERR_MSG


1187 
	`•rötf
(
îr
, "error: failÅoÑeadÑeportÑt100 image1\n");

1188 
	`add_îr‹_msg
(
îr
);

1190 
ªtvÆ
 = -
EIO
;

1191 
exô
;

1194 
limô_èrgë
 = 
limô_π100
[0];

1195 
limô_Ÿhîs
 = 
limô_π100
[1];

1197 
Áûuª_˙t_100
 = 0;

1201 
pö
 = 0;Öö < ((
exãnded_pö
)/());Öin++) {

1203 
i
 = 0; i < 
rx
; i++) {

1204 
max_vÆ
[
i
] = 0;

1205 
mö_vÆ
[
i
] = 5000;

1208 
logiˇl_pö
 = 
	`rmi_f54_gë_logiˇl_rx
(
exãnded_pö
[
pö
]);

1209 i‡–
logiˇl_pö
 == 0xff ) {

1210 
pös_ªsu…
[
exãnded_pö
[
pö
]] = -1;

1214 
	`¥ötf_i
("%s info:Öin-%d,ÜogicalÖin %d \n",

1215 
__func__
, 
exãnded_pö
[
pö
], 
logiˇl_pö
);

1218 
ãmp_d©a
[
logiˇl_pö
] = 0x0f;

1219 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_96
.
addªss
,

1220 &
ãmp_d©a
[0], 
g_rmi_pdt
.
rx_assig√d
);

1221 i‡(
ªtvÆ
 < 0) {

1222 
	`¥ötf_e
("%sÉrror: failÅoádjustÜocal cbc forÜogical_pin = %d\n",

1223 
__func__
, 
logiˇl_pö
);

1224 #ifde‡
SAVE_ERR_MSG


1225 
	`•rötf
(
îr
, "error: failÅoádjustÜocal cbc forÜogical_pin = %d\n",

1226 
logiˇl_pö
);

1227 
	`add_îr‹_msg
(
îr
);

1229 
ªtvÆ
 = -
EINVAL
;

1230 
exô
;

1232 
	`mem£t
(
ãmp_d©a
, 0x00, (temp_data));

1235 
ªtvÆ
 = 
	`rmi_f54_f‹˚_upd©e
();

1236 i‡–
ªtvÆ
 < 0 ) {

1237 
	`¥ötf_e
("%sÉrror: failÅo do force update onÜogical_pin = %d\n",

1238 
__func__
, 
logiˇl_pö
);

1239 #ifde‡
SAVE_ERR_MSG


1240 
	`•rötf
(
îr
, "error: failÅo do force update onÜogical_pin = %d\n",

1241 
logiˇl_pö
);

1242 
	`add_îr‹_msg
(
îr
);

1244 
ªtvÆ
 = -
EINVAL
;

1245 
exô
;

1249 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_‰ame
(100, 
p_π100_img2
, (
tx
 * 
rx
), 
Ál£
);

1250 i‡–
ªtvÆ
 < 0) {

1251 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑï‹àπ100 image2\n", 
__func__
);

1252 #ifde‡
SAVE_ERR_MSG


1253 
	`•rötf
(
îr
, "error: failÅoÑeadÑeportÑt100 image2\n");

1254 
	`add_îr‹_msg
(
îr
);

1256 
ªtvÆ
 = -
EIO
;

1257 
exô
;

1261  
i
 = 0; i < 
tx
; i++ ) {

1262  
j
 = 0; j < 
rx
; j++ ) {

1263 
p_π100_dñè
[
i
 * 
rx
 + 
j
] =

1264 
	`abs
–
p_π100_img1
[
i
 * 
rx
 + 
j
] - 
p_π100_img2
[i *Ñx + j] );

1266 i‡–
max_vÆ
[
j
] < 
p_π100_dñè
[
i
 * 
rx
 + j] )

1267 
max_vÆ
[
j
] = 
p_π100_dñè
[
i
 * 
rx
 + j];

1269 i‡–
mö_vÆ
[
j
] > 
p_π100_dñè
[
i
 * 
rx
 + j] )

1270 
mö_vÆ
[
j
] = 
p_π100_dñè
[
i
 * 
rx
 + j];

1277  
rx_idx
 = 0;Ñx_idx < 
rx
;Ñx_idx++ )

1281 i‡–
rx_idx
 =
logiˇl_pö
 )

1283 
p_ªsu…_d©a_100
[
pö
*
rx
 + 
rx_idx
] = 
mö_vÆ
[rx_idx];

1285 i‡–
mö_vÆ
[
rx_idx
] < 
limô_èrgë
 )

1287 
	`¥ötf_e
("%sÉrror: failátÉxtendedÖin %2d (targetÜogicalÖin-%2d) data = %5d,Üimit min = %5d\n",

1288 
__func__
, 
exãnded_pö
[
pö
], 
rx_idx
, 
mö_vÆ
[rx_idx], 
limô_èrgë
);

1289 #ifde‡
SAVE_ERR_MSG


1290 
	`•rötf
(
îr
, "failátÉxtendedÖin %2d (targetÜogicalÖin-%2d) data = %5d,Üimit min = %5d\n",

1291 
exãnded_pö
[
pö
], 
rx_idx
, 
mö_vÆ
[rx_idx], 
limô_èrgë
);

1292 
	`add_îr‹_msg
(
îr
);

1294 
Áûuª_˙t_100
 += 1;

1301 
p_ªsu…_d©a_100
[
pö
*
rx
 + 
rx_idx
] = 
max_vÆ
[rx_idx];

1303 i‡–
max_vÆ
[
rx_idx
] >
limô_Ÿhîs
 )

1305 
	`¥ötf_e
("%sÉrror: failátÉxtendedÖin %2d (otherÜogicalÖin-%2d) data = %5d,Üimit max = %5d\n",

1306 
__func__
, 
exãnded_pö
[
pö
], 
rx_idx
, 
max_vÆ
[rx_idx], 
limô_Ÿhîs
);

1307 #ifde‡
SAVE_ERR_MSG


1308 
	`•rötf
(
îr
, "failátÉxtendedÖin %2d (otherÜogicalÖin-%2d) data = %5d,Üimit max = %5d\n",

1309 
exãnded_pö
[
pö
], 
rx_idx
, 
max_vÆ
[rx_idx], 
limô_Ÿhîs
);

1310 
	`add_îr‹_msg
(
îr
);

1312 
Áûuª_˙t_100
 += 1;

1317 i‡(
Áûuª_˙t_100
 == 0) {

1318 
pös_ªsu…
[
exãnded_pö
[
pö
]] = 0;

1321 
pös_ªsu…
[
exãnded_pö
[
pö
]] = 1;

1326 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1327 
__func__
, (
Áûuª_˙t_26
 + 
Áûuª_˙t_100
 == 0)?"pass":"fail", failure_cnt_26 + failure_cnt_100);

1329 
exô
:

1331 
	`sy«_do_sw_ª£t
();

1333 if(
p_π100_img1
)

1334 
	`‰ì
(
p_π100_img1
);

1335 if(
p_π100_img2
)

1336 
	`‰ì
(
p_π100_img2
);

1337 if(
p_π100_dñè
)

1338 
	`‰ì
(
p_π100_dñè
);

1339 if(
max_vÆ
)

1340 
	`‰ì
(
max_vÆ
);

1341 if(
mö_vÆ
)

1342 
	`‰ì
(
mö_vÆ
);

1344  (
ªtvÆ
 < 0)?ÑëvÆ : (
Áûuª_˙t_100
 + 
Áûuª_˙t_26
);

1345 
	}
}

1356 
	$rmi_do_ã°_abs_›í_π63
(*
p_ªsu…_img
, 
size_of_ªsu…_d©a
,

1357 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

1359 
ªtvÆ
 = 0;

1360 *
p_d©a_32
;

1361 *
p_π63_d©a
 = 
NULL
;

1362 
i
, 
j
;

1363 
Áûuª_˙t
 = 0;

1364 
tx
 = 
g_rmi_pdt
.
tx_assig√d
;

1365 
rx
 = 
g_rmi_pdt
.
rx_assig√d
;

1366 
d©a_size
 = (
tx
 + 
rx
) * 4;

1367 
TEST_SAMPLE_COUNT
 = 10;

1368 *
p_ã°_buf„r
 = 
NULL
;

1369 
limô_mö_d©a
;

1370 
limô_max_d©a
;

1371 #ifde‡
SAVE_ERR_MSG


1372 
îr
[
MAX_ERR_STRING_LEN
];

1375 i‡(!
p_ªsu…_img
) {

1376 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1377 #ifde‡
SAVE_ERR_MSG


1378 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1379 
	`add_îr‹_msg
(
îr
);

1381 
ªtvÆ
 = -
EINVAL
;

1382 
exô
;

1384 i‡(
size_of_ªsu…_d©a
 !
rx
 + 
tx
) {

1385 
	`¥ötf_e
("%sÉrror: size ofÑesult is mismatching, (rx,Åx) = (%d, %d)\n",

1386 
__func__
, 
rx
, 
tx
);

1387 #ifde‡
SAVE_ERR_MSG


1388 
	`•rötf
(
îr
, "%s:Érror: size ofÑesult is mismatching, (rx,Åx) = (%d, %d)\n",

1389 
__func__
, 
rx
, 
tx
);

1390 
	`add_îr‹_msg
(
îr
);

1392 
ªtvÆ
 = -
EINVAL
;

1393 
exô
;

1395 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

1396 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

1397 
__func__
, 
size_limô_mö
, 
size_limô_max
);

1398 #ifde‡
SAVE_ERR_MSG


1399 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

1400 
	`add_îr‹_msg
(
îr
);

1402 
ªtvÆ
 = -
EINVAL
;

1403 
exô
;

1406 
p_π63_d©a
 = 
	`ˇŒoc
((
size_t
)
d©a_size
, ());

1407 i‡(!
p_π63_d©a
) {

1408 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π63_d©a\n", 
__func__
);

1409 #ifde‡
SAVE_ERR_MSG


1410 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π63_d©a\n", 
__func__
);

1411 
	`add_îr‹_msg
(
îr
);

1413 
ªtvÆ
 = -
ENOMEM
;

1414 
exô
;

1417 
p_ã°_buf„r
 = 
	`ˇŒoc
((
size_t
)(
tx
 + 
rx
), ());

1418 i‡(!
p_ã°_buf„r
) {

1419 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_ã°_buf„r\n", 
__func__
);

1420 #ifde‡
SAVE_ERR_MSG


1421 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_ã°_buf„r\n", 
__func__
);

1422 
	`add_îr‹_msg
(
îr
);

1424 
ªtvÆ
 = -
ENOMEM
;

1425 
exô
;

1429 
i
 = 0; i < 
TEST_SAMPLE_COUNT
; i++) {

1431 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_uˇºay
(63, 
p_π63_d©a
, 
d©a_size
);

1432 i‡–
ªtvÆ
 < 0) {

1433 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑï‹àπ63\n", 
__func__
);

1434 #ifde‡
SAVE_ERR_MSG


1435 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ63\n", 
__func__
);

1436 
	`add_îr‹_msg
(
îr
);

1438 
ªtvÆ
 = -
EIO
;

1439 
exô
;

1442 
p_d©a_32
 = (*)&
p_π63_d©a
[0];

1443 
j
 = 0; j < (
tx
 + 
rx
); j++) {

1444 
p_ã°_buf„r
[
j
] +(*
p_d©a_32
) >> 2;

1445 
p_d©a_32
++;

1450 
i
 = 0; i < (
tx
 + 
rx
); i++) {

1451 
p_ã°_buf„r
[
i
] =Ö_ã°_buf„r[i]/
TEST_SAMPLE_COUNT
;

1456 
i
 = 0; i < (
tx
 + 
rx
); i++) {

1458 
p_ªsu…_img
[
i
] = 
p_ã°_buf„r
[i];

1461 i‡(
size_limô_mö
 =(
tx
 + 
rx
)) {

1462 
limô_mö_d©a
 = 
limô_mö
[
i
];

1465 
limô_mö_d©a
 = 
limô_mö
[0];

1468 i‡(
size_limô_max
 =(
tx
 + 
rx
)) {

1469 
limô_max_d©a
 = 
limô_max
[
i
];

1472 
limô_max_d©a
 = 
limô_max
[0];

1476 i‡(
p_ã°_buf„r
[
i
] < 
limô_mö_d©a
) {

1477 
Áûuª_˙t
 += 1;

1478 
	`¥ötf_e
("%†îr‹: faûáàch%2d d©®%5d,Üimô mö = %5d\n", 
__func__
,

1479 
i
, 
p_ã°_buf„r
[i], 
limô_mö_d©a
);

1480 #ifde‡
SAVE_ERR_MSG


1481 
	`•rötf
(
îr
, "failát ch%2d data = %5d,Üimit min = %5d\n",

1482 
i
, 
p_ã°_buf„r
[i], 
limô_mö_d©a
);

1483 
	`add_îr‹_msg
(
îr
);

1487 i‡(
p_ã°_buf„r
[
i
] > 
limô_max_d©a
) {

1488 
Áûuª_˙t
 += 1;

1489 
	`¥ötf_e
("%†îr‹: faûáàch%2d d©®%5d,Üimô max = %5d\n", 
__func__
,

1490 
i
, 
p_ã°_buf„r
[i], 
limô_max_d©a
);

1491 #ifde‡
SAVE_ERR_MSG


1492 
	`•rötf
(
îr
, "failát ch%2d data = %5d,Üimit max = %5d\n",

1493 
i
, 
p_ã°_buf„r
[i], 
limô_max_d©a
);

1494 
	`add_îr‹_msg
(
îr
);

1500 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1501 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1502 
exô
:

1504 
	`sy«_do_sw_ª£t
();

1506 if(
p_π63_d©a
)

1507 
	`‰ì
(
p_π63_d©a
);

1508 if(
p_ã°_buf„r
)

1509 
	`‰ì
(
p_ã°_buf„r
);

1511  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1512 
	}
}

1523 
	$rmi_do_ã°_adc_ønge_π23
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1524 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

1526 
ªtvÆ
 = 0;

1527 
i
, 
j
, 
off£t
, 
idx_limô
;

1528 *
p_π23_d©a
 = 
NULL
;

1529 
Áûuª_˙t
 = 0;

1530 
tx
 = 
g_rmi_pdt
.
tx_assig√d
;

1531 
rx
 = 
g_rmi_pdt
.
rx_assig√d
;

1532 
d©a_size
;

1533 *
p_d©a_16
;

1534 
limô_mö_d©a
;

1535 
limô_max_d©a
;

1536 #ifde‡
SAVE_ERR_MSG


1537 
îr
[
MAX_ERR_STRING_LEN
];

1540 i‡(!
p_ªsu…_img
) {

1541 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1542 #ifde‡
SAVE_ERR_MSG


1543 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1544 
	`add_îr‹_msg
(
îr
);

1546 
ªtvÆ
 = -
EINVAL
;

1547 
exô
;

1549 i‡(((
tx
 !
ªsu…_img_cﬁ
Ë&& (tx !
ªsu…_img_row
)) ||

1550 ((
rx
 !
ªsu…_img_cﬁ
Ë&& (rx !
ªsu…_img_row
))) {

1551 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî (tx,rxË(%d, %d)\n", 
__func__
, 
tx
, 
rx
);

1552 #ifde‡
SAVE_ERR_MSG


1553 
	`•rötf
(
îr
, "%s:Éº‹: invÆidÖ¨amëî (tx,rxË(%d, %d)\n", 
__func__
, 
tx
, 
rx
);

1554 
	`add_îr‹_msg
(
îr
);

1556 
ªtvÆ
 = -
EINVAL
;

1557 
exô
;

1559 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

1560 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

1561 
__func__
, 
size_limô_mö
, 
size_limô_max
);

1562 #ifde‡
SAVE_ERR_MSG


1563 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

1564 
	`add_îr‹_msg
(
îr
);

1566 
ªtvÆ
 = -
EINVAL
;

1567 
exô
;

1570 i‡(
g_rmi_pdt
.
f54_quîy
.
has_sig«l_˛¨ôy
) {

1571 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_41
.
addªss
,

1572 
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_41
.
d©a
,

1573 (
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_41
.
d©a
));

1574 i‡–
ªtvÆ
 < 0) {

1575 
	`¥ötf_e
("%†îr‹: faûÅÿªad f54_˘æ41\n", 
__func__
);

1576 #ifde‡
SAVE_ERR_MSG


1577 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad f54_˘æ41\n", 
__func__
);

1578 
	`add_îr‹_msg
(
îr
);

1580 
ªtvÆ
 = -
EIO
;

1581 
exô
;

1583 i‡(!
g_rmi_pdt
.
f54_c⁄åﬁ
.
ªg_41
.
no_sig«l_˛¨ôy
) {

1584 i‡(
tx
 % 4)

1585 
tx
 += 4 - (tx % 4);

1588 
d©a_size
 = 2 * 
tx
 * 
rx
;

1589 
	`¥ötf_i
("%†öfo: d©a_sizê%d (tx,rxË(%d,%d)\n", 
__func__
, 
d©a_size
, 
tx
 , 
rx
);

1591 
p_π23_d©a
 = 
	`ˇŒoc
((
size_t
)
d©a_size
, ());

1592 i‡(!
p_π23_d©a
) {

1593 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π23_d©a\n", 
__func__
);

1594 #ifde‡
SAVE_ERR_MSG


1595 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π23_d©a\n", 
__func__
);

1596 
	`add_îr‹_msg
(
îr
);

1598 
ªtvÆ
 = -
ENOMEM
;

1599 
exô
;

1603 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_uˇºay
(23, 
p_π23_d©a
, 
d©a_size
);

1604 i‡–
ªtvÆ
 < 0) {

1605 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑï‹àπ23\n", 
__func__
);

1606 #ifde‡
SAVE_ERR_MSG


1607 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ23\n", 
__func__
);

1608 
	`add_îr‹_msg
(
îr
);

1610 
ªtvÆ
 = -
EIO
;

1611 
exô
;

1614 
	`¥ötf_i
("%†öfo: (cﬁ,rowË(%d,%d)\n", 
__func__
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
);

1616 
p_d©a_16
 = (*)&
p_π23_d©a
[0];

1617 
i
 = 0; i < 
g_rmi_pdt
.
tx_assig√d
; i++) {

1618 
j
 = 0; j < 
g_rmi_pdt
.
rx_assig√d
; j++) {

1620 i‡(
g_rmi_pdt
.
rx_assig√d
 > g_rmi_pdt.
tx_assig√d
)

1621 
off£t
 = 
i
*
g_rmi_pdt
.
rx_assig√d
 + 
j
;

1623 
off£t
 = 
j
*
g_rmi_pdt
.
tx_assig√d
 + 
i
;

1625 
p_ªsu…_img
[
off£t
] = *
p_d©a_16
;

1629 
p_d©a_16
++;

1635 
idx_limô
 = 0;

1636 
i
 = 0; i < 
ªsu…_img_cﬁ
; i++) {

1637 
j
 = 0; j < 
ªsu…_img_row
; j++) {

1640 i‡(
size_limô_mö
 =(
ªsu…_img_cﬁ
* 
ªsu…_img_row
)) {

1641 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

1644 
limô_mö_d©a
 = 
limô_mö
[0];

1647 i‡(
size_limô_max
 =(
ªsu…_img_cﬁ
* 
ªsu…_img_row
)) {

1648 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

1651 
limô_max_d©a
 = 
limô_max
[0];

1655 i‡(
p_ªsu…_img
[
i
 * 
ªsu…_img_row
 + 
j
] < 
limô_mö_d©a
) {

1656 
Áûuª_˙t
 += 1;

1658 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

1659 
i
, 
j
, 
p_ªsu…_img
[ò* 
ªsu…_img_row
 + j], 
limô_mö_d©a
);

1660 #ifde‡
SAVE_ERR_MSG


1661 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

1662 
i
, 
j
, 
p_ªsu…_img
[ò* 
ªsu…_img_row
 + j], 
limô_mö_d©a
);

1663 
	`add_îr‹_msg
(
îr
);

1667 i‡(
p_ªsu…_img
[
i
 * 
ªsu…_img_row
 + 
j
] > 
limô_max_d©a
) {

1668 
Áûuª_˙t
 += 1;

1670 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô max = %5d\n", 
__func__
,

1671 
i
, 
j
, 
p_ªsu…_img
[ò* 
ªsu…_img_row
 + j], 
limô_max_d©a
);

1672 #ifde‡
SAVE_ERR_MSG


1673 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

1674 
i
, 
j
, 
p_ªsu…_img
[ò* 
ªsu…_img_row
 + j], 
limô_max_d©a
);

1675 
	`add_îr‹_msg
(
îr
);

1679 
idx_limô
 += 1;

1683 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1684 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1685 
exô
:

1687 
	`sy«_do_sw_ª£t
();

1689 i‡(
p_π23_d©a
)

1690 
	`‰ì
(
p_π23_d©a
);

1692  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1693 
	}
}

1704 
	$rmi_do_ã°_£ns‹_•ìd_π22
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1705 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

1707 
ªtvÆ
 = 0;

1708 
i
, 
j
, 
idx_limô
;

1709 
Áûuª_˙t
 = 0;

1710 *
p_d©a_π22
 = 
NULL
;

1711 
d©a
;

1712 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

1713 
row
 = 
	`sy«_gë_image_rows
(
åue
);

1714 
limô_mö_d©a
;

1715 
limô_max_d©a
;

1716 #ifde‡
SAVE_ERR_MSG


1717 
îr
[
MAX_ERR_STRING_LEN
];

1720 i‡(!
p_ªsu…_img
) {

1721 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1722 #ifde‡
SAVE_ERR_MSG


1723 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1724 
	`add_îr‹_msg
(
îr
);

1726 
ªtvÆ
 = -
EINVAL
;

1727 
exô
;

1729 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

1730 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1731 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1732 #ifde‡
SAVE_ERR_MSG


1733 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1734 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1735 
	`add_îr‹_msg
(
îr
);

1737 
ªtvÆ
 = -
EINVAL
;

1738 
exô
;

1740 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

1741 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

1742 
__func__
, 
size_limô_mö
, 
size_limô_max
);

1743 #ifde‡
SAVE_ERR_MSG


1744 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

1745 
	`add_îr‹_msg
(
îr
);

1747 
ªtvÆ
 = -
EINVAL
;

1748 
exô
;

1751 
p_d©a_π22
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

1752 i‡(!
p_d©a_π22
) {

1753 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π22\n", 
__func__
);

1754 #ifde‡
SAVE_ERR_MSG


1755 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹Ö_d©a_π22\n", 
__func__
);

1756 
	`add_îr‹_msg
(
îr
);

1758 
ªtvÆ
 = -
ENOMEM
;

1759 
exô
;

1763 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_‰ame
(22, 
p_d©a_π22
, (
cﬁ
 * 
row
), 
åue
);

1764 i‡–
ªtvÆ
 < 0) {

1765 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑï‹àπ22\n", 
__func__
);

1766 #ifde‡
SAVE_ERR_MSG


1767 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ22\n", 
__func__
);

1768 
	`add_îr‹_msg
(
îr
);

1770 
ªtvÆ
 = -
EIO
;

1771 
exô
;

1776 
idx_limô
 = 0;

1777 
i
 = 0; i < 
cﬁ
; i++) {

1778 
j
 = 0; j < 
row
; j++) {

1779 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
p_d©a_π22
[i *Ñow + j];

1780 
d©a
 = 
p_ªsu…_img
[
i
 * 
row
 + 
j
];

1783 i‡(
size_limô_mö
 =(
cﬁ
 * 
row
)) {

1784 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

1787 
limô_mö_d©a
 = 
limô_mö
[0];

1790 i‡(
size_limô_max
 =(
cﬁ
 * 
row
)) {

1791 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

1794 
limô_max_d©a
 = 
limô_max
[0];

1798 i‡(
d©a
 < 
limô_mö_d©a
) {

1799 
Áûuª_˙t
 += 1;

1801 
	`¥ötf_e
("%s: faûáà(%2d, %2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

1802 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

1803 #ifde‡
SAVE_ERR_MSG


1804 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

1805 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

1806 
	`add_îr‹_msg
(
îr
);

1810 i‡(
d©a
 > 
limô_max_d©a
) {

1811 
Áûuª_˙t
 += 1;

1813 
	`¥ötf_e
("%s: faûáà(%2d, %2dËd©®%5d,Üimô max = %5d\n", 
__func__
,

1814 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

1815 #ifde‡
SAVE_ERR_MSG


1816 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

1817 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

1818 
	`add_îr‹_msg
(
îr
);

1822 
idx_limô
 += 1;

1826 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1827 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1828 
exô
:

1830 
	`sy«_do_sw_ª£t
();

1832 i‡(
p_d©a_π22
)

1833 
	`‰ì
(
p_d©a_π22
);

1835  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1836 
	}
}

1847 
	$rmi_do_ã°_ègsmoi°uª_π76
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1848 *
limô_max
, 
size_limô_max
)

1850 
ªtvÆ
 = 0;

1851 
i
, 
j
, 
idx_limô
;

1852 
Áûuª_˙t
 = 0;

1853 *
p_d©a_π76
 = 
NULL
;

1854 
d©a
;

1855 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

1856 
row
 = 
	`sy«_gë_image_rows
(
åue
);

1857 
limô_max_d©a
;

1858 #ifde‡
SAVE_ERR_MSG


1859 
îr
[
MAX_ERR_STRING_LEN
];

1862 i‡(!
p_ªsu…_img
) {

1863 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1864 #ifde‡
SAVE_ERR_MSG


1865 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1866 
	`add_îr‹_msg
(
îr
);

1868 
ªtvÆ
 = -
EINVAL
;

1869 
exô
;

1871 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

1872 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1873 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1874 #ifde‡
SAVE_ERR_MSG


1875 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1876 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1877 
	`add_îr‹_msg
(
îr
);

1879 
ªtvÆ
 = -
EINVAL
;

1880 
exô
;

1882 i‡((!
limô_max
Ë|| (0 =
size_limô_max
)) {

1883 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî, sizêlimô max = %d\n", 
__func__
, 
size_limô_max
);

1884 #ifde‡
SAVE_ERR_MSG


1885 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

1886 
	`add_îr‹_msg
(
îr
);

1888 
ªtvÆ
 = -
EINVAL
;

1889 
exô
;

1893 
p_d©a_π76
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

1894 i‡(!
p_d©a_π76
) {

1895 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_d©a_π76\n", 
__func__
);

1896 #ifde‡
SAVE_ERR_MSG


1897 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_d©a_π76\n", 
__func__
);

1898 
	`add_îr‹_msg
(
îr
);

1900 
ªtvÆ
 = -
ENOMEM
;

1901 
exô
;

1905 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_‰ame
(76, 
p_d©a_π76
, (
cﬁ
 * 
row
), 
åue
);

1906 i‡–
ªtvÆ
 < 0) {

1907 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑï‹àπ76\n", 
__func__
);

1908 #ifde‡
SAVE_ERR_MSG


1909 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ76\n", 
__func__
);

1910 
	`add_îr‹_msg
(
îr
);

1912 
ªtvÆ
 = -
EIO
;

1913 
exô
;

1918 
idx_limô
 = 0;

1919 
i
 = 0; i < 
cﬁ
; i++) {

1920 
j
 = 0; j < 
row
; j++) {

1921 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
p_d©a_π76
[i *Ñow + j];

1922 
d©a
 = 
p_ªsu…_img
[
i
 * 
row
 + 
j
];

1925 i‡(
size_limô_max
 =(
cﬁ
* 
row
)) {

1926 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

1929 
limô_max_d©a
 = 
limô_max
[0];

1933 i‡(
d©a
 > 
limô_max_d©a
) {

1934 
Áûuª_˙t
 += 1;

1936 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô max = %5d\n", 
__func__
,

1937 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

1938 #ifde‡
SAVE_ERR_MSG


1939 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

1940 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

1941 
	`add_îr‹_msg
(
îr
);

1945 
idx_limô
 += 1;

1949 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1950 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1951 
exô
:

1953 
	`sy«_do_sw_ª£t
();

1955 i‡(
p_d©a_π76
)

1956 
	`‰ì
(
p_d©a_π76
);

1958  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1959 
	}
}

1970 
	$rmi_do_ã°_π133
(*
p_ªsu…_img
, 
size_of_ªsu…_d©a
,

1971 *
limô_max
, 
size_limô_max
)

1973 
ªtvÆ
 = 0;

1974 
i
, 
j
, 
idx_limô
;

1975 
rx
 = 
g_rmi_pdt
.
rx_assig√d
;

1976 
Áûuª_˙t
 = 0;

1977 *
p_π133_d©a
 = 
NULL
;

1978 
limô_max_d©a
;

1979 
d©a_size
;

1980 #ifde‡
SAVE_ERR_MSG


1981 
îr
[
MAX_ERR_STRING_LEN
];

1984 i‡(!
p_ªsu…_img
) {

1985 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1986 #ifde‡
SAVE_ERR_MSG


1987 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1988 
	`add_îr‹_msg
(
îr
);

1990 
ªtvÆ
 = -
EINVAL
;

1991 
exô
;

1993 i‡(
rx
 !
size_of_ªsu…_d©a
) {

1994 
	`¥ötf_e
("%†îr‹:Ñesu… sizêi†mism©chög\n", 
__func__
);

1995 #ifde‡
SAVE_ERR_MSG


1996 
	`•rötf
(
îr
, "%s:Éº‹:Ñesu… sizêi†mism©chög\n", 
__func__
);

1997 
	`add_îr‹_msg
(
îr
);

1999 
ªtvÆ
 = -
EINVAL
;

2000 
exô
;

2002 i‡((!
limô_max
Ë|| (0 =
size_limô_max
)) {

2003 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî, sizêlimô max = %d\n", 
__func__
, 
size_limô_max
);

2004 #ifde‡
SAVE_ERR_MSG


2005 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

2006 
	`add_îr‹_msg
(
îr
);

2008 
ªtvÆ
 = -
EINVAL
;

2009 
exô
;

2012 
d©a_size
 = 2 * 
rx
;

2014 
p_π133_d©a
 = 
	`ˇŒoc
((
size_t
)
d©a_size
, ());

2015 i‡(!
p_π133_d©a
) {

2016 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π133_d©a\n", 
__func__
);

2017 #ifde‡
SAVE_ERR_MSG


2018 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π133_d©a\n", 
__func__
);

2019 
	`add_îr‹_msg
(
îr
);

2021 
ªtvÆ
 = -
ENOMEM
;

2022 
exô
;

2025 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_uˇºay
(133, 
p_π133_d©a
, 
d©a_size
);

2026 i‡–
ªtvÆ
 < 0) {

2027 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑï‹àπ133\n", 
__func__
);

2028 #ifde‡
SAVE_ERR_MSG


2029 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ133\n", 
__func__
);

2030 
	`add_îr‹_msg
(
îr
);

2032 
ªtvÆ
 = -
EIO
;

2033 
exô
;

2037 
j
 = 0;

2038 
i
 = 0; i < 
rx
; i++) {

2039 
p_ªsu…_img
[
j
] = ( )
p_π133_d©a
[j] | ( ( )p_rt133_data[j + 1] << 8 );

2040 
j
 += 2;

2045 
idx_limô
 = 0;

2046 
i
 = 0; i < 
rx
; i++) {

2049 i‡(
size_limô_max
 =
rx
) {

2050 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

2053 
limô_max_d©a
 = 
limô_max
[0];

2057 i‡(
p_ªsu…_img
[
i
] > 
limô_max_d©a
) {

2058 
Áûuª_˙t
 += 1;

2060 
	`¥ötf_e
("%†îr‹: faûáàch%2d d©®%5d,Üimô max = %5d\n", 
__func__
,

2061 
i
, 
p_ªsu…_img
[i], 
limô_max_d©a
);

2062 #ifde‡
SAVE_ERR_MSG


2063 
	`•rötf
(
îr
, "failát ch%2d data = %5d,Üimit max = %5d\n",

2064 
i
, 
p_ªsu…_img
[i], 
limô_max_d©a
);

2065 
	`add_îr‹_msg
(
îr
);

2069 
idx_limô
 += 1;

2072 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

2073 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

2074 
exô
:

2076 
	`sy«_do_sw_ª£t
();

2078 i‡(
p_π133_d©a
)

2079 
	`‰ì
(
p_π133_d©a
);

2081  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

2082 
	}
}

2093 
	$rmi_do_ã°_abs_dñè_π59
(*
p_ªsu…_img
, 
size_of_ªsu…_d©a
,

2094 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

2096 
ªtvÆ
 = 0;

2097 *
p_d©a_32
;

2098 *
p_π59_d©a
 = 
NULL
;

2099 
‰ame_idx
, 
i
;

2100 
Áûuª_˙t
 = 0;

2101 
¥e_Áûuª_˙t
 = 0;

2102 
tx
 = 
g_rmi_pdt
.
tx_assig√d
;

2103 
rx
 = 
g_rmi_pdt
.
rx_assig√d
;

2104 
d©a_size
 = (
tx
 + 
rx
) * 4;

2105 
TEST_SAMPLE_COUNT
 = 100;

2106 *
p_ã°_buf„r
 = 
NULL
;

2107 
limô_mö_d©a
;

2108 
limô_max_d©a
;

2109 #ifde‡
SAVE_ERR_MSG


2110 
îr
[
MAX_ERR_STRING_LEN
];

2113 i‡(!
p_ªsu…_img
) {

2114 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

2115 #ifde‡
SAVE_ERR_MSG


2116 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

2117 
	`add_îr‹_msg
(
îr
);

2119 
ªtvÆ
 = -
EINVAL
;

2120 
exô
;

2122 i‡(
size_of_ªsu…_d©a
 !
rx
 + 
tx
) {

2123 
	`¥ötf_e
("%sÉrror: size ofÑesult is mismatching, (rx,Åx) = (%d, %d)\n",

2124 
__func__
, 
rx
, 
tx
);

2125 #ifde‡
SAVE_ERR_MSG


2126 
	`•rötf
(
îr
, "%s:Érror: size ofÑesult is mismatching, (rx,Åx) = (%d, %d)\n",

2127 
__func__
, 
rx
, 
tx
);

2128 
	`add_îr‹_msg
(
îr
);

2130 
ªtvÆ
 = -
EINVAL
;

2131 
exô
;

2133 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

2134 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

2135 
__func__
, 
size_limô_mö
, 
size_limô_max
);

2136 #ifde‡
SAVE_ERR_MSG


2137 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

2138 
	`add_îr‹_msg
(
îr
);

2140 
ªtvÆ
 = -
EINVAL
;

2141 
exô
;

2144 
p_π59_d©a
 = 
	`ˇŒoc
((
size_t
)
d©a_size
, ());

2145 i‡(!
p_π59_d©a
) {

2146 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π59_d©a\n", 
__func__
);

2147 #ifde‡
SAVE_ERR_MSG


2148 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹Ö_π59_d©a\n", 
__func__
);

2149 
	`add_îr‹_msg
(
îr
);

2151 
ªtvÆ
 = -
ENOMEM
;

2152 
exô
;

2155 
p_ã°_buf„r
 = 
	`ˇŒoc
((
size_t
)(
tx
 + 
rx
), ());

2156 i‡(!
p_ã°_buf„r
) {

2157 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹Ö_ã°_buf„r\n", 
__func__
);

2158 
	`•rötf
(
îr
, "%s: c™'àÆloˇã mem‹y f‹Ö_ã°_buf„r\n", 
__func__
);

2159 
	`add_îr‹_msg
(
îr
);

2160 
ªtvÆ
 = -
ENOMEM
;

2161 
exô
;

2165 
‰ame_idx
 = 0; føme_idx < 
TEST_SAMPLE_COUNT
; frame_idx++) {

2167 
	`mem£t
(
p_π59_d©a
, 0x00 , (
size_t
)
d©a_size
);

2170 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_uˇºay
(59, 
p_π59_d©a
, 
d©a_size
);

2171 i‡–
ªtvÆ
 < 0) {

2172 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑï‹àπ59\n", 
__func__
);

2173 #ifde‡
SAVE_ERR_MSG


2174 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑï‹àπ59\n", 
__func__
);

2175 
	`add_îr‹_msg
(
îr
);

2177 
ªtvÆ
 = -
EIO
;

2178 
exô
;

2181 
p_d©a_32
 = (*)&
p_π59_d©a
[0];

2182 
i
 = 0; i < (
tx
 + 
rx
); i++) {

2184 
p_ã°_buf„r
[
i
] = (*
p_d©a_32
);

2186 
p_d©a_32
++;

2191 
i
 = 0; i < (
tx
 + 
rx
); i++) {

2194 i‡(
size_limô_mö
 =(
tx
 + 
rx
)) {

2195 
limô_mö_d©a
 = 
limô_mö
[
i
];

2198 
limô_mö_d©a
 = 
limô_mö
[0];

2201 i‡(
size_limô_max
 =(
tx
 + 
rx
)) {

2202 
limô_max_d©a
 = 
limô_max
[
i
];

2205 
limô_max_d©a
 = 
limô_max
[0];

2209 i‡(
p_ã°_buf„r
[
i
] < 
limô_mö_d©a
) {

2210 
Áûuª_˙t
 += 1;

2212 
	`¥ötf_e
("%†îr‹: faûáàch%2d (‰amê%2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

2213 
i
, 
‰ame_idx
, 
p_ã°_buf„r
[i], 
limô_mö_d©a
);

2214 #ifde‡
SAVE_ERR_MSG


2215 
	`•rötf
(
îr
, "failát ch%2d (frame %2d) data = %5d,Üimit min = %5d\n",

2216 
i
, 
‰ame_idx
, 
p_ã°_buf„r
[i], 
limô_mö_d©a
);

2217 
	`add_îr‹_msg
(
îr
);

2221 i‡(
p_ã°_buf„r
[
i
] > 
limô_max_d©a
) {

2222 
Áûuª_˙t
 += 1;

2224 
	`¥ötf_e
("%†îr‹: faûáàch%2d (‰amê%2dËd©®%5d,Üimô max = %5d\n", 
__func__
,

2225 
i
, 
‰ame_idx
, 
p_ã°_buf„r
[i], 
limô_max_d©a
);

2226 #ifde‡
SAVE_ERR_MSG


2227 
	`•rötf
(
îr
, "failát ch%2d (frame %2d) data = %5d,Üimit max = %5d\n",

2228 
i
, 
‰ame_idx
, 
p_ã°_buf„r
[i], 
limô_max_d©a
);

2229 
	`add_îr‹_msg
(
îr
);

2234 i‡(
Áûuª_˙t
 != 0) {

2235 i‡(
Áûuª_˙t
 !
¥e_Áûuª_˙t
) {

2236 
i
 = 0; i < (
tx
 + 
rx
); i++) {

2237 
p_ªsu…_img
[
i
] = 
p_ã°_buf„r
[i];

2240 
¥e_Áûuª_˙t
 = 
Áûuª_˙t
;

2244 
i
 = 0; i < (
tx
 + 
rx
); i++) {

2245 
p_ªsu…_img
[
i
] =

2246 ((
p_ªsu…_img
[
i
] > 
p_ã°_buf„r
[i])?p_result_img[i] :Ö_test_buffer[i]);

2252 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

2253 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

2254 
exô
:

2256 
	`sy«_do_sw_ª£t
();

2258 if(
p_π59_d©a
)

2259 
	`‰ì
(
p_π59_d©a
);

2260 if(
p_ã°_buf„r
)

2261 
	`‰ì
(
p_ã°_buf„r
);

2263  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

2264 
	}
}

	@cpp/jni/rmi_report_access.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°rög.h
>

32 
	~<uni°d.h
>

34 
	~"sy«_dev_m™agî.h
"

35 
	~"rmi_c⁄åﬁ.h
"

37 #ifde‡
SAVE_ERR_MSG


38 
	~"îr_msg_˘æ.h
"

41 
	#GET_REPORT_REG_CLEAR_RETRY
 100

	)

42 
	#GET_REPORT_REG_CLEAR_DELAY
 20000

	)

57 
	$rmi_f54_ªad_ªp‹t_d©a
(
ªp‹t_ty≥
)

59 
ªtvÆ
 = 0;

60 
time_cou¡
 = 0;

61 
fifo_idx_d©a
[2] = {0,0};

62 
cmd_d©a
;

63 
ªåy
 = 0;

64 #ifde‡
SAVE_ERR_MSG


65 
îr
[
MAX_ERR_STRING_LEN
];

70 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, &
cmd_d©a
, (cmd_data));

71 i‡(
ªtvÆ
 < 0) {

72 
	`¥ötf_e
("%†îr‹: faûÅÿcheck F54 comm™d ba£Ñegi°î\n", 
__func__
);

73 #ifde‡
SAVE_ERR_MSG


74 
	`•rötf
(
îr
, "%sÉrror: failÅoÑead F54_CMD baseÑeg(addr=0x%x) beforeÑeport imageÑeading\n",

75 
__func__
, 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
);

76 
	`add_îr‹_msg
(
îr
);

78 
exô
;

80 i‡(
cmd_d©a
 & 0x01) {

82 
	`¥ötf_e
("%sÉrror: F54_CMD(bit 0) GetReport = 1 (data=0x%04x) (retry=%d)\n",

83 
__func__
, 
cmd_d©a
, 
ªåy
);

84 #ifde‡
SAVE_ERR_MSG


85 
	`•rötf
(
îr
, "%sÉrror: F54_CMD(addr=0x%x) GetReport isÇot cleared (data=0x%04x) (retry=%d)\n",

86 
__func__
, 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, 
cmd_d©a
, 
ªåy
);

87 
	`add_îr‹_msg
(
îr
);

89 
	`u¶ìp
(
GET_REPORT_REG_CLEAR_DELAY
);

90 
ªåy
 += 1;

91 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, &
cmd_d©a
, (cmd_data));

92 }  (
ªåy
 < 
GET_REPORT_REG_CLEAR_RETRY
Ë&& ((
cmd_d©a
 & 0x01) != 0x00) );

94 i‡(–
ªåy
 =
GET_REPORT_REG_CLEAR_RETRY
 ) || (
ªtvÆ
 < 0)) {

95 
	`¥ötf_e
("%sÉrror: F54_CMD isÇot cleared (data=0x%04x)\n",

96 
__func__
, 
cmd_d©a
);

97 #ifde‡
SAVE_ERR_MSG


98 
	`•rötf
(
îr
, "%sÉrror: F54_CMD(addr=0x%x) F54_CMD isÇot cleared (data=0x%04x)\n",

99 
__func__
, 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, 
cmd_d©a
);

100 
	`add_îr‹_msg
(
îr
);

102 
ªtvÆ
 = -
EIO
;

103 
exô
;

109 
cmd_d©a
 = ()(
ªp‹t_ty≥
);

110 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
F54
.
d©a_ba£_addr
, &
cmd_d©a
, (cmd_data));

111 i‡(
ªtvÆ
 < 0) {

112 
	`¥ötf_e
("%†îr‹: faûÅÿ£àªp‹àty≥ÅÿF54 d©®ªgi°î\n", 
__func__
);

113 #ifde‡
SAVE_ERR_MSG


114 
	`•rötf
(
îr
, "%sÉrror: failÅo setÑeportÅypeÅo F54 dataÑegister (addr=0x%x, wr_data=0x%x)\n",

115 
__func__
, 
g_rmi_pdt
.
F54
.
d©a_ba£_addr
, 
cmd_d©a
);

116 
	`add_îr‹_msg
(
îr
);

118 
exô
;

123 
ªtvÆ
 = 
	`rmi_wrôe_ªg
((Ë(
g_rmi_pdt
.
F54
.
d©a_ba£_addr
 + 1), 
fifo_idx_d©a
, (fifo_idx_data));

124 i‡(
ªtvÆ
 < 0) {

125 
	`¥ötf_e
("%†îr‹: faûÅÿ£àfifÿödexÑegi°î\n", 
__func__
);

126 #ifde‡
SAVE_ERR_MSG


127 
	`•rötf
(
îr
, "%sÉrror: failÅo set fifo indexÑegister (addr=0x%x, wr_data=0x%x, 0x%x)\n",

128 
__func__
, (
g_rmi_pdt
.
F54
.
d©a_ba£_addr
 + 1), 
fifo_idx_d©a
[0], fifo_idx_data[1]);

129 
	`add_îr‹_msg
(
îr
);

131 
exô
;

137 
cmd_d©a
 = 
RMI_COMMAND_GET_REPORT
;

138 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, &
cmd_d©a
, (cmd_data));

139 i‡(
ªtvÆ
 < 0) {

140 
	`¥ötf_e
("%†îr‹: faûÅÿ£àgëÑï‹àÊag\n", 
__func__
);

141 #ifde‡
SAVE_ERR_MSG


142 
	`•rötf
(
îr
, "%sÉrror: failÅo set get_report flagÅo 1 (addr=0x%x, wr_data=0x%x)\n",

143 
__func__
, 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, 
cmd_d©a
);

144 
	`add_îr‹_msg
(
îr
);

146 
exô
;

150 
	`u¶ìp
(10000);

152 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
, &
cmd_d©a
, (cmd_data));

153 i‡(
ªtvÆ
 < 0) {

154 
	`¥ötf_e
("%†îr‹: faûÅÿªad F54 comm™d ba£Ñegi°î\n", 
__func__
);

155 #ifde‡
SAVE_ERR_MSG


156 
	`•rötf
(
îr
, "%sÉrror: failÅoÑead F54_CMD baseÑeg(addr=0x%x) inÖollingÜoop\n",

157 
__func__
, 
g_rmi_pdt
.
F54
.
comm™d_ba£_addr
);

158 
	`add_îr‹_msg
(
îr
);

160 
exô
;

162 
time_cou¡
 += 1;

164 } (
cmd_d©a
 & 0x01Ë&& (
time_cou¡
 < 
RMI_GET_REPORT_TIMEOUT
));

166 i‡(
time_cou¡
 =
RMI_GET_REPORT_TIMEOUT
) {

167 
	`¥ötf_e
("%sÉrror: failÅo getÑeport image (rt %d),Åimeout! (f54_cmd: %x)\n",

168 
__func__
, 
ªp‹t_ty≥
, 
cmd_d©a
);

169 #ifde‡
SAVE_ERR_MSG


170 
	`•rötf
(
îr
, "%sÉrror: failÅo getÑeport image (rt %d),Åimeout!\n",

171 
__func__
, 
ªp‹t_ty≥
);

172 
	`add_îr‹_msg
(
îr
);

174 
ªtvÆ
 = -
ETIMEDOUT
;

175 
exô
;

177 
exô
:

178  
ªtvÆ
;

179 
	}
}

196 
	$rmi_f54_ªad_ªp‹t_‰ame
(
ªp‹t_ty≥
, *
p_out
, 
size_out
, 
boﬁ
 
out_ö_œndsˇ≥
)

198 
ªtvÆ
 = 0;

199 *
p_d©a_16
;

200 
tx
 = 
g_rmi_pdt
.
tx_assig√d
;

201 
rx
 = 
g_rmi_pdt
.
rx_assig√d
;

202 
size
 = 
tx
 * 
rx
 * ();

203 *
d©a_buf
 = 
NULL
;

204 
i
, 
j
, 
off£t
;

205 #ifde‡
SAVE_ERR_MSG


206 
îr
[
MAX_ERR_STRING_LEN
];

209 i‡(!
p_out
) {

210 
	`¥ötf_e
("%†îr‹:Ö_ouài†NULL\n", 
__func__
);

211 
ªtvÆ
 = -
EINVAL
;

212 
exô
;

214 i‡(
size_out
 !
tx
 * 
rx
) {

215 
	`¥ötf_e
("%†îr‹: sizêi†mism©chög\n", 
__func__
);

216 
ªtvÆ
 = -
EINVAL
;

217 
exô
;

220 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
size
, ());

221 i‡(!
d©a_buf
) {

222 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

223 #ifde‡
SAVE_ERR_MSG


224 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

225 
	`add_îr‹_msg
(
îr
);

227 
ªtvÆ
 = -
ENOMEM
;

228 
exô
;

232 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_d©a
(
ªp‹t_ty≥
);

233 i‡(
ªtvÆ
 < 0) {

234 
	`¥ötf_e
("%†îr‹: faûÅÿªque°Åhêªp‹à%d \n", 
__func__
, 
ªp‹t_ty≥
);

235 #ifde‡
SAVE_ERR_MSG


236 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªque°Åhêªp‹à%d \n", 
__func__
, 
ªp‹t_ty≥
);

237 
	`add_îr‹_msg
(
îr
);

239 
exô
;

244 
ªtvÆ
 = 
	`rmi_ªad_ªg
((Ë(
g_rmi_pdt
.
F54
.
d©a_ba£_addr
 + 
RMI_REPROT_DATA_OFFSET
),

245 
d©a_buf
, 
size
);

246 i‡(
ªtvÆ
 < 0) {

247 
	`¥ötf_e
("%†îr‹: faûÅÿªåõvêªp‹àd©®\n", 
__func__
);

248 #ifde‡
SAVE_ERR_MSG


249 
	`•rötf
(
îr
, "%sÉrror: failÅoÑetrieveÑeport data (reg_addr=0x%x, size=%d)\n",

250 
__func__
, (
g_rmi_pdt
.
F54
.
d©a_ba£_addr
 + 
RMI_REPROT_DATA_OFFSET
), 
size
);

251 
	`add_îr‹_msg
(
îr
);

253 
exô
;

271 
p_d©a_16
 = (*)&
d©a_buf
[0];

272 
i
 = 0; i < 
tx
; i++) {

273 
j
 = 0; j < 
rx
; j++) {

275 i‡(
out_ö_œndsˇ≥
) {

276 i‡(
rx
 > 
tx
)

277 
off£t
 = 
i
*
rx
 + 
j
;

279 
off£t
 = 
j
*
tx
 + 
i
;

282 
off£t
 = 
i
*
rx
 + 
j
;

285 
p_out
[
off£t
] = *
p_d©a_16
;

289 
p_d©a_16
++;

292 
exô
:

293 if(
d©a_buf
)

294 
	`‰ì
(
d©a_buf
);

296  
ªtvÆ
;

297 
	}
}

313 
	$rmi_f54_ªad_ªp‹t_uˇºay
(
ªp‹t_ty≥
, *
p_out
, 
size_out
)

315 
ªtvÆ
 = 0;

316 #ifde‡
SAVE_ERR_MSG


317 
îr
[
MAX_ERR_STRING_LEN
];

320 i‡(!
p_out
) {

321 
	`¥ötf_e
("%s:Ö_ouài†NULL\n", 
__func__
);

322 
ªtvÆ
 = -
EINVAL
;

323 
exô
;

327 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_d©a
(
ªp‹t_ty≥
);

328 i‡(
ªtvÆ
 < 0) {

329 
	`¥ötf_e
("%†îr‹: faûÅÿªque°Åhêªp‹à%d \n", 
__func__
, 
ªp‹t_ty≥
);

330 #ifde‡
SAVE_ERR_MSG


331 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªque°Åhêªp‹à%d \n", 
__func__
, 
ªp‹t_ty≥
);

332 
	`add_îr‹_msg
(
îr
);

334 
exô
;

339 
ªtvÆ
 = 
	`rmi_ªad_ªg
((Ë(
g_rmi_pdt
.
F54
.
d©a_ba£_addr
 + 
RMI_REPROT_DATA_OFFSET
),

340 
p_out
, 
size_out
);

341 i‡(
ªtvÆ
 < 0) {

342 
	`¥ötf_e
("%†îr‹: faûÅÿgëÑï‹àd©®\n", 
__func__
);

343 #ifde‡
SAVE_ERR_MSG


344 
	`•rötf
(
îr
, "%sÉrror: failÅo getÑeport data (reg_addr=0x%x, size=%d)\n",

345 
__func__
, (
g_rmi_pdt
.
F54
.
d©a_ba£_addr
 + 
RMI_REPROT_DATA_OFFSET
), 
size_out
);

346 
	`add_îr‹_msg
(
îr
);

348 
exô
;

351 
exô
:

352  
ªtvÆ
;

353 
	}
}

	@cpp/jni/rmi_touch_data.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°dboﬁ.h
>

33 
	~<uni°d.h
>

35 
	~"sy«_dev_m™agî.h
"

36 
	~"rmi_c⁄åﬁ.h
"

38 #ifde‡
SAVE_ERR_MSG


39 
	~"îr_msg_˘æ.h
"

42 
	#POLLING_TOUCH_REPORT_CNT
 50

	)

43 
	#POLLING_TOUCH_REPORT_DELAY_MS
 10

	)

45 
	#MAX_RMI_REPORTED_FINGERS
 10

	)

56 
	$rmi_f12_gë_touch_ªp‹t
(*
pos_x
, 
size_of_pos_x
, *
pos_y
, 
size_of_pos_y
,

57 *
pos_°©us
, 
size_of_pos_°©us
, 
max_poöts_ªp‹ãd
)

59 
ªtvÆ
;

60 
touch_cou¡
 = 0;

61 
ödex
;

62 
fögî
;

63 
fögîs_to_¥o˚ss
;

64 
fögî_°©us
;

65 
size_of_2d_d©a
;

66 
d©a_addr
 = 
g_rmi_pdt
.
F12
.
d©a_ba£_addr
;

67 
x
;

68 
y
;

69 
f12_fögî_d©a
 *
d©a
;

70 
f12_fögî_d©a
 *
fögî_d©a
;

71 
fögî_¥e£n˚
;

72 #ifde‡
SAVE_ERR_MSG


73 
îr
[
MAX_ERR_STRING_LEN
];

77 
obje˘s_Æªady_¥e£¡
;

79 i‡((!
pos_x
Ë|| (!
pos_y
Ë|| (!
pos_°©us
)) {

80 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî\n", 
__func__
);

81 #ifde‡
SAVE_ERR_MSG


82 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî\n", 
__func__
);

83 
	`add_îr‹_msg
(
îr
);

85  (-
EINVAL
);

88 i‡((
size_of_pos_x
 < 
max_poöts_ªp‹ãd
Ë|| (
size_of_pos_y
 < max_points_reported) ||

89 (
size_of_pos_°©us
 < 
max_poöts_ªp‹ãd
)) {

90 
	`¥ötf_e
("%†îr‹: invÆid bu‡size\n", 
__func__
);

91 #ifde‡
SAVE_ERR_MSG


92 
	`•rötf
(
îr
, "%†îr‹: invÆid bu‡size\n", 
__func__
);

93 
	`add_îr‹_msg
(
îr
);

95  (-
EINVAL
);

98 
fögîs_to_¥o˚ss
 = ()(
g_rmi_pdt
.
num_of_fögîs_suµ‹ãd
);

100 
size_of_2d_d©a
 = (
f12_fögî_d©a
);

103 i‡(
g_rmi_pdt
.
f12_exåa
.
d©a15_size
) {

104 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
d©a_addr
 + 
g_rmi_pdt
.
f12_exåa
.
d©a15_off£t
,

105 
g_rmi_pdt
.
f12_exåa
.
d©a15_d©a
,

106 
g_rmi_pdt
.
f12_exåa
.
d©a15_size
);

107 i‡(
ªtvÆ
 < 0) {

108 
	`¥ötf_e
("%†îr‹: faûÅÿªad f12 d©a_15\n", 
__func__
);

109 #ifde‡
SAVE_ERR_MSG


110 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad f12 d©a_15\n", 
__func__
);

111 
	`add_îr‹_msg
(
îr
);

113  
ªtvÆ
;

116 
ödex
 = ()(
g_rmi_pdt
.
f12_exåa
.
d©a15_size
 - 1);

117 
fögî
 = ()((
fögîs_to_¥o˚ss
 - 1) % 8);

119 i‡(
g_rmi_pdt
.
f12_exåa
.
d©a15_d©a
[
ödex
] & (1 << 
fögî
))

122 i‡(
fögî
) {

123 
fögî
--;

124 } i‡(
ödex
 > 0) {

125 
ödex
--;

126 
fögî
 = 7;

129 
fögîs_to_¥o˚ss
--;

130 } 
fögîs_to_¥o˚ss
);

132 
	`¥ötf_i
("%s:Çumber of fingersÅoÖrocess = %d\n",

133 
__func__
, 
fögîs_to_¥o˚ss
);

137 
fögîs_to_¥o˚ss
 = (fögîs_to_¥o˚s†> 
obje˘s_Æªady_¥e£¡
)?

138 
fögîs_to_¥o˚ss
 : 
obje˘s_Æªady_¥e£¡
;

140 i‡(!
fögîs_to_¥o˚ss
) {

144 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
d©a_addr
 + 
g_rmi_pdt
.
f12_exåa
.
d©a1_off£t
,

145 (*)
g_rmi_pdt
.
f12_fögî_d©a
,

146 
fögîs_to_¥o˚ss
 * 
size_of_2d_d©a
);

147 i‡(
ªtvÆ
 < 0) {

148 
	`¥ötf_e
("%†îr‹: faûÅÿªad f12 d©a_01\n", 
__func__
);

149 #ifde‡
SAVE_ERR_MSG


150 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad f12 d©a_01\n", 
__func__
);

151 
	`add_îr‹_msg
(
îr
);

153  
ªtvÆ
;

156 
d©a
 = 
g_rmi_pdt
.
f12_fögî_d©a
;

158 
fögî
 = 0; fögî < 
max_poöts_ªp‹ãd
; finger++) {

159 
fögî_d©a
 = 
d©a
 + 
fögî
;

160 
fögî_°©us
 = 
fögî_d©a
->
obje˘_ty≥_™d_°©us
;

163 
obje˘s_Æªady_¥e£¡
 = ()(
fögî
 + 1);

165 
x
 = (
fögî_d©a
->
x_msb
 << 8Ë| (fögî_d©a->
x_lsb
);

166 
y
 = (
fögî_d©a
->
y_msb
 << 8Ë| (fögî_d©a->
y_lsb
);

168 
fögî_°©us
) {

169 
F12_FINGER_STATUS
:

171 
	`¥ötf_i
("%s: finger %d: status = 0x%02x, x = %d, y = %d\n",

172 
__func__
, 
fögî
, 
fögî_°©us
, 
x
, 
y
);

174 
pos_x
[
fögî
] = 
x
;

175 
pos_y
[
fögî
] = 
y
;

176 
pos_°©us
[
fögî
] = 
fögî_°©us
;

178 
fögî_¥e£n˚
 = 1;

179 
touch_cou¡
++;

186 i‡(
touch_cou¡
 == 0) {

187 
fögî_¥e£n˚
 = 0;

189 
obje˘s_Æªady_¥e£¡
 = 0;

192  (
fögî_¥e£n˚
)? 
touch_cou¡
 : 0;

193 
	}
}

208 
	$rmi_quîy_touch_ª•⁄£
(*
touch_x
, * 
touch_y
, * 
touch_°©us
,

209 
max_fögîs_to_¥o˚ss
)

211 
ªtvÆ
;

212 
ªåy
 = 0;

213 
d©a
[
MAX_INTR_REGISTERS
 + 1] = {0};

214 
x
[
MAX_RMI_REPORTED_FINGERS
] = {0};

215 
y
[
MAX_RMI_REPORTED_FINGERS
] = {0};

216 
°©us
[
MAX_RMI_REPORTED_FINGERS
] = {0};

217 
boﬁ
 
is_fögî_evít
 = 
Ál£
;

218 
idx
;

219 #ifde‡
SAVE_ERR_MSG


220 
îr
[
MAX_ERR_STRING_LEN
];

228 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
g_rmi_pdt
.
F01
.
d©a_ba£_addr
,

229 
d©a
,

231 i‡(
ªtvÆ
 < 0) {

232 
	`¥ötf_e
("%†îr‹: faûÅÿªad i¡îru± sètus\n", 
__func__
);

233 #ifde‡
SAVE_ERR_MSG


234 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad i¡îru± sètus\n", 
__func__
);

235 
	`add_îr‹_msg
(
îr
);

237  (-
EIO
);

240 i‡(
d©a
[1] & 0x04) {

241 
ªtvÆ
 = 
	`rmi_f12_gë_touch_ªp‹t
(
x
, 
MAX_RMI_REPORTED_FINGERS
,

242 
y
, 
MAX_RMI_REPORTED_FINGERS
,

243 
°©us
, 
MAX_RMI_REPORTED_FINGERS
,

244 
max_fögîs_to_¥o˚ss
);

245 i‡(
ªtvÆ
 < 0){

246 
	`¥ötf_e
("%†îr‹: faûÅÿgëÅhêtouchÑï‹t\n", 
__func__
);

247 #ifde‡
SAVE_ERR_MSG


248 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhêtouchÑï‹t\n", 
__func__
);

249 
	`add_îr‹_msg
(
îr
);

251  (-
EIO
);

254 
is_fögî_evít
 = 
åue
;

258 
ªtvÆ
 = 0;

261 
ªåy
 += 1;

262 
	`u¶ìp
(
POLLING_TOUCH_REPORT_DELAY_MS
 * 1000);

264 }  (
ªåy
 < 
POLLING_TOUCH_REPORT_CNT
) );

267 i‡(
is_fögî_evít
) {

269 
idx
 = 0; idx < 
MAX_RMI_REPORTED_FINGERS
; idx++) {

270 
touch_x
[
idx
] = 
x
[idx];

271 
touch_y
[
idx
] = 
y
[idx];

272 
touch_°©us
[
idx
] = 
°©us
[idx];

277  
ªtvÆ
;

278 
	}
}

	@cpp/jni/syna_dev_manager.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

33 
	~<°dboﬁ.h
>

34 
	~<uni°d.h
>

35 
	~<f˙é.h
>

36 
	~<sys/°©.h
>

38 
	~"sy«_dev_m™agî.h
"

39 
	~"rmi_c⁄åﬁ.h
"

40 
	~"tcm_c⁄åﬁ.h
"

42 #ifde‡
SAVE_ERR_MSG


43 
	~"îr_msg_˘æ.h
"

46 
	#RAW_CMD_WRITE
 0x11

	)

47 
	#RAW_CMD_READ
 0x12

	)

49 
	#MAX_FINGER
 10

	)

52 
	eSYNA_DEV
 {

53 
	mSYNA_DEV_NONE
,

54 
	mSYNA_RMI_DEV
,

55 
	mSYNA_TCM_DEV
,

59 
SYNA_DEV
 
	gg_sy«_dev
 = 
SYNA_DEV_NONE
;

63 
	eTEST_ID
 {

65 
	mTEST_RMI_NOISE_RT02
 = 0x200,

66 
	mTEST_RMI_NOISE_TDDI_RT94
 = 0x201,

67 
	mTEST_RMI_FULL_RAW_RT20
 = 0x202,

68 
	mTEST_RMI_FULL_RAW_TDDI_RT92
 = 0x203,

69 
	mTEST_RMI_EX_HIGH_RESISTANCE_RT20
 = 0x204,

70 
	mTEST_RMI_TRX_SHORT_RT26
 = 0x205,

71 
	mTEST_RMI_EX_TRX_SHORT_RT26100
 = 0x206,

72 
	mTEST_RMI_ABS_OPEN_RT63
 = 0x207,

73 
	mTEST_RMI_ADC_RANGE_RT23
 = 0x208,

74 
	mTEST_RMI_TAGSMOISTURE_RT76
 = 0x209,

75 
	mTEST_RMI_RT133
 = 0x20A,

76 
	mTEST_RMI_ABS_DELTA_RT59
 = 0x20B,

77 
	mTEST_RMI_SENSOR_SPEED_RT22
 = 0x20C,

81 
	mTEST_TCM_NOISE_PID0A
 = 0x300,

82 
	mTEST_TCM_DRT_PID07
 = 0x301,

83 
	mTEST_TCM_PT11_PID0B
 = 0x302,

84 
	mTEST_TCM_PT12_PID0C
 = 0x303,

85 
	mTEST_TCM_PT13_PID0D
 = 0x304,

86 
	mTEST_TCM_FULL_RAW_PID05
 = 0x305,

87 
	mTEST_TCM_TRX_TRX_SHORT_PID01
 = 0x306,

88 
	mTEST_TCM_TRX_GROUND_PID03
 = 0x307,

89 
	mTEST_TCM_ADC_RANGE_PID11
 = 0x308,

90 
	mTEST_TCM_ABS_RAWCAP_PID12
 = 0x309,

91 
	mTEST_TCM_HYBRID_ABS_NOISE_PID1D
 = 0x30A,

92 
	mTEST_TCM_EX_HIGH_RESISTANCE_PID05
 = 0x30B,

96 
	gg_°r_c⁄fig_id
[
MAX_STRING_LEN
];

97 
boﬁ
 
	gg_ªp‹t_img_°ªam_í
;

98 
	gg_fögî_°©us
[
MAX_FINGER
];

109 
boﬁ
 
	$sy«_föd_dev
(*
dev_node
)

111 i‡(
	`rmi_föd_dev
(
dev_node
)) {

112 
g_sy«_dev
 = 
SYNA_RMI_DEV
;

113  
åue
;

115 i‡(
	`tcm_föd_dev
(
dev_node
)) {

116 
g_sy«_dev
 = 
SYNA_TCM_DEV
;

117  
åue
;

120  
Ál£
;

121 
	}
}

131 
boﬁ
 
	$sy«_£t_dev
(c⁄° *
dev_node
, 
boﬁ
 
is_rmi
, boﬁ 
is_tcm
)

133 
ªtvÆ
;

134 
°©
 
°
;

135 
boﬁ
 
is_found
;

136 #ifde‡
SAVE_ERR_MSG


137 
îr
[
MAX_ERR_STRING_LEN
];

140 i‡(!
dev_node
) {

141 
	`¥ötf_e
("%†îr‹: invÆid i≈uànode\n", 
__func__
);

142 #ifde‡
SAVE_ERR_MSG


143 
	`•rötf
(
îr
, "%†îr‹: invÆid i≈uà°rög\n", 
__func__
);

144 
	`add_îr‹_msg
(
îr
);

146  
Ál£
;

149 i‡(
is_rmi
 && 
is_tcm
) {

150 
	`¥ötf_e
("%sÉrror: invalid input devÅype, (is_rmi = %d, (is_tcm = %d)\n",

151 
__func__
, 
is_rmi
, 
is_tcm
);

152 #ifde‡
SAVE_ERR_MSG


153 
	`•rötf
(
îr
, "%sÉrror: invalid input devÅype, (is_rmi = %d, (is_tcm = %d)\n",

154 
__func__
, 
is_rmi
, 
is_tcm
);

155 
	`add_îr‹_msg
(
îr
);

157  
Ál£
;

160 
	`mem£t
(
g_dev_node
, 0x00, (g_dev_node));

161 
	`¢¥ötf
(
g_dev_node
, (g_dev_node), "%s", 
dev_node
);

163 
	`¥ötf_i
("%†öfo: i≈uàdevi˚Çode, %s\n", 
__func__
, 
g_dev_node
);

165 
ªtvÆ
 = 
	`°©
(
g_dev_node
, &
°
);

166 
is_found
 = (0 =
ªtvÆ
);

168 i‡(
is_found
 && 
is_rmi
) {

169 
g_sy«_dev
 = 
SYNA_RMI_DEV
;

170 
	`¥ötf_i
("%†sy«±ic†rmòdevi˚Çodê%s\n", 
__func__
, 
g_dev_node
);

172 i‡(
is_found
 && 
is_tcm
) {

173 
g_sy«_dev
 = 
SYNA_TCM_DEV
;

174 
	`¥ötf_i
("%†sy«±ic†tcm devi˚Çodê%s\n", 
__func__
, 
g_dev_node
);

177 
g_sy«_dev
 = 
SYNA_DEV_NONE
;

178 
	`¥ötf_e
("%sÉrror: failÅo find input deviceÇode, %s (retval = %d) (err: %s)\n",

179 
__func__
, 
g_dev_node
, 
ªtvÆ
, 
	`°ªº‹
(
î∫o
));

180 #ifde‡
SAVE_ERR_MSG


181 
	`•rötf
(
îr
, "%sÉrror: failÅo find input deviceÇode, %s (retval = %d) (err: %s)\n",

182 
__func__
, 
g_dev_node
, 
ªtvÆ
, 
	`°ªº‹
(
î∫o
));

183 
	`add_îr‹_msg
(
îr
);

187  
is_found
;

188 
	}
}

198 
	$sy«_›í_dev
(c⁄° *
dev_node
)

200 
ªtvÆ
;

201 
i
;

202 #ifde‡
SAVE_ERR_MSG


203 
îr
[
MAX_ERR_STRING_LEN
];

205 
	`˛ór_Æl_îr‹_msg
();

208 
g_sy«_dev
) {

209 
SYNA_RMI_DEV
:

210 
ªtvÆ
 = 
	`rmi_›í_dev
(
dev_node
);

212 
SYNA_TCM_DEV
:

213 
ªtvÆ
 = 
	`tcm_›í_dev
(
dev_node
);

216 #ifde‡
SAVE_ERR_MSG


217 
	`•rötf
(
îr
, "%†îr‹: devi˚Çodêi†nŸ found.\n", 
__func__
);

218 
	`add_îr‹_msg
(
îr
);

220 
ªtvÆ
 = -
EINVAL
;

225 
i
 = 0; i < 
MAX_FINGER
; i++)

226 
g_fögî_°©us
[
i
] = 0x00;

228 
g_ªp‹t_img_°ªam_í
 = 
Ál£
;

230  
ªtvÆ
;

231 
	}
}

239 
	$sy«_˛o£_dev
(c⁄° *
dev_node
)

241 
ªtvÆ
;

242 #ifde‡
SAVE_ERR_MSG


243 
îr
[
MAX_ERR_STRING_LEN
];

247 
g_sy«_dev
) {

248 
SYNA_RMI_DEV
:

249 
ªtvÆ
 = 
	`rmi_˛o£_dev
(
dev_node
);

251 
SYNA_TCM_DEV
:

252 
ªtvÆ
 = 
	`tcm_˛o£_dev
(
dev_node
);

255 #ifde‡
SAVE_ERR_MSG


256 
	`•rötf
(
îr
, "%†îr‹: devi˚Çodêi†found.\n", 
__func__
);

257 
	`add_îr‹_msg
(
îr
);

259 
ªtvÆ
 = -
EINVAL
;

263  
ªtvÆ
;

264 
	}
}

272 * 
	$sy«_gë_devi˚_id
()

274 
g_sy«_dev
) {

275 
SYNA_RMI_DEV
:

276  (*)
g_rmi_pdt
.
asic_ty≥
;

277 
SYNA_TCM_DEV
:

278  (*)
g_tcm_h™dÀr
.
idítify_ªp‹t
.
∑π_numbî
;

280 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

281  
NULL
;

283 
	}
}

291 
	$sy«_gë_fw_id
()

293 
fw_id
 = 0;

295 
g_sy«_dev
) {

296 
SYNA_RMI_DEV
:

297 
fw_id
 = 
g_rmi_pdt
.
buûd_id
;

299 
SYNA_TCM_DEV
:

300 
fw_id
 = (()
g_tcm_h™dÀr
.
idítify_ªp‹t
.
buûd_id
[0]) +

301 (()
g_tcm_h™dÀr
.
idítify_ªp‹t
.
buûd_id
[1] * 0x100) +

302 (()
g_tcm_h™dÀr
.
idítify_ªp‹t
.
buûd_id
[2] * 0x10000) +

303 (()
g_tcm_h™dÀr
.
idítify_ªp‹t
.
buûd_id
[3] * 0x1000000);

306 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

310  
fw_id
;

311 
	}
}

319 * 
	$sy«_gë_c⁄fig_id
()

321 
i
;

322 
	`mem£t
(
g_°r_c⁄fig_id
, 0x00, (g_str_config_id));

324 
g_sy«_dev
) {

325 
SYNA_RMI_DEV
:

326 
i
 = 0; i < 
g_rmi_pdt
.
size_of_c⁄fig_id
 - 1; i++) {

327 
	`•rötf
(
g_°r_c⁄fig_id
 + 
	`°æí
(g_str_config_id),

328 "%02X-", 
g_rmi_pdt
.
c⁄fig_id
[
i
]);

330 
	`•rötf
(
g_°r_c⁄fig_id
 + 
	`°æí
(g_str_config_id),

331 "%02X", 
g_rmi_pdt
.
c⁄fig_id
[g_rmi_pdt.
size_of_c⁄fig_id
 - 1]);

333 
SYNA_TCM_DEV
:

334 
i
 = 0; i < 15; i++) {

335 
	`•rötf
(
g_°r_c⁄fig_id
 + 
	`°æí
(g_str_config_id),

336 "%02X-", 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[
i
]);

338 
	`•rötf
(
g_°r_c⁄fig_id
 + 
	`°æí
(g_str_config_id),

339 "%02X", 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[15]);

342 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

343  
NULL
;

346  (*)
g_°r_c⁄fig_id
;

347 
	}
}

358 
	$sy«_gë_image_rows
(
boﬁ
 
out_ö_œndsˇ≥
)

360 
rows
 = 0;

361 
cﬁs
 = 0;

362 
g_sy«_dev
) {

363 
SYNA_RMI_DEV
:

364 i‡(
out_ö_œndsˇ≥
)

365 
rows
 = 
	`MAX
(
g_rmi_pdt
.
tx_assig√d
, g_rmi_pdt.
rx_assig√d
);

367 
rows
 = 
g_rmi_pdt
.
tx_assig√d
;

370 
SYNA_TCM_DEV
:

371 
rows
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[0] |

372 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[1] << 8);

373 
cﬁs
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[0] |

374 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[1] << 8);

376 i‡(
out_ö_œndsˇ≥
)

377 
rows
 = 
	`MAX
‘ows, 
cﬁs
);

382 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

385  
rows
;

386 
	}
}

397 
	$sy«_gë_image_cﬁs
(
boﬁ
 
out_ö_œndsˇ≥
)

399 
rows
 = 0;

400 
cﬁs
 = 0;

401 
g_sy«_dev
) {

402 
SYNA_RMI_DEV
:

403 i‡(
out_ö_œndsˇ≥
)

404 
cﬁs
 = 
	`MIN
(
g_rmi_pdt
.
tx_assig√d
, g_rmi_pdt.
rx_assig√d
);

406 
cﬁs
 = 
g_rmi_pdt
.
rx_assig√d
;

409 
SYNA_TCM_DEV
:

410 
rows
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[0] |

411 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[1] << 8);

412 
cﬁs
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[0] |

413 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[1] << 8);

415 i‡(
out_ö_œndsˇ≥
)

416 
cﬁs
 = 
	`MIN
(
rows
, cols);

421 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

424  
cﬁs
;

425 
	}
}

433 
	$sy«_gë_num_bäs
()

435 
bäs
 = 0;

436 
g_sy«_dev
) {

437 
SYNA_RMI_DEV
:

438 i‡(
g_rmi_pdt
.
has_buâ⁄
)

439 
bäs
 = 1;

441 
SYNA_TCM_DEV
:

442 
bäs
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_buâ⁄s
[0] |

443 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_buâ⁄s
[1] << 8);

446 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

449  
bäs
;

450 
	}
}

458 
	$sy«_gë_image_has_hybrid
()

460 
ªtvÆ
 = 0;

461 
g_sy«_dev
) {

462 
SYNA_RMI_DEV
:

463 
ªtvÆ
 = 0;

465 
SYNA_TCM_DEV
:

466 
ªtvÆ
 = 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
has_hybrid_d©a
[0],

467 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
has_hybrid_d©a
[1]);

470 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

473  
ªtvÆ
;

474 
	}
}

482 
	$sy«_gë_num_f‹˚_ñecs
()

484 
ªtvÆ
 = 0;

485 
g_sy«_dev
) {

486 
SYNA_RMI_DEV
:

487 
ªtvÆ
 = 0;

489 
SYNA_TCM_DEV
:

490 
ªtvÆ
 = 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_f‹˚_ñecs
[0],

491 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_f‹˚_ñecs
[1]);

494 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

497  
ªtvÆ
;

498 
	}
}

507 
	$sy«_do_sw_ª£t
()

509 
ªtvÆ
 = -
EINVAL
;

510 
g_sy«_dev
) {

511 
SYNA_RMI_DEV
:

512 
ªtvÆ
 = 
	`rmi_f01_sw_ª£t
();

514 
SYNA_TCM_DEV
:

515 
ªtvÆ
 = 
	`tcm_do_ª£t
();

518 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

521  
ªtvÆ
;

522 
	}
}

531 
	$sy«_£t_no_¶ìp
()

533 
ªtvÆ
 = -
EINVAL
;

534 
g_sy«_dev
) {

535 
SYNA_RMI_DEV
:

536 
ªtvÆ
 = 
	`rmi_f01_£t_no_¶ìp
();

538 
SYNA_TCM_DEV
:

539 
ªtvÆ
 = 
	`tcm_£t_no_¶ìp
(1);

542 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

545  
ªtvÆ
;

546 
	}
}

555 
	$£t_sy«_no_ªœx
()

557 
ªtvÆ
 = -
EINVAL
;

558 
g_sy«_dev
) {

559 
SYNA_RMI_DEV
:

560 
ªtvÆ
 = 
	`rmi_f54_no_ªœx
(
åue
);

562 
SYNA_TCM_DEV
:

563 
ªtvÆ
 = 0;

566 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

569  
ªtvÆ
;

570 
	}
}

580 
	$sy«_£t_ªzîo
()

582 
ªtvÆ
 = -
EINVAL
;

583 
g_sy«_dev
) {

584 
SYNA_RMI_DEV
:

585 
ªtvÆ
 = 
	`rmi_f54_f‹˚_ˇl
();

587 
SYNA_TCM_DEV
:

588 
ªtvÆ
 = 
	`tcm_£t_ªzîo
();

591 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

594  
ªtvÆ
;

595 
	}
}

605 
	$sy«_do_idítify
(*
p_out
)

607 
ªtvÆ
 = -
EINVAL
;

608 
°rög_off£t
 = 0;

609 #ifde‡
SAVE_ERR_MSG


610 
îr
[
MAX_ERR_STRING_LEN
];

613 i‡(!
p_out
) {

614 
	`¥ötf_e
("%†îr‹:Ö_ouài†em±y \n", 
__func__
);

615  -
EINVAL
;

618 i‡((
SYNA_RMI_DEV
 !
g_sy«_dev
Ë&& (
SYNA_TCM_DEV
 != g_syna_dev)) {

619  -
EINVAL
;

622 
g_sy«_dev
) {

623 
SYNA_RMI_DEV
:

624 
ªtvÆ
 = 
	`rmi_gë_idítify
(
p_out
);

625 i‡(
ªtvÆ
 < 0) {

626 
	`¥ötf_e
("%†îr‹: faûÅÿgëÅhêidítifiˇti⁄ info\n", 
__func__
);

627 #ifde‡
SAVE_ERR_MSG


628 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhêidítifiˇti⁄ info\n", 
__func__
);

629 
	`add_îr‹_msg
(
îr
);

631 
exô
;

634 
SYNA_TCM_DEV
:

635 
ªtvÆ
 = 
	`tcm_gë_idítify_öfo
(
p_out
);

636 i‡(
ªtvÆ
 < 0) {

637 
	`¥ötf_e
("%†îr‹: faûÅÿªque°ÅhêidítifyÑï‹t\n", 
__func__
);

638 
exô
;

640 
°rög_off£t
 = (Ë
	`°æí
(
p_out
);

641 
ªtvÆ
 = 
	`tcm_gë_≠p_öfo
(
p_out
 + 
°rög_off£t
);

642 i‡(
ªtvÆ
 < 0) {

643 
	`¥ötf_e
("%†îr‹: faûÅÿªque°ÅhêidítifyÑï‹t\n", 
__func__
);

644 
exô
;

647 
ªtvÆ
 = 
	`tcm_gë_°©ic_c⁄fig
();

648 i‡(
ªtvÆ
 < 0) {

649 
	`¥ötf_e
("%†îr‹: faûÅÿgë sèti¯c⁄fig\n", 
__func__
);

650 
exô
;

655 
exô
:

656  
ªtvÆ
;

657 
	}
}

670 
	$sy«_do_¥ï¨©i⁄
(
boﬁ
 
no¶ìp_í
, boﬁ 
ªzîo_í
)

672 
ªtvÆ
 = 0;

673 #ifde‡
SAVE_ERR_MSG


674 
îr
[
MAX_ERR_STRING_LEN
];

678 i‡(
no¶ìp_í
) {

679 
ªtvÆ
 = 
	`sy«_£t_no_¶ìp
();

680 i‡(
ªtvÆ
 < 0) {

681 #ifde‡
SAVE_ERR_MSG


682 
	`•rötf
(
îr
, "%sÉrror: failÅo setÅoÇo_sleep mode\n",

683 
__func__
);

684 
	`add_îr‹_msg
(
îr
);

686  
ªtvÆ
;

691 i‡(
ªzîo_í
) {

692 
ªtvÆ
 = 
	`sy«_£t_ªzîo
();

693 i‡(
ªtvÆ
 < 0) {

694 #ifde‡
SAVE_ERR_MSG


695 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerformÑezero\n",

696 
__func__
);

697 
	`add_îr‹_msg
(
îr
);

699  
ªtvÆ
;

703  
ªtvÆ
;

704 
	}
}

714 
	$sy«_°¨t_image_°ªam
(
ªp‹t_ty≥
, 
boﬁ
 
touch_í
,

715 
boﬁ
 
no¶ìp_í
, boﬁ 
ªzîo_í
)

717 
ªtvÆ
 = 0;

718 #ifde‡
SAVE_ERR_MSG


719 
îr
[
MAX_ERR_STRING_LEN
];

722 i‡((
SYNA_RMI_DEV
 !
g_sy«_dev
Ë&& (
SYNA_TCM_DEV
 != g_syna_dev)) {

723 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

724 #ifde‡
SAVE_ERR_MSG


725 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚\n", 
__func__
);

726 
	`add_îr‹_msg
(
îr
);

728  -
EINVAL
;

732 
ªtvÆ
 = 
	`sy«_do_¥ï¨©i⁄
(
no¶ìp_í
, 
ªzîo_í
);

733 i‡(
ªtvÆ
 < 0) {

734 
	`¥ötf_e
("%†îr‹: faûÅÿdÿ¥ï¨©i⁄ \n", 
__func__
);

735 #ifde‡
SAVE_ERR_MSG


736 
	`•rötf
(
îr
, "%†îr‹: faûÅÿdÿ¥ï¨©i⁄\n", 
__func__
);

737 
	`add_îr‹_msg
(
îr
);

739 
exô
;

742 
g_sy«_dev
)

744 
SYNA_RMI_DEV
:

745 
g_ªp‹t_img_°ªam_í
 = 
åue
;

748 
SYNA_TCM_DEV
:

750 i‡(
touch_í
 =
Ál£
) {

753 
ªtvÆ
 = 
	`tcm_íabÀ_ªp‹t
(
Ál£
, 
TCM_REPORT_TOUCH
);

754 i‡(
ªtvÆ
 < 0) {

755 
	`¥ötf_e
("%†îr‹: faûÅÿdißbÀÅhêtcmÅouchÑï‹t\n", 
__func__
);

756 #ifde‡
SAVE_ERR_MSG


757 
	`•rötf
(
îr
, "%†îr‹: faûÅÿdißbÀÅhêtcmÑï‹t.\n", 
__func__
);

758 
	`add_îr‹_msg
(
îr
);

760 
exô
;

762 
	`¥ötf_i
("%†öfo: dißbÀÅhêtcmÅouchÑï‹à‘ï‹t-0x%x)\n", 
__func__
,

763 
TCM_REPORT_TOUCH
);

768 
ªtvÆ
 = 
	`tcm_íabÀ_ªp‹t
(
åue
, (
tcm_ªp‹t_code
Ë
ªp‹t_ty≥
);

769 i‡(
ªtvÆ
 < 0) {

770 
	`¥ötf_e
("%†îr‹: faûÅÿíabÀÅhêtcmÑï‹t\n", 
__func__
);

771 #ifde‡
SAVE_ERR_MSG


772 
	`•rötf
(
îr
, "%†îr‹: faûÅÿíabÀÅhêtcmÑï‹t.\n", 
__func__
);

773 
	`add_îr‹_msg
(
îr
);

775 
exô
;

777 
	`¥ötf_i
("%†öfo:É«bÀÅhêtcmÑï‹à‘ï‹t-0x%x)\n", 
__func__
,

778 (
tcm_ªp‹t_code
Ë
ªp‹t_ty≥
);

780 
g_ªp‹t_img_°ªam_í
 = 
åue
;

788 
exô
:

789  
ªtvÆ
;

790 
	}
}

801 
	$sy«_°›_image_°ªam
(
ªp‹t_ty≥
)

803 
ªtvÆ
 = 0;

804 #ifde‡
SAVE_ERR_MSG


805 
îr
[
MAX_ERR_STRING_LEN
];

808 i‡((
SYNA_RMI_DEV
 !
g_sy«_dev
Ë&& (
SYNA_TCM_DEV
 != g_syna_dev)) {

809 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

810 #ifde‡
SAVE_ERR_MSG


811 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚\n", 
__func__
);

812 
	`add_îr‹_msg
(
îr
);

814  -
EINVAL
;

817 
g_sy«_dev
) {

818 
SYNA_RMI_DEV
:

819 
g_ªp‹t_img_°ªam_í
 = 
Ál£
;

822 
SYNA_TCM_DEV
:

824 
g_ªp‹t_img_°ªam_í
 = 
Ál£
;

827 
ªtvÆ
 = 
	`tcm_íabÀ_ªp‹t
(
Ál£
, (
tcm_ªp‹t_code
Ë
ªp‹t_ty≥
);

828 i‡(
ªtvÆ
 < 0) {

829 
	`¥ötf_e
("%†îr‹: faûÅÿdißbÀÅhêtcmÑï‹t\n", 
__func__
);

830 #ifde‡
SAVE_ERR_MSG


831 
	`•rötf
(
îr
, "%s: faûÅÿdißbÀÅhêtcmÑï‹t.\n", 
__func__
);

832 
	`add_îr‹_msg
(
îr
);

834 
exô
;

836 
	`¥ötf_i
("%†öfo: dißbÀÅhêtcmÑï‹à‘ï‹t-0x%x)\n", 
__func__
,

837 (
tcm_ªp‹t_code
Ë
ªp‹t_ty≥
);

841 
ªtvÆ
 = 
	`tcm_íabÀ_ªp‹t
(
åue
, 
TCM_REPORT_TOUCH
);

842 i‡(
ªtvÆ
 < 0) {

843 
	`¥ötf_e
("%†îr‹: faûÅÿíabÀÅhêtcmÅouchÑï‹t\n", 
__func__
);

844 #ifde‡
SAVE_ERR_MSG


845 
	`•rötf
(
îr
, "%s: faûÅÿíabÀÅhêtcmÑï‹t.\n", 
__func__
);

846 
	`add_îr‹_msg
(
îr
);

848 
exô
;

850 
	`¥ötf_i
("%†öfo:É«bÀÅhêtcmÅouchÑï‹à‘ï‹t-0x%x)\n", 
__func__
,

851 
TCM_REPORT_TOUCH
);

858 
exô
:

859  
ªtvÆ
;

860 
	}
}

871 
	$sy«_ªad_ªp‹t_image_íåy
(
ªp‹t_ty≥
, *
p_ªp‹t_image
, 
size_of_image
,

872 
image_cﬁ
, 
image_row
, 
boﬁ
 
out_ö_œndsˇ≥
)

874 
ªtvÆ
 = 0;

875 #ifde‡
SAVE_ERR_MSG


876 
îr
[
MAX_ERR_STRING_LEN
];

879 i‡((
SYNA_RMI_DEV
 !
g_sy«_dev
Ë&& (
SYNA_TCM_DEV
 != g_syna_dev)) {

880 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

881 #ifde‡
SAVE_ERR_MSG


882 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚\n", 
__func__
);

883 
	`add_îr‹_msg
(
îr
);

885  -
EINVAL
;

888 i‡(!
g_ªp‹t_img_°ªam_í
) {

889 
	`¥ötf_e
("%†îr‹:Ñï‹àimagê°ªam i†nŸÉ«bÀd\n", 
__func__
);

890 #ifde‡
SAVE_ERR_MSG


891 
	`•rötf
(
îr
, "%†îr‹:Ñï‹àimagê°ªam i†nŸÉ«bÀd\n", 
__func__
);

892 
	`add_îr‹_msg
(
îr
);

894  -
EINVAL
;

897 i‡((!
p_ªp‹t_image
Ë|| (
size_of_image
 <= 0)) {

898 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî\n", 
__func__
);

899 #ifde‡
SAVE_ERR_MSG


900 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî\n", 
__func__
);

901 
	`add_îr‹_msg
(
îr
);

903  -
EINVAL
;

906 
g_sy«_dev
) {

907 
SYNA_RMI_DEV
:

909 
ªtvÆ
 = 
	`rmi_f54_ªad_ªp‹t_‰ame
(
ªp‹t_ty≥
, 
p_ªp‹t_image
,

910 
size_of_image
, 
out_ö_œndsˇ≥
);

911 i‡(
ªtvÆ
 < 0) {

912 
	`¥ötf_e
("%†îr‹: faûÅÿªadÅhêrmòªp‹t\n", 
__func__
);

913 #ifde‡
SAVE_ERR_MSG


914 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÅhêrmòªp‹t\n", 
__func__
);

915 
	`add_îr‹_msg
(
îr
);

917 
exô
;

920 
SYNA_TCM_DEV
:

922 
ªtvÆ
 = 
	`tcm_ªad_ªp‹t_‰ame
(()
ªp‹t_ty≥
, 
p_ªp‹t_image
,

923 
size_of_image
, 
out_ö_œndsˇ≥
);

924 i‡(
ªtvÆ
 < 0) {

925 
	`¥ötf_e
("%†îr‹: faûÅÿªadÅhêtcmÑï‹t\n", 
__func__
);

926 #ifde‡
SAVE_ERR_MSG


927 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÅhêtcmÑï‹t\n", 
__func__
);

928 
	`add_îr‹_msg
(
îr
);

930 
exô
;

936 
exô
:

937  
ªtvÆ
;

938 
	}
}

949 
	$sy«_run_rmi_ã°_íåy
(
ã°_id
, *
p_ªsu…
, 
size_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

950 *
p_∑øm_1
, 
size_∑øm_1
, *
p_∑øm_2
, 
size_∑øm_2
)

952 
ªtvÆ
;

953 #ifde‡
SAVE_ERR_MSG


954 
îr
[
MAX_ERR_STRING_LEN
];

957 
ã°_id
) {

958 
TEST_RMI_NOISE_RT02
:

963 
ªtvÆ
 = 
	`rmi_do_ã°_noi£_π02
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

964 
p_∑øm_2
, 
size_∑øm_2
, 20);

965 i‡(
ªtvÆ
 < 0) {

966 
	`¥ötf_e
("%†îr‹: faûÅÿru¿noi£Ñt2Åe°\n", 
__func__
);

967 #ifde‡
SAVE_ERR_MSG


968 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿noi£Ñt2Åe°\n", 
__func__
);

969 
	`add_îr‹_msg
(
îr
);

971 
	`sy«_do_sw_ª£t
();

975 
TEST_RMI_FULL_RAW_RT20
:

980 
ªtvÆ
 = 
	`rmi_do_ã°_fuŒ_øw_ˇp_π20
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

981 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

982 i‡(
ªtvÆ
 < 0) {

983 
	`¥ötf_e
("%†îr‹: faûÅÿru¿fuŒÑaw c≠Ñt20Åe°\n", 
__func__
);

984 #ifde‡
SAVE_ERR_MSG


985 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿fuŒÑaw c≠Ñt20Åe°\n", 
__func__
);

986 
	`add_îr‹_msg
(
îr
);

988 
	`sy«_do_sw_ª£t
();

994 
TEST_RMI_FULL_RAW_TDDI_RT92
:

999 
ªtvÆ
 = 
	`rmi_do_ã°_fuŒ_øw_tddi_π92
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1000 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1001 i‡(
ªtvÆ
 < 0) {

1002 
	`¥ötf_e
("%†îr‹: faûÅÿru¿fuŒÑawÅddòπ92Åe°\n", 
__func__
);

1003 #ifde‡
SAVE_ERR_MSG


1004 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿fuŒÑawÅddòπ92Åe°\n", 
__func__
);

1005 
	`add_îr‹_msg
(
îr
);

1007 
	`sy«_do_sw_ª£t
();

1011 
TEST_RMI_ABS_OPEN_RT63
:

1016 
ªtvÆ
 = 
	`rmi_do_ã°_abs_›í_π63
(
p_ªsu…
, 
size_ªsu…
,

1017 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1018 i‡(
ªtvÆ
 < 0) {

1019 
	`¥ötf_e
("%†îr‹: faûÅÿru¿ab†£nsög o≥¿π63Åe°\n", 
__func__
);

1020 #ifde‡
SAVE_ERR_MSG


1021 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿ab†£nsög o≥¿π63Åe°\n", 
__func__
);

1022 
	`add_îr‹_msg
(
îr
);

1024 
	`sy«_do_sw_ª£t
();

1028 
TEST_RMI_ADC_RANGE_RT23
:

1033 
ªtvÆ
 = 
	`rmi_do_ã°_adc_ønge_π23
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1034 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1035 i‡(
ªtvÆ
 < 0) {

1036 
	`¥ötf_e
("%†îr‹: faûÅÿru¿ad¯øngêπ23Åe°\n", 
__func__
);

1037 #ifde‡
SAVE_ERR_MSG


1038 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿ad¯øngêπ23Åe°\n", 
__func__
);

1039 
	`add_îr‹_msg
(
îr
);

1041 
	`sy«_do_sw_ª£t
();

1045 
TEST_RMI_SENSOR_SPEED_RT22
:

1049 
ªtvÆ
 = 
	`rmi_do_ã°_£ns‹_•ìd_π22
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1050 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1051 i‡(
ªtvÆ
 < 0) {

1052 
	`¥ötf_e
("%†îr‹: faûÅÿru¿£ns‹ s≥edÑt22Åe°\n", 
__func__
);

1053 #ifde‡
SAVE_ERR_MSG


1054 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿£ns‹ s≥edÑt22Åe°\n", 
__func__
);

1055 
	`add_îr‹_msg
(
îr
);

1057 
	`sy«_do_sw_ª£t
();

1061 
TEST_RMI_TAGSMOISTURE_RT76
:

1066 
ªtvÆ
 = 
	`rmi_do_ã°_ègsmoi°uª_π76
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1067 
p_∑øm_2
, 
size_∑øm_2
);

1068 i‡(
ªtvÆ
 < 0) {

1069 
	`¥ötf_e
("%†îr‹: faûÅÿru¿èg moi°uªÑt76Åe°\n", 
__func__
);

1070 #ifde‡
SAVE_ERR_MSG


1071 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿èg moi°uªÑt76Åe°\n", 
__func__
);

1072 
	`add_îr‹_msg
(
îr
);

1074 
	`sy«_do_sw_ª£t
();

1078 
TEST_RMI_RT133
:

1083 
ªtvÆ
 = 
	`rmi_do_ã°_π133
(
p_ªsu…
, 
size_ªsu…
,

1084 
p_∑øm_2
, 
size_∑øm_2
);

1085 i‡(
ªtvÆ
 < 0) {

1086 
	`¥ötf_e
("%†îr‹: faûÅÿru¿π133Åe°\n", 
__func__
);

1087 #ifde‡
SAVE_ERR_MSG


1088 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿π133Åe°\n", 
__func__
);

1089 
	`add_îr‹_msg
(
îr
);

1091 
	`sy«_do_sw_ª£t
();

1095 
TEST_RMI_ABS_DELTA_RT59
:

1099 
ªtvÆ
 = 
	`rmi_do_ã°_abs_dñè_π59
(
p_ªsu…
, 
size_ªsu…
,

1100 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1101 i‡(
ªtvÆ
 < 0) {

1102 
	`¥ötf_e
("%†îr‹: faûÅÿru¿ab†£nsög o≥¿π59Åe°\n", 
__func__
)

1103 #ifde‡
SAVE_ERR_MSG


1104 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿ab†£nsög o≥¿π59Åe°\n", 
__func__
);

1105 
	`add_îr‹_msg
(
îr
);

1107 
	`sy«_do_sw_ª£t
();

1111 
TEST_RMI_TRX_SHORT_RT26
:

1116 
ªtvÆ
 = 
	`rmi_do_ã°_åx_sh‹t_π26
(
p_ªsu…
, 
size_ªsu…
, 
p_∑øm_1
, 
size_∑øm_1
,

1117 
p_∑øm_2
, 
size_∑øm_2
);

1118 i‡(
ªtvÆ
 < 0) {

1119 
	`¥ötf_e
("%†îr‹: faûÅÿru¿åx sh‹àã°Ñt26\n", 
__func__
);

1120 #ifde‡
SAVE_ERR_MSG


1121 
	`•rötf
(
îr
, "%†îr‹: faûÅÿåx sh‹àã°Ñt26\n", 
__func__
);

1122 
	`add_îr‹_msg
(
îr
);

1124 
	`sy«_do_sw_ª£t
();

1129 
	`¥ötf_e
("%†îr‹: unsuµ‹ãdÅe° iãm (%x)\n", 
__func__
, 
ã°_id
);

1130 
ªtvÆ
 = -
EINVAL
;

1134  
ªtvÆ
;

1135 
	}
}

1145 
	$sy«_run_tcm_ã°_íåy
(
ã°_id
, *
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1146 *
p_∑øm_1
, 
size_∑øm_1
, *
p_∑øm_2
, 
size_∑øm_2
)

1148 
ªtvÆ
;

1149 #ifde‡
SAVE_ERR_MSG


1150 
îr
[
MAX_ERR_STRING_LEN
];

1153 
ã°_id
) {

1155 
TEST_TCM_NOISE_PID0A
:

1161 
ªtvÆ
 = 
	`tcm_do_ã°_noi£_pid0a
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1162 
p_∑øm_2
, 
size_∑øm_2
);

1163 i‡(
ªtvÆ
 < 0) {

1164 
	`¥ötf_e
("%†îr‹: faûÅÿru¿noi£Åe°Öid0a\n", 
__func__
);

1165 #ifde‡
SAVE_ERR_MSG


1166 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿noi£Åe°Öid0a\n", 
__func__
);

1167 
	`add_îr‹_msg
(
îr
);

1169 
	`sy«_do_sw_ª£t
();

1173 
TEST_TCM_DRT_PID07
:

1178 
ªtvÆ
 = 
	`tcm_do_ã°_dπ_pid07
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1179 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1180 i‡(
ªtvÆ
 < 0) {

1181 
	`¥ötf_e
("%†îr‹: faûÅÿru¿dy«mi¯øngêã°Öid07\n", 
__func__
);

1182 #ifde‡
SAVE_ERR_MSG


1183 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿dy«mi¯øngêã°Öid07\n", 
__func__
);

1184 
	`add_îr‹_msg
(
îr
);

1186 
	`sy«_do_sw_ª£t
();

1191 
TEST_TCM_FULL_RAW_PID05
:

1196 
ªtvÆ
 = 
	`tcm_do_ã°_fuŒ_øw_pid05
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1197 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1198 i‡(
ªtvÆ
 < 0) {

1199 
	`¥ötf_e
("%†îr‹: faûÅÿru¿dis¸ëêfuŒÑawÅe°Öid05\n", 
__func__
);

1200 #ifde‡
SAVE_ERR_MSG


1201 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿dis¸ëêfuŒÑawÅe°Öid05\n", 
__func__
);

1202 
	`add_îr‹_msg
(
îr
);

1204 
	`sy«_do_sw_ª£t
();

1209 
TEST_TCM_TRX_TRX_SHORT_PID01
:

1214 
ªtvÆ
 = 
	`tcm_do_ã°_åx_åx_sh‹t_pid01
(
p_ªsu…
, 
p_∑øm_1
, 
size_∑øm_1
,

1215 
p_∑øm_2
, 
size_∑øm_2
);

1216 i‡(
ªtvÆ
 < 0) {

1217 
	`¥ötf_e
("%†îr‹: faûÅÿru¿åxÅrx sh‹àã°Öid01\n", 
__func__
);

1218 #ifde‡
SAVE_ERR_MSG


1219 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿åxÅrx sh‹àã°Öid01\n", 
__func__
);

1220 
	`add_îr‹_msg
(
îr
);

1222 
	`sy«_do_sw_ª£t
();

1228 
TEST_TCM_TRX_GROUND_PID03
:

1233 
ªtvÆ
 = 
	`tcm_do_ã°_åx_ground_pid03
(
p_ªsu…
, 
p_∑øm_1
, 
size_∑øm_1
,

1234 
p_∑øm_2
, 
size_∑øm_2
);

1235 i‡(
ªtvÆ
 < 0) {

1236 
	`¥ötf_e
("%†îr‹: faûÅÿru¿åx groundÅe°Öid03\n", 
__func__
);

1237 #ifde‡
SAVE_ERR_MSG


1238 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿åx groundÅe°Öid03\n", 
__func__
);

1239 
	`add_îr‹_msg
(
îr
);

1241 
	`sy«_do_sw_ª£t
();

1246 
TEST_TCM_ADC_RANGE_PID11
:

1251 
ªtvÆ
 = 
	`tcm_do_ã°_adc_ønge_pid11
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1252 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1253 i‡(
ªtvÆ
 < 0) {

1254 
	`¥ötf_e
("%†îr‹: faûÅÿru¿ad¯øngêã°Öid11\n", 
__func__
);

1255 #ifde‡
SAVE_ERR_MSG


1256 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿ad¯øngêã°Öid11\n", 
__func__
);

1257 
	`add_îr‹_msg
(
îr
);

1259 
	`sy«_do_sw_ª£t
();

1264 
TEST_TCM_ABS_RAWCAP_PID12
:

1269 
ªtvÆ
 = 
	`tcm_do_ã°_abs_øwˇp_pid12
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1270 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1271 i‡(
ªtvÆ
 < 0) {

1272 
	`¥ötf_e
("%†îr‹: faûÅÿru¿ab†øw c≠Åe°Öid12\n", 
__func__
);

1273 #ifde‡
SAVE_ERR_MSG


1274 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿ab†øw c≠Åe°Öid12\n", 
__func__
);

1275 
	`add_îr‹_msg
(
îr
);

1277 
	`sy«_do_sw_ª£t
();

1282 
TEST_TCM_HYBRID_ABS_NOISE_PID1D
:

1287 
ªtvÆ
 = 
	`tcm_do_ã°_hy_abs_no£_pid1d
(
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1288 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1289 i‡(
ªtvÆ
 < 0) {

1290 
	`¥ötf_e
("%†îr‹: faûÅÿru¿hybridáb†noi£Åe°Öid1d\n", 
__func__
);

1291 #ifde‡
SAVE_ERR_MSG


1292 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿hybridáb†noi£Åe°Öid1d\n", 
__func__
);

1293 
	`add_îr‹_msg
(
îr
);

1295 
	`sy«_do_sw_ª£t
();

1302 
	`¥ötf_e
("%†îr‹: unknow¿ã° iãm (0x%x)\n", 
__func__
, 
ã°_id
);

1303 
ªtvÆ
 = -
EINVAL
;

1307  
ªtvÆ
;

1308 
	}
}

1317 
	$sy«_run_ã°_íåy
(
ã°_id
, *
p_ªsu…
, 
size_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1318 *
p_∑øm_1
, 
size_∑øm_1
, *
p_∑øm_2
, 
size_∑øm_2
)

1320 
ªtvÆ
 = -1;

1321 #ifde‡
SAVE_ERR_MSG


1322 
îr
[
MAX_ERR_STRING_LEN
];

1325 i‡((
SYNA_RMI_DEV
 !
g_sy«_dev
Ë&& (
SYNA_TCM_DEV
 != g_syna_dev)) {

1326 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

1327 #ifde‡
SAVE_ERR_MSG


1328 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚\n", 
__func__
);

1329 
	`add_îr‹_msg
(
îr
);

1331  -
EINVAL
;

1334 i‡(
SYNA_RMI_DEV
 =
g_sy«_dev
) {

1335 
ªtvÆ
 = 
	`sy«_run_rmi_ã°_íåy
(
ã°_id
, 
p_ªsu…
, 
size_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1336 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1338 i‡(
SYNA_TCM_DEV
 =
g_sy«_dev
) {

1339 
ªtvÆ
 = 
	`sy«_run_tcm_ã°_íåy
(
ã°_id
, 
p_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

1340 
p_∑øm_1
, 
size_∑øm_1
, 
p_∑øm_2
, 
size_∑øm_2
);

1343  
ªtvÆ
;

1344 
	}
}

1356 
	$sy«_run_ã°_ex_high_ªsi°™˚_íåy
(*
p_ªsu…
, 
size_ªsu…
,

1357 *
p_txr€_ªsu…
, *
p_size_txr€_ªsu…
,

1358 *
p_rxr€_ªsu…
, *
p_size_rxr€_ªsu…
,

1359 *
ªf_‰ame
, 
cﬁ
, 
row
,

1360 
limô_surÁ˚
, 
limô_txr€
, 
limô_rxr€
)

1362 
ªtvÆ
;

1363 *
ã°ög_d©a_‰ame
 = 
NULL
;

1364 
ã°ög_d©a_size
 = 0;

1365 *
ã°ög_tx_d©a_‰ame
 = 
NULL
;

1366 *
ã°ög_rx_d©a_‰ame
 = 
NULL
;

1367 
tx
 = ()
	`sy«_gë_image_rows
(
Ál£
);

1368 
rx
 = ()
	`sy«_gë_image_cﬁs
(
Ál£
);

1369 
i
;

1370 #ifde‡
SAVE_ERR_MSG


1371 
îr
[
MAX_ERR_STRING_LEN
];

1374 
ã°ög_d©a_size
 = 
tx
 * 
rx
;

1376 
ã°ög_d©a_‰ame
 = 
	`ˇŒoc
((
size_t
)
ã°ög_d©a_size
, ());

1377 
ã°ög_tx_d©a_‰ame
 = 
	`ˇŒoc
((
size_t
)
tx
, ());

1378 
ã°ög_rx_d©a_‰ame
 = 
	`ˇŒoc
((
size_t
)
rx
, ());

1379 i‡((!
ã°ög_d©a_‰ame
Ë|| (!
ã°ög_tx_d©a_‰ame
Ë|| (!
ã°ög_rx_d©a_‰ame
)) {

1380 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã mem‹y f‹Åe°ög d©a\n", 
__func__
);

1381 #ifde‡
SAVE_ERR_MSG


1382 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã mem‹y f‹Åe°ög d©a\n", 
__func__
);

1383 
	`add_îr‹_msg
(
îr
);

1385 
ªtvÆ
 = -
ENOMEM
;

1386 
exô
;

1390 i‡(
SYNA_RMI_DEV
 =
g_sy«_dev
) {

1391 
ªtvÆ
 = 
	`rmi_do_ã°_ex_high_ªsi°™˚_π20
(
ã°ög_d©a_‰ame
, 
ã°ög_rx_d©a_‰ame
,

1392 
ã°ög_tx_d©a_‰ame
, 
ªf_‰ame
, 
cﬁ
, 
row
,

1393 
limô_surÁ˚
, 
limô_rxr€
, 
limô_txr€
);

1395 i‡(
SYNA_TCM_DEV
 =
g_sy«_dev
) {

1397 
ªtvÆ
 = 
	`tcm_do_ã°_ex_high_ªsi°™˚_pid05
(
ã°ög_d©a_‰ame
, 
ã°ög_rx_d©a_‰ame
,

1398 
ã°ög_tx_d©a_‰ame
, 
ªf_‰ame
, 
cﬁ
, 
row
,

1399 
limô_surÁ˚
, 
limô_rxr€
, 
limô_txr€
);

1402 
	`¥ötf_e
("%†îr‹: unknow¿devi˚,Éxô.\n", 
__func__
);

1403 #ifde‡
SAVE_ERR_MSG


1404 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚,Éxô.\n", 
__func__
);

1405 
	`add_îr‹_msg
(
îr
);

1407 
ªtvÆ
 = -
ENOMEM
;

1408 
exô
;

1411 i‡(
ªtvÆ
 < 0) {

1412 
	`¥ötf_e
("%†îr‹: faûÅÿru¿ex highÑesi°™˚Åe°\n", 
__func__
);

1413 #ifde‡
SAVE_ERR_MSG


1414 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿ex highÑesi°™˚Åe°\n", 
__func__
);

1415 
	`add_îr‹_msg
(
îr
);

1417 
	`sy«_do_sw_ª£t
();

1421 i‡((
p_ªsu…
Ë&& (
size_ªsu…
 > 0)) {

1422 i‡(
size_ªsu…
 !
ã°ög_d©a_size
) {

1423 
	`¥ötf_e
("%sÉrror: size is mismatch (size_result = %d,Åesting_data_size = %d)\n",

1424 
__func__
, 
size_ªsu…
, 
ã°ög_d©a_size
);

1425 #ifde‡
SAVE_ERR_MSG


1426 
	`•rötf
(
îr
, "%sÉrror: size is mismatch (size_result = %d,Åesting_data_size = %d)\n",

1427 
__func__
, 
size_ªsu…
, 
ã°ög_d©a_size
);

1428 
	`add_îr‹_msg
(
îr
);

1430 
exô
;

1433 
i
 = 0; i < (
tx
 * 
rx
); i++) {

1434 
p_ªsu…
[
i
] = 
ã°ög_d©a_‰ame
[i];

1437 i‡(
p_txr€_ªsu…
) {

1438 *
p_size_txr€_ªsu…
 = ()
tx
;

1439 
i
 = 0; i < 
tx
; i++) {

1440 
p_txr€_ªsu…
[
i
] = 
ã°ög_tx_d©a_‰ame
[i];

1443 i‡(
p_rxr€_ªsu…
) {

1444 *
p_size_rxr€_ªsu…
 = ()
rx
;

1445 
i
 = 0; i < 
rx
; i++) {

1446 
p_rxr€_ªsu…
[
i
] = 
ã°ög_rx_d©a_‰ame
[i];

1450 
exô
:

1451 i‡(
ã°ög_d©a_‰ame
)

1452 
	`‰ì
(
ã°ög_d©a_‰ame
);

1453 i‡(
ã°ög_tx_d©a_‰ame
)

1454 
	`‰ì
(
ã°ög_tx_d©a_‰ame
);

1455 i‡(
ã°ög_rx_d©a_‰ame
)

1456 
	`‰ì
(
ã°ög_rx_d©a_‰ame
);

1458  
ªtvÆ
;

1459 
	}
}

1470 
	$sy«_run_ã°_ex_åx_sh‹t_íåy
(*
p_ªsu…_d©a
, 
size_ªsu…_d©a
, *
p_ªsu…_d©a_ex_pö
,

1471 
size_ªsu…_d©a_ex_pö
, *
p_ªsu…_pö
, 
size_ªsu…_pö
,

1472 *
p_limô_1
, 
size_limô_1
, *
p_limô_2
, 
size_limô_2
)

1474 
ªtvÆ
;

1475 #ifde‡
SAVE_ERR_MSG


1476 
îr
[
MAX_ERR_STRING_LEN
];

1479 i‡((!
p_ªsu…_d©a
Ë|| (!
p_ªsu…_pö
Ë|| (!
p_ªsu…_d©a_ex_pö
)) {

1480 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî\n", 
__func__
);

1481 #ifde‡
SAVE_ERR_MSG


1482 
	`•rötf
(
îr
, "%s: invÆidÖ¨amëî\n", 
__func__
);

1483 
	`add_îr‹_msg
(
îr
);

1485  -
ENOMEM
;

1489 i‡(
SYNA_RMI_DEV
 =
g_sy«_dev
) {

1490 
ªtvÆ
 = 
	`rmi_do_ã°_ex_åx_sh‹t_π26100
(
p_ªsu…_d©a
, 
size_ªsu…_d©a
,

1491 
p_ªsu…_d©a_ex_pö
, 
size_ªsu…_d©a_ex_pö
,

1492 
p_ªsu…_pö
, 
size_ªsu…_pö
,

1493 
p_limô_1
, 
size_limô_1
, 
p_limô_2
, 
size_limô_2
);

1494 i‡(
ªtvÆ
 < 0) {

1495 
	`¥ötf_e
("%†îr‹: faûÅÿru¿exÅrx sh‹àã°\n", 
__func__
);

1496 #ifde‡
SAVE_ERR_MSG


1497 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿exÅrx sh‹àã°\n", 
__func__
);

1498 
	`add_îr‹_msg
(
îr
);

1500 
	`sy«_do_sw_ª£t
();

1504 
	`¥ötf_e
("%†îr‹: unknow¿devi˚,Éxô.\n", 
__func__
);

1505 #ifde‡
SAVE_ERR_MSG


1506 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚,Éxô.\n", 
__func__
);

1507 
	`add_îr‹_msg
(
îr
);

1509  -
ENOMEM
;

1512  
ªtvÆ
;

1513 
	}
}

1522 
	$sy«_gë_fúmw¨e_c⁄fig_size
()

1524 
ªtvÆ
 = 0;

1525 
g_sy«_dev
) {

1526 
SYNA_RMI_DEV
:

1527 
ªtvÆ
 = 0;

1529 
SYNA_TCM_DEV
:

1530 
ªtvÆ
 = 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©ic_c⁄fig_size
[0],

1531 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©ic_c⁄fig_size
[1]);

1534 
	`¥ötf_e
("%†îr‹: unknow¿sy™ devi˚\n", 
__func__
);

1537  
ªtvÆ
;

1538 
	}
}

1547 
	$sy«_gë_fúmw¨e_c⁄fig
(* 
buf
, 
size_buf
)

1549 
ªtvÆ
 = 0;

1550 #ifde‡
SAVE_ERR_MSG


1551 
îr
[
MAX_ERR_STRING_LEN
];

1554 i‡((
SYNA_RMI_DEV
 !
g_sy«_dev
Ë&& (
SYNA_TCM_DEV
 != g_syna_dev)) {

1555 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

1556 #ifde‡
SAVE_ERR_MSG


1557 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚\n", 
__func__
);

1558 
	`add_îr‹_msg
(
îr
);

1560  -
EINVAL
;

1563 
g_sy«_dev
) {

1564 
SYNA_RMI_DEV
:

1565 
ªtvÆ
 = 0;

1567 
SYNA_TCM_DEV
:

1568 
ªtvÆ
 = 
	`tcm_gë_°©ic_c⁄fig
();

1569 i‡(
ªtvÆ
 < 0) {

1570 #ifde‡
SAVE_ERR_MSG


1571 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhê°©i¯c⁄fig\n", 
__func__
);

1572 
	`add_îr‹_msg
(
îr
);

1574  -
EINVAL
;

1577 
	`mem˝y
(
buf
, 
g_tcm_h™dÀr
.
°©ic_c⁄fig
, (
size_t
)
size_buf
);

1580 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

1583  
ªtvÆ
;

1584 
	}
}

1596 
	$sy«_run_øw_comm™d
(
ty≥
, 
cmd
,

1597 * 
ö
, 
size_ö
,

1598 * 
ª•
, 
size_ª•
)

1600 
ªtvÆ
 = 0;

1601 
ªg_addr
;

1602 
Àn
 = 0;

1603 *
∑ckë
;

1604 
i
, 
j
;

1605 #ifde‡
SAVE_ERR_MSG


1606 
îr
[
MAX_ERR_STRING_LEN
];

1609 i‡((
SYNA_RMI_DEV
 !
g_sy«_dev
Ë&& (
SYNA_TCM_DEV
 != g_syna_dev)) {

1610 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

1611 #ifde‡
SAVE_ERR_MSG


1612 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚\n", 
__func__
);

1613 
	`add_îr‹_msg
(
îr
);

1615  -
EINVAL
;

1619 
g_sy«_dev
) {

1620 
SYNA_RMI_DEV
:

1622 i‡(
RAW_CMD_READ
 =
ty≥
) {

1623 
ªg_addr
 = ()
cmd
;

1624 
Àn
 = 
size_ö
;

1626 
	`¥ötf_i
("%s info:ÑmiÑead,Ñeg 0x%x (len = %d)\n",

1627 
__func__
, 
ªg_addr
, 
Àn
);

1629 
ªtvÆ
 = 
	`rmi_ªad_ªg
(
ªg_addr
, 
ö
, 
Àn
);

1630 i‡(
ªtvÆ
 < 0) {

1631 #ifde‡
SAVE_ERR_MSG


1632 
	`•rötf
(
îr
, "%sÉrror: failÅoÑeadÑmiÑeg 0x%x (len = %d)\n",

1633 
__func__
, 
ªg_addr
, 
Àn
);

1634 
	`add_îr‹_msg
(
îr
);

1636  -
EINVAL
;

1639 i‡(
RAW_CMD_WRITE
 =
ty≥
) {

1640 
ªg_addr
 = (Ë
cmd
;

1641 
Àn
 = 
size_ö
;

1643 
	`¥ötf_i
("%s info:Ñmi write,Ñeg 0x%x (len = %d)\n",

1644 
__func__
, 
ªg_addr
, 
Àn
);

1646 
ªtvÆ
 = 
	`rmi_wrôe_ªg
(
ªg_addr
, 
ö
, 
Àn
);

1647 i‡(
ªtvÆ
 < 0) {

1648 #ifde‡
SAVE_ERR_MSG


1649 
	`•rötf
(
îr
, "%sÉrror: failÅo writeÑmiÑeg 0x%x (len = %d)\n",

1650 
__func__
, 
ªg_addr
, 
Àn
);

1651 
	`add_îr‹_msg
(
îr
);

1653  -
EINVAL
;

1658 
SYNA_TCM_DEV
:

1660 i‡(
RAW_CMD_READ
 =
ty≥
) {

1661 
	`¥ötf_i
("%†öfo:ÅcmÑód, size_ö = %d \n", 
__func__
, 
size_ö
);

1663 
ªtvÆ
 = 
	`tcm_ªad_mesßge
(
ö
, ()
size_ö
);

1664 i‡(
ªtvÆ
 < 0) {

1665 #ifde‡
SAVE_ERR_MSG


1666 
	`•rötf
(
îr
, "%sÉrror: failÅoÑeadÅcmÖacket (len = %d)\n",

1667 
__func__
, 
size_ö
);

1668 
	`add_îr‹_msg
(
îr
);

1670  -
EINVAL
;

1673 i‡(
RAW_CMD_WRITE
 =
ty≥
) {

1674 
	`¥ötf_i
("%s info:Åcm write, cmd 0x%x (size_in = %d)\n",

1675 
__func__
, 
cmd
, 
size_ö
);

1677 
Àn
 = 
size_ö
 + 3;

1678 
∑ckë
 = 
	`ˇŒoc
((
size_t
Ë
Àn
, ());

1679 
∑ckë
[0] = ()
cmd
;

1680 
∑ckë
[1] = ()(
size_ö
 & 0xff);

1681 
∑ckë
[2] = ()((
size_ö
 >> 8) & 0xff);

1683 
	`¥ötf_i
("%s info:Åcm write,Öacket[0 - 2] = 0x%x 0x%x 0x%x\n",

1684 
__func__
, 
∑ckë
[0],Öacket[1],Öacket[2]);

1686 
i
 = 3, 
j
 = 0; i < 
Àn
; i++, j++) {

1687 
∑ckë
[
i
] = 
ö
[
j
];

1689 
	`¥ötf_i
("%s info:Åcm write,Öacket[%d] = 0x%x\n",

1690 
__func__
, 
i
, 
∑ckë
[i] );

1693 
ªtvÆ
 = 
	`tcm_øw_c⁄åﬁ
(
∑ckë
, ()
Àn
, 
ª•
, 
size_ª•
);

1694 i‡(
ªtvÆ
 < 0) {

1695 #ifde‡
SAVE_ERR_MSG


1696 
	`•rötf
(
îr
, "%sÉrror: failÅo writeÅcmÖacket, 0x%x 0x%x 0x%x\n",

1697 
__func__
, 
∑ckë
[0],Öacket[1],Öacket[2]);

1698 
	`add_îr‹_msg
(
îr
);

1700  -
EINVAL
;

1703 
	`‰ì
(
∑ckë
);

1708 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

1713  
ªtvÆ
;

1714 
	}
}

1729 
	$sy«_quîy_touch_ª•⁄£_íåy
(
max_fögîs_to_¥o˚ss
)

1731 
ªtvÆ
 = 0;

1732 
touch_x
[
MAX_FINGER
] = {0};

1733 
touch_y
[
MAX_FINGER
] = {0};

1734 
touch_°©us
[
MAX_FINGER
] = {0};

1735 
i
;

1736 #ifde‡
SAVE_ERR_MSG


1737 
îr
[
MAX_ERR_STRING_LEN
];

1740 i‡((
SYNA_RMI_DEV
 !
g_sy«_dev
Ë&& (
SYNA_TCM_DEV
 != g_syna_dev)) {

1741 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

1742 #ifde‡
SAVE_ERR_MSG


1743 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚\n", 
__func__
);

1744 
	`add_îr‹_msg
(
îr
);

1746  -
EINVAL
;

1749 i‡(
SYNA_RMI_DEV
 =
g_sy«_dev
) {

1750 
ªtvÆ
 = 
	`rmi_quîy_touch_ª•⁄£
(
touch_x
, 
touch_y
, 
touch_°©us
, 
max_fögîs_to_¥o˚ss
);

1751 i‡(
ªtvÆ
 < 0) {

1752 #ifde‡
SAVE_ERR_MSG


1753 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhêtouchÑe•⁄£\n", 
__func__
);

1754 
	`add_îr‹_msg
(
îr
);

1756  -
EINVAL
;

1759 i‡(
SYNA_TCM_DEV
 =
g_sy«_dev
) {

1760 
ªtvÆ
 = 
	`tcm_quîy_touch_ª•⁄£
(
touch_x
, 
touch_y
, 
touch_°©us
, 
max_fögîs_to_¥o˚ss
);

1761 i‡(
ªtvÆ
 < 0) {

1762 #ifde‡
SAVE_ERR_MSG


1763 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhêtouchÑe•⁄£\n", 
__func__
);

1764 
	`add_îr‹_msg
(
îr
);

1766  -
EINVAL
;

1771 #ifde‡
TOUCH_CALLBACK


1772 
i
 = 0; i < 
max_fögîs_to_¥o˚ss
; i++ ) {

1773 i‡(
g_fögî_°©us
[
i
] !
touch_°©us
[i]) {

1775 i‡((
touch_°©us
[
i
] !0x00Ë&& 
g_fögî_°©us
[i] == 0x00) {

1776 
	`ˇŒback_fögî_down
(
i
, 
touch_x
[i], 
touch_y
[i]);

1778 i‡((
touch_°©us
[
i
] =0x00Ë&& 
g_fögî_°©us
[i] != 0x00) {

1779 
	`ˇŒback_fögî_up
(
i
);

1782 
g_fögî_°©us
[
i
] = 
touch_°©us
[i];

1787  
ªtvÆ
;

1788 
	}
}

1798 
	$sy«_gë_pös_m≠pög
(
rxes_off£t
, 
rxes_Àn
, 
txes_off£t
, 
txes_Àn
)

1800 
ªtvÆ
 = 0;

1801 #ifde‡
SAVE_ERR_MSG


1802 
îr
[
MAX_ERR_STRING_LEN
];

1805 i‡((
SYNA_RMI_DEV
 !
g_sy«_dev
Ë&& (
SYNA_TCM_DEV
 != g_syna_dev)) {

1806 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

1807 #ifde‡
SAVE_ERR_MSG


1808 
	`•rötf
(
îr
, "%†îr‹: unknow¿devi˚\n", 
__func__
);

1809 
	`add_îr‹_msg
(
îr
);

1811  -
EINVAL
;

1814 
g_sy«_dev
) {

1815 
SYNA_RMI_DEV
:

1816 
	`¥ötf_i
("%†öfo:Öö†m≠pög ha†bì¿°‹ed i¿rmi_sˇn_pdt.\n", 
__func__
);

1817 
ªtvÆ
 = 0;

1819 
SYNA_TCM_DEV
:

1820 
ªtvÆ
 = 
	`tcm_gë_pös_m≠pög
(
rxes_off£t
, 
rxes_Àn
, 
txes_off£t
, 
txes_Àn
,

1822 i‡(
ªtvÆ
 < 0) {

1823 #ifde‡
SAVE_ERR_MSG


1824 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhêpö†m≠pög\n", 
__func__
);

1825 
	`add_îr‹_msg
(
îr
);

1827  -
EINVAL
;

1832 
	`¥ötf_e
("%†îr‹: unknow¿devi˚\n", 
__func__
);

1835  
ªtvÆ
;

1836 
	}
}

	@cpp/jni/syna_dev_manager.h

28 
	~<°dio.h
>

29 
	~<°dlib.h
>

30 
	~<°dboﬁ.h
>

31 
	~<°rög.h
>

33 
	~"«tive_sy«_lib.h
"

35 #i‚de‡
_SYNA_DEV_MANAGER_H__


36 
	#_SYNA_DEV_MANAGER_H__


	)

38 
	#SAVE_ERR_MSG


	)

40 
	#NUMBER_OF_SYNADEV_TO_SCAN
 (10)

	)

43 
	eTEST_RESULT
 {

44 
	mTEST_RESULT_NONE
,

45 
	mTEST_RESULT_ERROROUT
,

46 
	mTEST_RESULT_FAIL
,

47 
	mTEST_RESULT_PASS
,

51 
	eFINGER_STATE
 {

52 
	mFINGER_UP
,

53 
	mFINGER_DOWN
,

57 
	gg_dev_node
[128];

58 
	gg_dev_fûe_des¸ùt‹
;

61 
	#GET_BIT
(
v¨
,
k
Ë(((v¨Ë& (1<<(k))Ë>> k)

	)

63 
	#MIN
(
x
, 
y
Ë(((xË< (y)Ë? (xË: (y))

	)

64 
	#MAX
(
x
, 
y
Ë(((xË> (y)Ë? (xË: (y))

	)

66 
	$c⁄vît_uc_to_sh‹t
(
lsb
, 
msb
) {

67  (
msb
 << 8Ë| 
lsb
;

68 
	}
}

70 
boﬁ
 
	$check_°r_°¨ts_wôh
(c⁄° *
¥e
, c⁄° *
°r
)

72 
size_t
 
Àn_¥e
 = 
	`°æí
(
¥e
);

73 
size_t
 
Àn_°r
 = 
	`°æí
(
°r
);

74  
Àn_°r
 < 
Àn_¥e
 ? 
Ál£
 : 
	`°∫cmp
(
¥e
, 
°r
,Üen_pre) == 0;

75 
	}
}

77 
	$ˇl_¸c
(*
c⁄fig
, 
Àn
)

79 
ãmp
;

80 
sum1
 = 0xffff;

81 
sum2
 = 0xffff;

83 
Àn
--) {

84 
ãmp
 = *
c⁄fig
;

85 
sum1
 +
ãmp
;

86 
sum2
 +
sum1
;

87 
sum1
 = (sum1 & 0xffff) + (sum1 >> 16);

88 
sum2
 = (sum2 & 0xffff) + (sum2 >> 16);

89 
c⁄fig
++;

92  ()(
sum2
 << 16 | 
sum1
);

93 
	}
}

97 
boﬁ
 
sy«_föd_dev
(*
dev_node
);

98 
boﬁ
 
sy«_£t_dev
(c⁄° *
dev_node
, boﬁ 
is_rmi
, boﬁ 
is_tcm
);

99 
sy«_›í_dev
(c⁄° *
dev_node
);

100 
sy«_˛o£_dev
(c⁄° *
dev_node
);

103 
sy«_do_idítify
(*
p_out
);

104 
sy«_do_sw_ª£t
();

105 
sy«_do_¥ï¨©i⁄
(
boﬁ
 
no¶ìp_í
, boﬁ 
ªzîo_í
);

108 * 
sy«_gë_devi˚_id
();

109 * 
sy«_gë_c⁄fig_id
();

110 
sy«_gë_fw_id
();

111 
sy«_gë_image_rows
(
boﬁ
 
out_ö_œndsˇ≥
);

112 
sy«_gë_image_cﬁs
(
boﬁ
 
out_ö_œndsˇ≥
);

113 
sy«_gë_num_bäs
();

114 
sy«_gë_image_has_hybrid
();

115 
sy«_gë_num_f‹˚_ñecs
();

118 
sy«_gë_fúmw¨e_c⁄fig_size
();

119 
sy«_gë_fúmw¨e_c⁄fig
(* 
buf
, 
size_buf
);

122 
sy«_°¨t_image_°ªam
(
ªp‹t_ty≥
, 
boﬁ
 
touch_í
,

123 
boﬁ
 
no¶ìp_í
, boﬁ 
ªzîo_í
);

124 
sy«_°›_image_°ªam
(
ªp‹t_ty≥
);

125 
sy«_ªad_ªp‹t_image_íåy
(
ªp‹t_ty≥
, *
p_ªp‹t_image
, 
size_of_image
,

126 
image_cﬁ
, 
image_row
, 
boﬁ
 
out_ö_œndsˇ≥
);

129 
sy«_run_ã°_íåy
(
ã°_id
, *
p_ªsu…
, 
size_ªsu…
, 
ªsu…_cﬁ
, 
ªsu…_row
,

130 *
p_∑øm_1
, 
size_∑øm_1
, *
p_∑øm_2
, 
size_∑øm_2
);

131 
sy«_run_ã°_ex_high_ªsi°™˚_íåy
(*
p_ªsu…
, 
size_ªsu…
,

132 *
p_txr€_ªsu…
, *
p_size_txr€_ªsu…
,

133 *
p_rxr€_ªsu…
, *
p_size_rxr€_ªsu…
,

134 *
ªf_‰ame
, 
cﬁ
, 
row
,

135 
limô_surÁ˚
, 
limô_txr€
, 
limô_rxr€
);

136 
sy«_run_ã°_ex_åx_sh‹t_íåy
(*
p_ªsu…_d©a
, 
size_ªsu…_d©a
,

137 *
p_ªsu…_d©a_ex_pö
, 
size_ªsu…_d©a_ex_pö
,

138 *
p_ªsu…_pö
, 
size_ªsu…_pö
,

139 *
p_limô_1
, 
size_limô_1
,

140 *
p_limô_2
, 
size_limô_2
);

143 
sy«_run_øw_comm™d
(
ty≥
, 
cmd
,

144 * 
ö
, 
size_ö
, * 
ª•
, 
size_ª•
);

147 
sy«_quîy_touch_ª•⁄£_íåy
(
max_fögîs_to_¥o˚ss
);

150 
sy«_gë_pös_m≠pög
(
rxes_off£t
, 
rxes_Àn
, 
txes_off£t
, 
txes_Àn
);

	@cpp/jni/tcm_control.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

33 
	~<°dboﬁ.h
>

34 
	~<uni°d.h
>

35 
	~<f˙é.h
>

36 
	~<sys/°©.h
>

37 
	~<sys/io˘l.h
>

39 
	~"sy«_dev_m™agî.h
"

40 
	~"tcm_c⁄åﬁ.h
"

42 #ifde‡
SAVE_ERR_MSG


43 
	~"îr_msg_˘æ.h
"

47 
	#TCM_DEV_PATH
 "/dev/tcm"

	)

49 
	#DEVICE_IOC_MAGIC
 's'

	)

50 
	#DEVICE_IOC_RESET
 
	`_IO
(
DEVICE_IOC_MAGIC
, 0Ë

	)

51 
	#DEVICE_IOC_IRQ
 
	`_IOW
(
DEVICE_IOC_MAGIC
, 1, Ë

	)

52 
	#DEVICE_IOC_RAW
 
	`_IOW
(
DEVICE_IOC_MAGIC
, 2, Ë

	)

53 
	#DEVICE_IOC_CONCURRENT
 
	`_IOW
(
DEVICE_IOC_MAGIC
, 3, Ë

	)

55 
tcm_íabÀ_øw_mode
(
boﬁ
 
íabÀ
);

66 
boﬁ
 
	$tcm_föd_dev
(*
dev_node
)

68 
i
;

69 
°©
 
°
;

70 
boﬁ
 
is_found
 = 
Ál£
;

73 
i
 = 0; i < 
NUMBER_OF_SYNADEV_TO_SCAN
; i++) {

74 
	`mem£t
(
dev_node
, 0x00, 
MAX_STRING_LEN
);

76 
	`¢¥ötf
(
dev_node
, 
MAX_STRING_LEN
, "%s%d", 
TCM_DEV_PATH
, 
i
);

77 i‡(0 =
	`°©
(
dev_node
, &
°
)) {

78 
is_found
 = 
åue
;

82 i‡(
is_found
) {

83 
	`¥ötf_i
("%s: synapticsÅcm deviceÇode = %s\n",

84 
__func__
, 
dev_node
);

87  
is_found
;

88 
	}
}

99 
	$tcm_›í_dev
(c⁄° *
dev_node
)

101 
ªtvÆ
;

102 #ifde‡
SAVE_ERR_MSG


103 
îr
[
MAX_ERR_STRING_LEN
];

106 i‡(
g_dev_fûe_des¸ùt‹
 > 0) {

107 
	`¥ötf_i
("%†öfo: %†ha†bì¿›í\n", 
__func__
, 
dev_node
);

111 
g_dev_fûe_des¸ùt‹
 = 
	`›í
(
dev_node
, 
O_RDWR
, 
S_IRWXU
 | 
S_IRWXG
 | 
S_IRWXO
);

112 i‡(
g_dev_fûe_des¸ùt‹
 < 0) {

113 
	`¥ötf_e
("%sÉrror: failÅo open %s (err: %s)\n",

114 
__func__
, 
dev_node
, 
	`°ªº‹
(
î∫o
));

115 #ifde‡
SAVE_ERR_MSG


116 
	`•rötf
(
îr
, "%sÉrror: failÅo open %s (err: %s)\n",

117 
__func__
, 
dev_node
, 
	`°ªº‹
(
î∫o
));

118 
	`add_îr‹_msg
(
îr
);

120  -
EIO
;

123 
	`¥ötf_i
("%s info: open %s (fd = %d)\n",

124 
__func__
, 
dev_node
, 
g_dev_fûe_des¸ùt‹
);

127 
ªtvÆ
 = 
	`tcm_íabÀ_øw_mode
(
åue
);

128 i‡–
ªtvÆ
 < 0) {

129 
	`¥ötf_e
("%†îr‹: faûÅÿc⁄figÅhêtcm devi˚Åÿøw mode.\n", 
__func__
);

130 #ifde‡
SAVE_ERR_MSG


131 
	`•rötf
(
îr
, "%†îr‹: faûÅÿc⁄figÅhêtcm devi˚Åÿøw mode\n", 
__func__
);

132 
	`add_îr‹_msg
(
îr
);

134 
	`˛o£
(
g_dev_fûe_des¸ùt‹
);

135  -
EIO
;

138 
ªtvÆ
 = 
	`tcm_gë_touch_c⁄fig
();

139 i‡–
ªtvÆ
 < 0) {

140 
	`¥ötf_e
("%†îr‹: faûÅÿgëÅcmÅouch c⁄fig.\n", 
__func__
);

141 #ifde‡
SAVE_ERR_MSG


142 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅcmÅouch c⁄fig\n", 
__func__
);

143 
	`add_îr‹_msg
(
îr
);

145  -
EIO
;

148  
g_dev_fûe_des¸ùt‹
;

149 
	}
}

158 
	$tcm_˛o£_dev
(c⁄° *
dev_node
)

160 
ªtvÆ
 = 0;

161 #ifde‡
SAVE_ERR_MSG


162 
îr
[
MAX_ERR_STRING_LEN
];

165 i‡(
g_dev_fûe_des¸ùt‹
 <= 0) {

166 
	`¥ötf_i
("%†öfo: %†ha†bì¿˛o£d\n", 
__func__
, 
dev_node
);

171 
ªtvÆ
 = 
	`tcm_íabÀ_øw_mode
(
Ál£
);

172 i‡(
ªtvÆ
 < 0) {

173 
	`¥ötf_e
("%†îr‹: faûÅÿc⁄figÅhêtcm devi˚Åÿúq mode.\n", 
__func__
);

174 #ifde‡
SAVE_ERR_MSG


175 
	`•rötf
(
îr
, "%†îr‹: faûÅÿc⁄figÅhêtcm devi˚Åÿúq mode\n", 
__func__
);

176 
	`add_îr‹_msg
(
îr
);

182 
ªtvÆ
 = 
	`io˘l
(
g_dev_fûe_des¸ùt‹
, 
DEVICE_IOC_RESET
);

183 i‡(
ªtvÆ
 < 0) {

184 
	`¥ötf_e
("%sÉrror: failÅo sendÅhe DEVICE_IOC_RESET commandÅo %s\n",

185 
__func__
, 
g_dev_node
);

188 
	`u¶ìp
(
TCM_RESET_DELAY_MS
 * 1000);

191 
	`˛o£
(
g_dev_fûe_des¸ùt‹
);

193 
g_dev_fûe_des¸ùt‹
 = 0;

195 
	`¥ötf_i
("%s info: close %s (fd = %d)\n",

196 
__func__
, 
dev_node
, 
g_dev_fûe_des¸ùt‹
);

198  
g_dev_fûe_des¸ùt‹
;

199 
	}
}

211 
	$tcm_íabÀ_øw_mode
(
boﬁ
 
íabÀ
)

213 
ªtvÆ
 = 0;

215 if(
g_dev_fûe_des¸ùt‹
 < 0) {

216 
	`¥ötf_e
("%sÉrror: file descriptor is initialized (%d)\n",

217 
__func__
, 
g_dev_fûe_des¸ùt‹
);

218  (-
EINVAL
);

221 i‡(
íabÀ
) {

222 
ªtvÆ
 = 
	`io˘l
(
g_dev_fûe_des¸ùt‹
, 
DEVICE_IOC_RAW
, 
åue
);

223 i‡(
ªtvÆ
 < 0) {

224 
	`¥ötf_e
("%sÉrror: failÅoÉnableÅhe IOC_RAW ioctl commandÅo %s\n",

225 
__func__
, 
g_dev_node
);

226 
ªtvÆ
 = -
EINVAL
;

227 
exô
;

229 
ªtvÆ
 = 
	`io˘l
(
g_dev_fûe_des¸ùt‹
, 
DEVICE_IOC_IRQ
, 
Ál£
);

230 i‡(
ªtvÆ
 < 0) {

231 
	`¥ötf_e
("%sÉrror: failÅo disableÅhe IOC_IRQ ioctl commandÅo %s\n",

232 
__func__
, 
g_dev_node
);

233 
ªtvÆ
 = -
EINVAL
;

234 
exô
;

236 
	`¥ötf_i
("%†öfo: sëÅÿRAW mode\n", 
__func__
);

239 
ªtvÆ
 = 
	`io˘l
(
g_dev_fûe_des¸ùt‹
, 
DEVICE_IOC_RAW
, 
Ál£
);

240 i‡(
ªtvÆ
 < 0) {

241 
	`¥ötf_e
("%sÉrror: failÅo disableÅhe IOC_RAW ioctl commandÅo %s\n",

242 
__func__
, 
g_dev_node
);

243 
ªtvÆ
 = -
EINVAL
;

244 
exô
;

246 
ªtvÆ
 = 
	`io˘l
(
g_dev_fûe_des¸ùt‹
, 
DEVICE_IOC_IRQ
, 
åue
);

247 i‡(
ªtvÆ
 < 0) {

248 
	`¥ötf_e
("%sÉrror: failÅoÉnableÅhe IOC_IRQ ioctl commandÅo %s\n",

249 
__func__
, 
g_dev_node
);

250 
ªtvÆ
 = -
EINVAL
;

251 
exô
;

253 
	`¥ötf_i
("%†öfo: sëÅÿIRQ mode\n", 
__func__
);

255 
exô
:

256  
ªtvÆ
;

257 
	}
}

271 
	$tcm_ªad_mesßge
(*
p_rd_d©a
, 
byãs_to_ªad
)

273 
ªtvÆ
 = 0;

275 i‡(!
p_rd_d©a
) {

276 
	`¥ötf_e
("%†îr‹:Ö_rd_d©®buf„∏i†nuŒ\n", 
__func__
);

277 
ªtvÆ
 = -
EINVAL
;

278  
ªtvÆ
;

281 if(
g_dev_fûe_des¸ùt‹
 < 0) {

282 
	`¥ötf_e
("%sÉrror: file descriptor is initialized (%d)\n",

283 
__func__
, 
g_dev_fûe_des¸ùt‹
);

284  (-
EINVAL
);

287 
ªtvÆ
 = (Ë
	`ªad
(
g_dev_fûe_des¸ùt‹
, 
p_rd_d©a
, 
byãs_to_ªad
);

288 i‡(
ªtvÆ
 < 0) {

289 
	`¥ötf_e
("%sÉrror: failÅoÑead data from %s, bytes_to_read= %d (retval = %d)\n",

290 
__func__
, 
g_dev_node
, 
byãs_to_ªad
, 
ªtvÆ
);

291 
ªtvÆ
 = -
EIO
;

292  
ªtvÆ
;

295  
ªtvÆ
;

296 
	}
}

310 
	$tcm_wrôe_mesßge
(*
p_wr_d©a
, 
byãs_to_wrôe
)

312 
ªtvÆ
 = 0;

313 
i
;

315 i‡(!
p_wr_d©a
) {

316 
	`¥ötf_e
("%†îr‹:Ö_wr_d©®ˇn'àbênuŒ\n", 
__func__
);

317 
ªtvÆ
 = -
EINVAL
;

318  
ªtvÆ
;

321 if(
g_dev_fûe_des¸ùt‹
 < 0) {

322 
	`¥ötf_e
("%sÉrror: file descriptor is initialized (%d)\n",

323 
__func__
, 
g_dev_fûe_des¸ùt‹
);

324  (-
EINVAL
);

327 
ªtvÆ
 = (Ë
	`wrôe
(
g_dev_fûe_des¸ùt‹
, 
p_wr_d©a
, 
byãs_to_wrôe
);

328 i‡(
ªtvÆ
 < 0) {

329 
	`¥ötf_e
("%sÉrror: failÅo write dataÅo %s, bytes_to_write= %d, data: ",

330 
__func__
, 
g_dev_node
, 
byãs_to_wrôe
);

331 
i
 = 0; i<
byãs_to_wrôe
; i++)

332 
	`¥ötf_e
("0x%x ", 
p_wr_d©a
[
i
]);

333 
	`¥ötf_e
(")\n");

334 
	`¥ötf_e
("%†îr‹:ÑëvÆ%d\n", 
__func__
, 
ªtvÆ
);

336 
ªtvÆ
 = -
EIO
;

337  
ªtvÆ
;

340  
ªtvÆ
;

341 
	}
}

350 
	$tcm_dr›_∑ckage
(
∑ylﬂd_size
) {

351 
ªtvÆ
 = 0;

352 
size
 = 
∑ylﬂd_size
 + 3;

353 *
buf
;

355 
buf
 = 
	`ˇŒoc
((
size_t
)
size
, ());

357 
ªtvÆ
 = 
	`tcm_ªad_mesßge
(&
buf
[0], ()
size
);

358 i‡(
ªtvÆ
 < 0) {

359 
	`¥ötf_e
("%sÉrror: failÅoÑeadÖackage (remaining = %d)\n",

360 
__func__
, 
∑ylﬂd_size
);

361 
ªtvÆ
 = -
EINVAL
;

364 
	`‰ì
(
buf
);

365 
	`¥ötf_i
("%s: %d byã†¨êdr›≥d\n", 
__func__
, 
∑ylﬂd_size
);

367  
ªtvÆ
;

368 
	}
}

378 
	$tcm_waô_f‹_comm™d_ªady
()

380 
ªtvÆ
 = 0;

381 
boﬁ
 
comm™d_is_ªady
 = 
Ál£
;

382 
timeout_˙t
 = 0;

383 
size
 = (
tcm_mesßge_hódî
);

384 
tcm_mesßge_hódî
 
hódî
;

385 
∑ylﬂd_size
;

386 #ifde‡
SAVE_ERR_MSG


387 
îr
[
MAX_ERR_STRING_LEN
];

391 
	`u¶ìp
(
TCM_POLLING_DELAY_MS
 * 1000);

393 
ªtvÆ
 = 
	`tcm_ªad_mesßge
((*)&
hódî
, (Ë
size
);

394 i‡(
ªtvÆ
 < 0) {

395 
	`¥ötf_e
("%†îr‹: faûÅÿªad hódî fromÅcm devi˚\n", 
__func__
);

396  
ªtvÆ
;

399 i‡–0xA5 =
hódî
.
m¨kî
) {

400 i‡–
STATUS_OK
 =
hódî
.
code
) {

401 
comm™d_is_ªady
 = 
åue
;

404 i‡((
hódî
.
code
 & 0x10) == 0x10) {

405 
∑ylﬂd_size
 = 
hódî
.
Àngth
[0] | (header.length[1] << 8);

406 
	`tcm_dr›_∑ckage
(
∑ylﬂd_size
);

409 i‡(
STATUS_COMMAND_NOT_IMPLEMENTED
 =
hódî
.
code
) {

410 
	`¥ötf_e
("%†îr‹: comm™d i†nŸ im∂emíãd\n", 
__func__
);

411 #ifde‡
SAVE_ERR_MSG


412 
	`•rötf
(
îr
, "%s:Érror: command isÇot implemented, status code: 0x%x\n",

413 
__func__
, 
hódî
.
code
);

414 
	`add_îr‹_msg
(
îr
);

416  (-
ENOSYS
);

419 
timeout_˙t
 += 1;

421 }  (!
comm™d_is_ªady
Ë&& (
timeout_˙t
 < 
TCM_POLLING_TIMOUT
) );

423 i‡(!
comm™d_is_ªady
) {

424 
	`¥ötf_e
("%†îr‹: comm™dÅimeout\n", 
__func__
);

425 #ifde‡
SAVE_ERR_MSG


426 
	`•rötf
(
îr
, "%†îr‹: comm™dÅimeout\n", 
__func__
);

427 
	`add_îr‹_msg
(
îr
);

429  (-
ETIMEDOUT
);

432 
size
 = 
	`c⁄vît_uc_to_sh‹t
(
hódî
.
Àngth
[0], header.length[1]);

433  
size
;

434 
	}
}

449 
	$tcm_gë_∑ylﬂd
(*
p_rd_d©a
, 
∑ylﬂd_size
)

451 
ªtvÆ
 = 0;

452 *
buf
 = 
NULL
;

453 
size
 = 
∑ylﬂd_size
 + 3;

455 i‡(!
p_rd_d©a
) {

456 
	`¥ötf_e
("%†îr‹:Ö_rd_d©®i†NULL\n", 
__func__
);

457 
ªtvÆ
 = -
EINVAL
;

458 
exô
;

462 
buf
 = 
	`ˇŒoc
((
size_t
)
size
, ());

463 i‡(!
buf
) {

464 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ buf\n", 
__func__
);

465 
ªtvÆ
 = -
ENOMEM
;

466 
exô
;

469 
ªtvÆ
 = 
	`tcm_ªad_mesßge
(
buf
, ()
size
);

470 i‡(
ªtvÆ
 < 0) {

471 
	`¥ötf_e
("%†îr‹: faûÅÿªad d©®‘emaöög = %d)\n", 
__func__
, 
∑ylﬂd_size
);

472 
ªtvÆ
 = -
EINVAL
;

473 
exô
;

477 i‡(0xA5 !
buf
[0]) {

478 
	`¥ötf_e
("%sÉrror: unknown data header (byte 0: 0x%x, byte 1: 0x%x)\n",

479 
__func__
, 
buf
[0], buf[1]);

480 
ªtvÆ
 = -
EINVAL
;

481 
exô
;

484 i‡(0x5A !
buf
[
size
-1])

485 
	`¥ötf_e
("%sÉrror:ÖayloadÖacket isÇotÉnded (last byte: 0x%x)\n",

486 
__func__
, 
buf
[
size
-1]);

488 i‡(
STATUS_CONTINUED_READ
 !
buf
[1])

489 
	`¥ötf_e
("%sÉrror:Çot STATUS_CONTINUED_READ (byte 0: 0x%x, byte 1: 0x%x)\n",

490 
__func__
, 
buf
[0], buf[1]);

493 
	`mem˝y
(
p_rd_d©a
, &
buf
[2], (
size_t
)
∑ylﬂd_size
);

495 
exô
:

496 if(
buf
)

497 
	`‰ì
(
buf
);

499  
ªtvÆ
;

500 
	}
}

510 
	$tcm_do_ª£t
()

512 
ªtvÆ
 = 0;

513 #ifde‡
SAVE_ERR_MSG


514 
îr
[
MAX_ERR_STRING_LEN
];

517 
	`¥ötf_i
("%†öfo: dÿª£t", 
__func__
);

520 
ªtvÆ
 = 
	`tcm_íabÀ_øw_mode
(
Ál£
);

521 i‡(
ªtvÆ
 < 0) {

522 
	`¥ötf_e
("%†îr‹: faûÅÿswôchÅÿúq mode\n", 
__func__
);

523 #ifde‡
SAVE_ERR_MSG


524 
	`•rötf
(
îr
, "%†îr‹: faûÅÿswôchÅÿúq mode\n", 
__func__
);

525 
	`add_îr‹_msg
(
îr
);

527  
ªtvÆ
;

531 
ªtvÆ
 = 
	`io˘l
(
g_dev_fûe_des¸ùt‹
, 
DEVICE_IOC_RESET
);

532 i‡(
ªtvÆ
 < 0) {

533 
	`¥ötf_e
("%sÉrror: failÅo sendÅhe DEVICE_IOC_RESET commandÅo %s\n",

534 
__func__
, 
g_dev_node
);

535 #ifde‡
SAVE_ERR_MSG


536 
	`•rötf
(
îr
, "%sÉrror: failÅo sendÅhe DEVICE_IOC_RESET commandÅo %s\n",

537 
__func__
, 
g_dev_node
);

538 
	`add_îr‹_msg
(
îr
);

542 
	`u¶ìp
(
TCM_RESET_DELAY_MS
 * 1000);

545 
ªtvÆ
 = 
	`tcm_íabÀ_øw_mode
(
åue
);

546 i‡(
ªtvÆ
 < 0) {

547 
	`¥ötf_e
("%†îr‹: faûÅÿswôch backÑaw mode\n", 
__func__
);

548 #ifde‡
SAVE_ERR_MSG


549 
	`•rötf
(
îr
, "%†îr‹: faûÅÿswôch backÑaw mode\n", 
__func__
);

550 
	`add_îr‹_msg
(
îr
);

554  
ªtvÆ
;

555 
	}
}

569 
	$tcm_gë_°©ic_c⁄fig
()

571 
ªtvÆ
 = 0;

572 
comm™d_∑ckë
[3] = {0, 0, 0};

573 
size_∑ylﬂd
;

574 *
buf
 = 
g_tcm_h™dÀr
.
°©ic_c⁄fig
;

575 #ifde‡
SAVE_ERR_MSG


576 
îr
[
MAX_ERR_STRING_LEN
];

580 
comm™d_∑ckë
[0] = 
CMD_GET_STATIC_CONFIG
;

584 
comm™d_∑ckë
[1] = 0x00;

585 
comm™d_∑ckë
[2] = 0x00;

587 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
comm™d_∑ckë
, (command_packet));

588 i‡(
ªtvÆ
 < 0) {

589 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, CMD_GET_STATIC_CONFIG\n",
__func__
);

590 
ªtvÆ
 = -
EINVAL
;

591  
ªtvÆ
;

594 
ªtvÆ
 = 
	`tcm_waô_f‹_comm™d_ªady
();

595 i‡–
ªtvÆ
 < 0) {

596 
	`¥ötf_e
("%†îr‹: faûÅÿgëÅhêª•⁄£ o‡CMD_GET_STATIC_CONFIG \n", 
__func__
);

597 #ifde‡
SAVE_ERR_MSG


598 
	`•rötf
(
îr
, "%s: faûÅÿgëÅhêª•⁄£ o‡CMD_GET_STATIC_CONFIG\n", 
__func__
);

599 
	`add_îr‹_msg
(
îr
);

601 
ªtvÆ
 = -
EINVAL
;

602  
ªtvÆ
;

605 i‡(
ªtvÆ
 > 
TCM_MAX_STATIC_CONFIG_SIZE
) {

606 
	`¥ötf_e
("%sÉrror: size of static config is mismatching (payload size = %d)\n",

607 
__func__
, 
ªtvÆ
);

608 
ªtvÆ
 = -
EINVAL
;

609  
ªtvÆ
;

612 
size_∑ylﬂd
 = 
ªtvÆ
;

614 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
buf
,Ñetval);

615 i‡(
ªtvÆ
 < 0) {

616 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
size_∑ylﬂd
);

617 #ifde‡
SAVE_ERR_MSG


618 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
size_∑ylﬂd
);

619 
	`add_îr‹_msg
(
îr
);

621 
ªtvÆ
 = -
EINVAL
;

622  
ªtvÆ
;

625  
ªtvÆ
;

626 
	}
}

640 
	$tcm_£t_dy«mic_c⁄fig
(
fõld_id
, 
vÆue
)

642 
ªtvÆ
 = 0;

643 
comm™d_∑ckë
[6] = {0, 0, 0, 0, 0, 0};

644 #ifde‡
SAVE_ERR_MSG


645 
îr
[
MAX_ERR_STRING_LEN
];

649 
comm™d_∑ckë
[0] = 
CMD_SET_DYNAMIC_CONFIG
;

653 
comm™d_∑ckë
[1] = 0x03;

654 
comm™d_∑ckë
[2] = 0x00;

657 
comm™d_∑ckë
[3] = 
fõld_id
;

658 
comm™d_∑ckë
[4] = ()
vÆue
;

659 
comm™d_∑ckë
[5] = ()(
vÆue
 >> 8);

661 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
comm™d_∑ckë
, (command_packet));

662 i‡(
ªtvÆ
 < 0) {

663 
	`¥ötf_e
("%sÉrror: failÅo send command, CMD_SET_DYNAMIC_CONFIG 0x%x 0x%x 0x%x 0x%x 0x%x\n",

664 
__func__
, 
comm™d_∑ckë
[1], command_packet[2], command_packet[3],

665 
comm™d_∑ckë
[4], command_packet[5]);

666 
ªtvÆ
 = -
EINVAL
;

667  
ªtvÆ
;

670 
ªtvÆ
 = 
	`tcm_waô_f‹_comm™d_ªady
();

671 i‡–
ªtvÆ
 < 0) {

672 
	`¥ötf_e
("%sÉrror: failÅo getÅheÑesponse of command, (0x%x 0x%x 0x%x 0x%x) \n",

673 
__func__
, 
comm™d_∑ckë
[0], command_packet[1], command_packet[2], command_packet[3]);

674 #ifde‡
SAVE_ERR_MSG


675 
	`•rötf
(
îr
, "%sÉrror: failÅo getÅheÑesponse of command, (0x%x 0x%x 0x%x 0x%x) \n",

676 
__func__
, 
comm™d_∑ckë
[0], command_packet[1], command_packet[2], command_packet[3]);

677 
	`add_îr‹_msg
(
îr
);

679 
ªtvÆ
 = -
EINVAL
;

680  
ªtvÆ
;

682 
	`¥ötf_i
("%s info: CMD_SET_DYNAMIC_CONFIG is completed. (field_id:0x%x) (value:%d)",

683 
__func__
, ()
fõld_id
, 
vÆue
);

685  
ªtvÆ
;

686 
	}
}

700 
	$tcm_£t_no_¶ìp
(
°©e
)

702 
vÆue
 = (0 =
°©e
)?()0:()1;

703 #ifde‡
SAVE_ERR_MSG


704 
îr
[
MAX_ERR_STRING_LEN
];

707 
ªtvÆ
 = 
	`tcm_£t_dy«mic_c⁄fig
(
DC_NO_DOZE
, 
vÆue
);

708 i‡(
ªtvÆ
 < 0) {

709 
	`¥ötf_e
("%†îr‹: faûÅÿ£àDC_NO_DOZEÅÿ%d", 
__func__
, 
vÆue
);

710 #ifde‡
SAVE_ERR_MSG


711 
	`•rötf
(
îr
, "%sÉrror: failÅo set DC_NO_DOZEÅo %d\n",

712 
__func__
,
vÆue
);

713 
	`add_îr‹_msg
(
îr
);

715 
ªtvÆ
 = -
EINVAL
;

716  
ªtvÆ
;

718 
	`¥ötf_i
("%†öfo: së DC_NO_DOZEÅÿ%d", 
__func__
, 
vÆue
);

720 
	}
}

730 
	$tcm_£t_ªzîo
()

732 
ªtvÆ
 = 0;

733 
comm™d
 = 
CMD_REZERO
;

734 #ifde‡
SAVE_ERR_MSG


735 
îr
[
MAX_ERR_STRING_LEN
];

739 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(&
comm™d
, (command));

740 i‡(
ªtvÆ
 < 0) {

741 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, CMD_REZERO\n", 
__func__
);

742 
ªtvÆ
 = -
EINVAL
;

743  
ªtvÆ
;

746 
ªtvÆ
 = 
	`tcm_waô_f‹_comm™d_ªady
();

747 i‡–
ªtvÆ
 < 0) {

748 
	`¥ötf_e
("%†îr‹:Åimeouàwhûêru¬ögÅhêcomm™d, CMD_REZERO\n", 
__func__
);

749 #ifde‡
SAVE_ERR_MSG


750 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhêª•⁄£ o‡comm™d, CMD_REZERO\n", 
__func__
);

751 
	`add_îr‹_msg
(
îr
);

753 
ªtvÆ
 = -
EINVAL
;

754  
ªtvÆ
;

756 
	`¥ötf_i
("%†öfo: CMD_REZERO i†com∂ëed", 
__func__
);

757  
ªtvÆ
;

758 
	}
}

776 
	$tcm_øw_c⁄åﬁ
(* 
p_ö
, 
size_ö
,

777 * 
p_out
, 
size_out
)

779 
ªtvÆ
 = 0;

780 
tcm_mesßge_hódî
 
hódî
;

781 
boﬁ
 
°›_pﬁlög
 = 
Ál£
;

782 
timeout_˙t
 = 0;

783 #ifde‡
SAVE_ERR_MSG


784 
îr
[
MAX_ERR_STRING_LEN
];

787 i‡(!
p_ö
) {

788 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî,Ö_ö i†nuŒ\n", 
__func__
);

789 
ªtvÆ
 = -
EINVAL
;

790  
ªtvÆ
;

793 i‡(!
p_out
) {

794 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî,Ö_ouài†nuŒ\n", 
__func__
);

795 
ªtvÆ
 = -
EINVAL
;

796  
ªtvÆ
;

799 i‡(
size_out
 < 4) {

800 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî, size_ouà< 4\n", 
__func__
);

801 
ªtvÆ
 = -
EINVAL
;

802  
ªtvÆ
;

805 
	`¥ötf_i
("%s info: command = 0x%x (length = 0x%x 0x%x)\n",

806 
__func__
, 
p_ö
[0],Ö_in[1],Ö_in[2]);

809 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
p_ö
, ()
size_ö
);

810 i‡(
ªtvÆ
 < 0) {

811 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, 0x%x\n",
__func__
, 
p_ö
[0]);

812 #ifde‡
SAVE_ERR_MSG


813 
	`•rötf
(
îr
, "%†îr‹: faûÅÿ£nd comm™d, 0x%x\n",
__func__
, 
p_ö
[0]);

814 
	`add_îr‹_msg
(
îr
);

816 
ªtvÆ
 = -
EINVAL
;

817  
ªtvÆ
;

821 
	`u¶ìp
(
TCM_POLLING_DELAY_MS
 * 1000);

823 
ªtvÆ
 = 
	`tcm_ªad_mesßge
((*)&
hódî
, (
tcm_mesßge_hódî
));

824 i‡(
ªtvÆ
 < 0) {

825 
	`¥ötf_e
("%†îr‹: faûÅÿªad hódî fromÅcm devi˚\n", 
__func__
);

826 #ifde‡
SAVE_ERR_MSG


827 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad hódî fromÅcm devi˚", 
__func__
);

828 
	`add_îr‹_msg
(
îr
);

830  
ªtvÆ
;

833 i‡–0xA5 =
hódî
.
m¨kî
) {

834 i‡–
STATUS_OK
 =
hódî
.
code
) {

835 
°›_pﬁlög
 = 
åue
;

837 i‡(
STATUS_COMMAND_NOT_IMPLEMENTED
 =
hódî
.
code
) {

838 
	`¥ötf_e
("%†îr‹: comm™dÇÿim∂emíãd\n", 
__func__
);

839 
°›_pﬁlög
 = 
åue
;

841 i‡(
STATUS_ERROR
 =
hódî
.
code
) {

842 
	`¥ötf_e
("%†îr‹: comm™dÉº‹\n", 
__func__
);

843 
°›_pﬁlög
 = 
åue
;

845 
	`¥ötf_i
("%s info:Åcm header = 0x%x 0x%x 0x%x 0x%x\n",

846 
__func__
, 
hódî
.
m¨kî
, hódî.
code
, hódî.
Àngth
[0], header.length[1]);

848 
timeout_˙t
 += 1;

850 }  (!
°›_pﬁlög
Ë&& (
timeout_˙t
 < 
TCM_POLLING_TIMOUT
) );

852 i‡(
timeout_˙t
 =
TCM_POLLING_TIMOUT
) {

853 
	`¥ötf_e
("%†îr‹: comm™d 0x%xÅimeout\n", 
__func__
, 
p_ö
[0]);

854 #ifde‡
SAVE_ERR_MSG


855 
	`•rötf
(
îr
, "%†îr‹: comm™d 0x%xÅimeout\n", 
__func__
, 
p_ö
[0]);

856 
	`add_îr‹_msg
(
îr
);

860 
p_out
[0] = 
hódî
.
m¨kî
;

861 
p_out
[1] = 
hódî
.
code
;

862 
p_out
[2] = 
hódî
.
Àngth
[0];

863 
p_out
[3] = 
hódî
.
Àngth
[1];

865 
ªtvÆ
 = 
	`c⁄vît_uc_to_sh‹t
(
hódî
.
Àngth
[0], header.length[1]);

867  
ªtvÆ
;

868 
	}
}

878 
	$tcm_waô_f‹_mode_swôch
()

880 
ªtvÆ
 = 0;

881 
boﬁ
 
is_ªady
 = 
Ál£
;

882 
timeout_˙t
 = 0;

883 
tcm_mesßge_hódî
 
hódî
;

884 
tcm_idítify_ªp‹t
 
idítify_ªp‹t
;

885 
size_∑ylﬂd
;

886 #ifde‡
SAVE_ERR_MSG


887 
îr
[
MAX_ERR_STRING_LEN
];

891 
	`u¶ìp
(
TCM_POLLING_DELAY_MS
 * 1000);

893 
ªtvÆ
 = 
	`tcm_ªad_mesßge
((*)&
hódî
, (
tcm_mesßge_hódî
));

894 i‡(
ªtvÆ
 < 0) {

895 
	`¥ötf_e
("%†îr‹: faûÅÿªad hódî fromÅcm devi˚\n", 
__func__
);

896  
ªtvÆ
;

899 i‡–0xA5 =
hódî
.
m¨kî
) {

901 i‡–
TCM_REPORT_IDENTIFY
 =
hódî
.
code
) {

902 
is_ªady
 = 
åue
;

905 
timeout_˙t
 += 1;

907 }  (!
is_ªady
Ë&& (
timeout_˙t
 < 
TCM_POLLING_TIMOUT
) );

909 i‡(!
is_ªady
) {

910 
	`¥ötf_e
("%†îr‹: comm™dÅimeout\n", 
__func__
);

911 #ifde‡
SAVE_ERR_MSG


912 
	`•rötf
(
îr
, "%†îr‹: comm™dÅimeout\n", 
__func__
);

913 
	`add_îr‹_msg
(
îr
);

915  (-
ETIMEDOUT
);

918 
size_∑ylﬂd
 = 
	`c⁄vît_uc_to_sh‹t
(
hódî
.
Àngth
[0], header.length[1]);

919 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
((*)&
idítify_ªp‹t
, 
size_∑ylﬂd
);

920 i‡(
ªtvÆ
 < 0) {

921 
	`¥ötf_e
("%sÉrror: failÅo getÅhe identifyÑeport (size = %d)\n",

922 
__func__
, 
size_∑ylﬂd
);

923 #ifde‡
SAVE_ERR_MSG


924 
	`•rötf
(
îr
, "%sÉrror: failÅo getÅhe identifyÑeport (size = %d)\n",

925 
__func__
, 
size_∑ylﬂd
);

926 
	`add_îr‹_msg
(
îr
);

928  (-
EIO
);

932 i‡(
idítify_ªp‹t
.
mode
 =
MODE_APPLICATION
)

933 
ªtvÆ
 = 
MODE_APPLICATION
;

934 i‡(
idítify_ªp‹t
.
mode
 =
MODE_BOOTLOADER
)

935 
ªtvÆ
 = 
MODE_BOOTLOADER
;

936 i‡(
idítify_ªp‹t
.
mode
 =
MODE_BOOTLOADER_TDDI
)

937 
ªtvÆ
 = 
MODE_BOOTLOADER_TDDI
;

939 
ªtvÆ
 = 0xff;

941  
ªtvÆ
;

942 
	}
}

952 
	$tcm_run_boŸlﬂdî
()

954 
ªtvÆ
 = 0;

955 
cmd_∑ckë
[3] = {
CMD_RUN_BOOTLOADER_FIRMWARE
, 0, 0};

956 #ifde‡
SAVE_ERR_MSG


957 
îr
[
MAX_ERR_STRING_LEN
];

961 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
cmd_∑ckë
, (cmd_packet));

962 i‡(
ªtvÆ
 < 0) {

963 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, CMD_RUN_BOOTLOADER_FIRMWARE\n", 
__func__
);

964 #ifde‡
SAVE_ERR_MSG


965 
	`•rötf
(
îr
, "%†îr‹: faûÅÿ£nd comm™d, CMD_RUN_BOOTLOADER_FIRMWARE\n", 
__func__
);

966 
	`add_îr‹_msg
(
îr
);

968 
ªtvÆ
 = -
EINVAL
;

969  
ªtvÆ
;

972 
ªtvÆ
 = 
	`tcm_waô_f‹_mode_swôch
();

973 i‡–
ªtvÆ
 < 0) {

974 
	`¥ötf_e
("%†îr‹: faûÅÿswôchÅÿboŸlﬂdî fúmw¨ê\n", 
__func__
);

975 #ifde‡
SAVE_ERR_MSG


976 
	`•rötf
(
îr
, "%†îr‹: faûÅÿswôchÅÿboŸlﬂdî fúmw¨ê\n", 
__func__
);

977 
	`add_îr‹_msg
(
îr
);

979 
ªtvÆ
 = -
EIO
;

980  
ªtvÆ
;

983 i‡((
ªtvÆ
 !
MODE_BOOTLOADER_TDDI
Ë&& (ªtvÆ !
MODE_BOOTLOADER
)) {

984 
	`¥ötf_e
("%sÉrror: failÅoÑun bootloader firmware (retval = 0x%x)\n",

985 
__func__
, 
ªtvÆ
);

986 #ifde‡
SAVE_ERR_MSG


987 
	`•rötf
(
îr
, "%sÉrror: failÅoÑun bootloader firmware (retval = 0x%x)\n",

988 
__func__
, 
ªtvÆ
);

989 
	`add_îr‹_msg
(
îr
);

991 
ªtvÆ
 = -
EIO
;

992  
ªtvÆ
;

995 
	`¥ötf_i
("%†öfo: CMD_RUN_BOOTLOADER_FIRMWARE i†com∂ëed\n", 
__func__
);

997  
ªtvÆ
;

998 
	}
}

1007 
	$tcm_run_≠∂iˇti⁄
()

1009 
ªtvÆ
 = 0;

1010 
cmd_∑ckë
[3] = {
CMD_RUN_APPLICATION_FIRMWARE
, 0, 0};

1011 #ifde‡
SAVE_ERR_MSG


1012 
îr
[
MAX_ERR_STRING_LEN
];

1016 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
cmd_∑ckë
, (cmd_packet));

1017 i‡(
ªtvÆ
 < 0) {

1018 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, CMD_RUN_APPLICATION_FIRMWARE\n", 
__func__
);

1019 #ifde‡
SAVE_ERR_MSG


1020 
	`•rötf
(
îr
, "%†îr‹: faûÅÿ£nd comm™d, CMD_RUN_APPLICATION_FIRMWARE\n", 
__func__
);

1021 
	`add_îr‹_msg
(
îr
);

1023 
ªtvÆ
 = -
EINVAL
;

1024  
ªtvÆ
;

1027 
ªtvÆ
 = 
	`tcm_waô_f‹_mode_swôch
();

1028 i‡–
ªtvÆ
 < 0) {

1029 
	`¥ötf_e
("%†îr‹: faûÅÿru¿≠∂iˇti⁄ fúmw¨ê\n", 
__func__
);

1030 #ifde‡
SAVE_ERR_MSG


1031 
	`•rötf
(
îr
, "%†îr‹: faûÅÿru¿≠∂iˇti⁄ fúmw¨ê\n", 
__func__
);

1032 
	`add_îr‹_msg
(
îr
);

1034 
ªtvÆ
 = -
EIO
;

1035  
ªtvÆ
;

1038 i‡(
ªtvÆ
 !
MODE_APPLICATION
) {

1039 
	`¥ötf_e
("%sÉrror: failÅoÑunápplication firmware (retval = 0x%x)\n",

1040 
__func__
, 
ªtvÆ
);

1041 #ifde‡
SAVE_ERR_MSG


1042 
	`•rötf
(
îr
, "%sÉrror: failÅoÑunápplication firmware (retval = 0x%x)\n",

1043 
__func__
, 
ªtvÆ
);

1044 
	`add_îr‹_msg
(
îr
);

1046 
ªtvÆ
 = -
EIO
;

1047  
ªtvÆ
;

1050 
	`¥ötf_i
("%†öfo: CMD_RUN_APPLICATION_FIRMWARE i†com∂ëed\n", 
__func__
);

1052  
ªtvÆ
;

1053 
	}
}

1063 
	$tcm_gë_pös_m≠pög
(
rxes_off£t
, 
rxes_Àn
, 
txes_off£t
, 
txes_Àn
,

1064 
num_rxgu¨d_off£t
, 
num_rxgu¨d_Àn
,

1065 
rxgu¨d_pös_off£t
, 
rxgu¨d_pös_Àn
,

1066 
num_txgu¨d_off£t
, 
num_txgu¨d_Àn
,

1067 
txgu¨d_pös_off£t
, 
txgu¨d_pös_Àn
)

1069 * 
cfg_d©a
 = 
g_tcm_h™dÀr
.
°©ic_c⁄fig
;

1070 
cfg_d©a_Àn
 = 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©ic_c⁄fig_size
[0],

1071 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©ic_c⁄fig_size
[1]);

1072 
i
, 
j
 = 0, 
idx
 = 0;

1073 
off£t_rx_pö
 = 
rxes_off£t
/8;

1074 
Àngth_rx_pö
 = 
rxes_Àn
/8;

1075 
off£t_tx_pö
 = 
txes_off£t
/8;

1076 
Àngth_tx_pö
 = 
txes_Àn
/8;

1077 
num_rx_gu¨d
 = 0;

1078 
off£t_num_rx_gu¨d

num_rxgu¨d_off£t
/8;

1079 
Àngth_num_rx_gu¨d

num_rxgu¨d_Àn
/8;

1080 
off£t_rx_gu¨d

rxgu¨d_pös_off£t
/8;

1081 
Àngth_rx_gu¨d

rxgu¨d_pös_Àn
/8;

1082 
num_tx_gu¨d
 = 0;

1083 
off£t_num_tx_gu¨d

num_txgu¨d_off£t
/8;

1084 
Àngth_num_tx_gu¨d

num_txgu¨d_Àn
/8;

1085 
off£t_tx_gu¨d

txgu¨d_pös_off£t
/8;

1086 
Àngth_tx_gu¨d

txgu¨d_pös_Àn
/8;

1087 
boﬁ
 
is_îr
 = 
Ál£
;

1088 #ifde‡
SAVE_ERR_MSG


1089 
îr
[
MAX_ERR_STRING_LEN
];

1092 i‡(
cfg_d©a_Àn
 < 0) {

1093 
	`¥ötf_e
("%†îr‹: invÆid sizêo‡°©i¯c⁄fig\n", 
__func__
);

1094 #ifde‡
SAVE_ERR_MSG


1095 
	`•rötf
(
îr
, "%†îr‹: invÆid sizêo‡°©i¯c⁄fig\n", 
__func__
);

1096 
	`add_îr‹_msg
(
îr
);

1098  -
EINVAL
;

1101 
g_tcm_h™dÀr
.
tx_assig√d
 = 0;

1102 
	`mem£t
(
g_tcm_h™dÀr
.
tx_pös
, 0x00, (g_tcm_handler.tx_pins));

1103 
g_tcm_h™dÀr
.
rx_assig√d
 = 0;

1104 
	`mem£t
(
g_tcm_h™dÀr
.
rx_pös
, 0x00, (g_tcm_handler.rx_pins));

1105 
g_tcm_h™dÀr
.
gu¨d_assig√d
 = 0;

1106 
	`mem£t
(
g_tcm_h™dÀr
.
gu¨d_pös
, 0x00, (g_tcm_handler.guard_pins));

1109 i‡((
cfg_d©a_Àn
 > 
off£t_tx_pö
 + 
Àngth_tx_pö
) && (offset_tx_pin != 0)) {

1111 
g_tcm_h™dÀr
.
tx_assig√d
 = (
Àngth_tx_pö
/2);

1113 
	`¥ötf_i
("%s info: getÅxÖins mapping,Åxássigned = %2d\n",

1114 
__func__
, 
g_tcm_h™dÀr
.
tx_assig√d
);

1116 
idx
 = 0;

1117 
i
 = 0; i < (
Àngth_tx_pö
/2); i++) {

1118 
g_tcm_h™dÀr
.
tx_pös
[
i
] = ()
cfg_d©a
[
off£t_tx_pö
 + 
idx
] |

1119 ()(
cfg_d©a
[
off£t_tx_pö
 + 
idx
 + 1] << 8);

1120 
idx
 += 2;

1122 
	`¥ötf_i
("%†öfo:Åx[%d] = %2d\n", 
__func__
, 
i
, 
g_tcm_h™dÀr
.
tx_pös
[i]);

1123 i‡(
g_tcm_h™dÀr
.
tx_pös
[
i
] > 
TCM_MAX_PINS
) {

1124 
	`¥ötf_e
("%sÉrror:ÖinÇumber %d is over 64\n",

1125 
__func__
, 
g_tcm_h™dÀr
.
tx_pös
[
i
]);

1126 
is_îr
 = 
åue
;

1131 
	`¥ötf_e
("%sÉrror: invalidÅxÖins info (offset,Üength) = (%d, %d) cfg_data_len = %d\n",

1132 
__func__
, 
off£t_tx_pö
, 
Àngth_tx_pö
, 
cfg_d©a_Àn
);

1133 #ifde‡
SAVE_ERR_MSG


1134 
	`•rötf
(
îr
, "%sÉrror: invalidÅxÖins info (offset,Üength) = (%d, %d) cfg_data_len = %d\n",

1135 
__func__
, 
off£t_tx_pö
, 
Àngth_tx_pö
, 
cfg_d©a_Àn
);

1136 
	`add_îr‹_msg
(
îr
);

1138  -
EINVAL
;

1142 i‡((
cfg_d©a_Àn
 > 
off£t_rx_pö
 + 
Àngth_rx_pö
) && (offset_rx_pin != 0)) {

1144 
g_tcm_h™dÀr
.
rx_assig√d
 = (
Àngth_rx_pö
/2);

1146 
	`¥ötf_i
("%s info: getÑxÖins mapping,Ñxássigned = %2d\n",

1147 
__func__
, 
g_tcm_h™dÀr
.
rx_assig√d
);

1149 
idx
 = 0;

1150 
i
 = 0; i < (
Àngth_rx_pö
/2); i++) {

1151 
g_tcm_h™dÀr
.
rx_pös
[
i
] = ()
cfg_d©a
[
off£t_rx_pö
 + 
idx
] |

1152 ()(
cfg_d©a
[
off£t_rx_pö
 + 
idx
 + 1] << 8);

1153 
idx
 += 2;

1155 
	`¥ötf_i
("%†öfo:Ñx[%d] = %2d\n", 
__func__
, 
i
, 
g_tcm_h™dÀr
.
rx_pös
[i])

1156 i‡(
g_tcm_h™dÀr
.
rx_pös
[
i
] > 
TCM_MAX_PINS
) {

1157 
	`¥ötf_e
("%sÉrror:ÖinÇumber %d is over 64\n",

1158 
__func__
, 
g_tcm_h™dÀr
.
rx_pös
[
i
]);

1159 
is_îr
 = 
åue
;

1164 
	`¥ötf_e
("%sÉrror: invalidÑxÖins info (offset,Üength) = (%d, %d) cfg_data_len = %d\n",

1165 
__func__
, 
off£t_rx_pö
, 
Àngth_rx_pö
, 
cfg_d©a_Àn
);

1166 #ifde‡
SAVE_ERR_MSG


1167 
	`•rötf
(
îr
, "%sÉrror: invalidÑxÖins info (offset,Üength) = (%d, %d) cfg_data_len = %d\n",

1168 
__func__
, 
off£t_rx_pö
, 
Àngth_rx_pö
, 
cfg_d©a_Àn
);

1169 
	`add_îr‹_msg
(
îr
);

1171  -
EINVAL
;

1174 i‡(
is_îr
)

1175  -
EINVAL
;

1178 i‡((
cfg_d©a_Àn
 > 
off£t_num_tx_gu¨d
 + 
Àngth_num_tx_gu¨d
) && (offset_num_tx_guard != 0)) {

1180 
num_tx_gu¨d
 = ()
cfg_d©a
[
off£t_num_tx_gu¨d
] |

1181 ()(
cfg_d©a
[
off£t_num_tx_gu¨d
 + 1] << 8);

1183 
g_tcm_h™dÀr
.
gu¨d_assig√d
 +
num_tx_gu¨d
;

1187 i‡((
cfg_d©a_Àn
 > 
off£t_num_rx_gu¨d
 + 
Àngth_num_rx_gu¨d
) && (offset_num_rx_guard != 0)) {

1189 
num_rx_gu¨d
 = ()
cfg_d©a
[
off£t_num_rx_gu¨d
] |

1190 ()(
cfg_d©a
[
off£t_num_rx_gu¨d
 + 1] << 8);

1192 
g_tcm_h™dÀr
.
gu¨d_assig√d
 +
num_rx_gu¨d
;

1195 i‡(
g_tcm_h™dÀr
.
gu¨d_assig√d
 > 0) {

1197 
	`¥ötf_i
("%s info: get groundÖins mapping, groundássigned = %2d (tx: %d,Ñx: %d)\n",

1198 
__func__
, 
g_tcm_h™dÀr
.
gu¨d_assig√d
, 
num_tx_gu¨d
, 
num_rx_gu¨d
);

1199 
j
 = 0;

1203 i‡((
num_tx_gu¨d
 > 0) &&

1204 (
cfg_d©a_Àn
 > 
off£t_tx_gu¨d
 + 
Àngth_tx_gu¨d
)) {

1205 
idx
 = 0;

1206 
i
 = 0; i < 
num_tx_gu¨d
; i++) {

1207 
g_tcm_h™dÀr
.
gu¨d_pös
[
j
] = ()
cfg_d©a
[
off£t_tx_gu¨d
 + 
idx
] |

1208 ()(
cfg_d©a
[
off£t_tx_gu¨d
 + 
idx
 + 1] << 8);

1210 
	`¥ötf_i
("%†öfo:Åx_ground[%d] = %2d\n", 
__func__
, 
i
, 
g_tcm_h™dÀr
.
gu¨d_pös
[i]);

1211 
idx
 += 2;

1212 
j
 += 1;

1218 i‡((
num_rx_gu¨d
 > 0) &&

1219 (
cfg_d©a_Àn
 > 
off£t_rx_gu¨d
 + 
Àngth_rx_gu¨d
)) {

1220 
i
 = 0; i < 
num_rx_gu¨d
; i++) {

1221 
g_tcm_h™dÀr
.
gu¨d_pös
[
j
] = ()
cfg_d©a
[
off£t_rx_gu¨d
 + 
idx
] |

1222 ()(
cfg_d©a
[
off£t_rx_gu¨d
 + 
idx
 + 1] << 8);

1224 
	`¥ötf_i
("%†öfo:Ñx_ground[%d] = %2d\n", 
__func__
, 
i
, 
g_tcm_h™dÀr
.
gu¨d_pös
[i]);

1225 
idx
 += 2;

1226 
j
 += 1;

1231 
	}
}

	@cpp/jni/tcm_control.h

29 #i‚de‡
_TCM_CONTROL_H__


30 
	#_TCM_CONTROL_H__


	)

32 
	#TCM_POLLING_DELAY_MS
 (20)

	)

33 
	#TCM_POLLING_TIMOUT
 (150Ë

	)

34 
	#TCM_RESET_DELAY_MS
 (250)

	)

35 
	#TCM_ERASE_FLASH_DELAY_MS
 (500)

	)

36 
	#TCM_WRITE_FLASH_DELAY_MS
 (200)

	)

38 
	#TCM_TOUCH_CONFIG_SIZE
 256

	)

39 
	#TCM_MAX_STATIC_CONFIG_SIZE
 7680

	)

41 
	#TCM_FINGERS_TO_SUPPORT
 10

	)

43 
	#TCM_MAX_PINS
 (64)

	)

45 
	etcm_idítify_mode
 {

46 
	mMODE_APPLICATION
 = 0x01,

47 
	mMODE_BOOTLOADER
 = 0x0B,

48 
	mMODE_BOOTLOADER_TDDI
 = 0x0C,

51 
	etcm_comm™d
 {

52 
	mCMD_NONE
 = 0x00,

53 
	mCMD_CONTINUE_WRITE
 = 0x01,

54 
	mCMD_IDENTIFY
 = 0x02,

55 
	mCMD_DEBUG
 = 0x03,

56 
	mCMD_RESET
 = 0x04,

57 
	mCMD_ENABLE_REPORT
 = 0x05,

58 
	mCMD_DISABLE_REPORT
 = 0x06,

59 
	mCMD_GET_BOOT_INFO
 = 0x10,

60 
	mCMD_ERASE_FLASH
 = 0x11,

61 
	mCMD_WRITE_FLASH
 = 0x12,

62 
	mCMD_READ_FLASH
 = 0x13,

63 
	mCMD_RUN_APPLICATION_FIRMWARE
 = 0x14,

64 
	mCMD_SPI_MASTER_WRITE_THEN_READ
 = 0x15,

65 
	mCMD_REBOOT_TO_ROM_BOOTLOADER
 = 0x16,

66 
	mCMD_RUN_BOOTLOADER_FIRMWARE
 = 0x1f,

67 
	mCMD_GET_APPLICATION_INFO
 = 0x20,

68 
	mCMD_GET_STATIC_CONFIG
 = 0x21,

69 
	mCMD_SET_STATIC_CONFIG
 = 0x22,

70 
	mCMD_GET_DYNAMIC_CONFIG
 = 0x23,

71 
	mCMD_SET_DYNAMIC_CONFIG
 = 0x24,

72 
	mCMD_GET_TOUCH_REPORT_CONFIG
 = 0x25,

73 
	mCMD_SET_TOUCH_REPORT_CONFIG
 = 0x26,

74 
	mCMD_REZERO
 = 0x27,

75 
	mCMD_COMMIT_CONFIG
 = 0x28,

76 
	mCMD_DESCRIBE_DYNAMIC_CONFIG
 = 0x29,

77 
	mCMD_PRODUCTION_TEST
 = 0x2a,

78 
	mCMD_SET_CONFIG_ID
 = 0x2b,

79 
	mCMD_ENTER_DEEP_SLEEP
 = 0x2c,

80 
	mCMD_EXIT_DEEP_SLEEP
 = 0x2d,

81 
	mCMD_GET_TOUCH_INFO
 = 0x2e,

82 
	mCMD_GET_DATA_LOCATION
 = 0x2f,

83 
	mCMD_DOWNLOAD_CONFIG
 = 0x46,

84 
	mCMD_UNLOCK_PRIVATE
 = 0x80,

85 
	mCMD_READ_RAM
 = 0x81,

86 
	mCMD_WRITE_REGISTER
 = 0x82,

89 
	etcm_ªp‹t_code
 {

90 
	mTCM_REPORT_IDENTIFY
 = 0x10,

91 
	mTCM_REPORT_TOUCH
 = 0x11,

92 
	mTCM_REPORT_DELTA
 = 0x12,

93 
	mTCM_REPORT_RAW
 = 0x13,

94 
	mTCM_REPORT_PRINTF
 = 0x82,

95 
	mTCM_REPORT_STATUS
 = 0xc0,

96 
	mTCM_REPORT_FORCE
 = 0xc1,

97 
	mTCM_REPORT_HDL
 = 0xfe,

100 
	etcm_°©us_code
 {

101 
	mSTATUS_IDLE
 = 0x00,

102 
	mSTATUS_OK
 = 0x01,

103 
	mSTATUS_BUSY
 = 0x02,

104 
	mSTATUS_CONTINUED_READ
 = 0x03,

105 
	mSTATUS_COMMAND_STATUS_RECEIVE_BUFFER_OVERFLOW
 = 0x0C,

106 
	mSTATUS_COMMAND_PREVIOUS_COMMAND_PENDING
 = 0x0D,

107 
	mSTATUS_COMMAND_NOT_IMPLEMENTED
 = 0x0E,

108 
	mSTATUS_ERROR
 = 0x0f,

109 
	mSTATUS_INVALID
 = 0xff

112 
	etcm_ã°_ty≥
 {

113 
	mTEST_TRX_TRX_SHORTS
 = 0x00,

114 
	mTEST_TRX_SENSOR_OPEN
 = 0x01,

115 
	mTEST_TRX_GND_SHORTS
 = 0x02,

116 
	mTEST_TRX_GROUND
 = 0x03,

117 
	mTEST_FULLRAW
 = 0x05,

118 
	mTEST_DRT
 = 0x07,

119 
	mTEST_OPEN_SHORT
 = 0x08,

120 
	mTEST_NOISE
 = 0x0A,

121 
	mTEST_PT11
 = 0x0B,

122 
	mTEST_PT12
 = 0x0C,

123 
	mTEST_PT13
 = 0x0D,

124 
	mTEST_ADC_RANGE
 = 0x11,

125 
	mTEST_ABS_RAW
 = 0x12,

126 
	mTEST_HYBRID_ABS_NOISE
 = 0x1D,

129 
	etcm_dy«mic_c⁄fig_id
 {

130 
	mDC_UNKNOWN
 = 0x00,

131 
	mDC_NO_DOZE
,

132 
	mDC_DISABLE_NOISE_MITIGATION
,

133 
	mDC_INHIBIT_FREQUENCY_SHIFT
,

134 
	mDC_REQUESTED_FREQUENCY
,

135 
	mDC_DISABLE_HSYNC
,

136 
	mDC_REZERO_ON_EXIT_DEEP_SLEEP
,

137 
	mDC_CHARGER_CONNECTED
,

138 
	mDC_NO_BASELINE_RELAXATION
,

139 
	mDC_IN_WAKEUP_GESTURE_MODE
,

140 
	mDC_STIMULUS_FINGERS
,

141 
	mDC_GRIP_SUPPRESSION_ENABLED
,

142 
	mDC_ENABLE_THICK_GLOVE
,

143 
	mDC_ENABLE_GLOVE
,

146 
	etcm_d©a_¨ó
 {

147 
	mTCM_LCM_DATA
 = 1,

148 
	mTCM_OEM_DATA
,

149 
	mTCM_PPDT_DATA
,

150 
	mTCM_FORCE_CALIBRATION_DATA


154 
	stcm_mesßge_hódî
 {

155 
	mm¨kî
;

156 
	mcode
;

157 
	mÀngth
[2];

160 
	stcm_idítify_ªp‹t
 {

161 
	mvîsi⁄
;

162 
	mmode
;

163 
	m∑π_numbî
[16];

164 
	mbuûd_id
[4];

165 
	mmax_wrôe_size
[2];

168 
	stcm_≠p_öfo
 {

169 
	mvîsi⁄
[2];

170 
	m°©us
[2];

171 
	m°©ic_c⁄fig_size
[2];

172 
	mdy«mic_c⁄fig_size
[2];

173 
	m≠p_c⁄fig_°¨t_wrôe_block
[2];

174 
	m≠p_c⁄fig_size
[2];

175 
	mmax_touch_ªp‹t_c⁄fig_size
[2];

176 
	mmax_touch_ªp‹t_∑ylﬂd_size
[2];

177 
	mcu°omî_c⁄fig_id
[16];

178 
	mmax_x
[2];

179 
	mmax_y
[2];

180 
	mmax_obje˘s
[2];

181 
	mnum_of_buâ⁄s
[2];

182 
	mnum_of_image_rows
[2];

183 
	mnum_of_image_cﬁs
[2];

184 
	mhas_hybrid_d©a
[2];

185 
	mnum_of_f‹˚_ñecs
[2];

188 
	stcm_boŸ_öfo
 {

189 
	mvîsi⁄
;

190 
	m°©us
;

191 
	mmask
[2];

192 
	mwrôe_block_size_w‹ds
;

193 
	mîa£_∑ge_size_w‹ds
[2];

194 
	mmax_wrôe_∑ylﬂd_size_byãs
[2];

195 
	mœ°_ª£t_ªas⁄
;

196 
	mpc_©_time_of_œ°_ª£t
[2];

197 
	mboŸ_c⁄fig_°¨t_block
[2];

198 
	mboŸ_c⁄fig_size_blocks
[2];

199 
	mdi•œy_c⁄fig_°¨t_block
[4];

200 
	mdi•œy_c⁄fig_Àngth_blocks
[2];

201 
	mbackup_di•œy_c⁄fig_°¨t_block
[4];

202 
	mbackup_di•œy_c⁄fig_Àngth_blocks
[2];

203 
	mcu°om_Ÿp_°¨t_block
[2];

204 
	mcu°om_Ÿp_Àngth_blocks
[2];

208 
	stcm_fögî_d©a
 {

209 
	m˛assifiˇti⁄
;

210 
	mtime°amp
;

211 
	mx
;

212 
	my
;

213 
	mz
;

214 
	mx_w
;

215 
	my_w
;

216 
	mtx_pos
;

217 
	mrx_pos
;

218 
	mod
;

219 
	mge°uª_doubÀ_èp
;

220 
	m¥s
;

224 
	stcm_h™dÀr
 {

225 
tcm_idítify_ªp‹t
 
	midítify_ªp‹t
;

226 
tcm_≠p_öfo
 
	m≠p_öfo_ªp‹t
;

227 
tcm_boŸ_öfo
 
	mboŸ_öfo_ªp‹t
;

228 
	mtouch_c⁄fig
[
TCM_TOUCH_CONFIG_SIZE
];

229 
	m°©ic_c⁄fig
[
TCM_MAX_STATIC_CONFIG_SIZE
];

231 
	mcuºít_fögî_idx
;

232 
	msize_of_fögî_ªp‹t
;

233 
tcm_fögî_d©a
 
	mfögî
[
TCM_FINGERS_TO_SUPPORT
];

235 
	mtx_pös
[
TCM_MAX_PINS
];

236 
	mtx_assig√d
;

237 
	mrx_pös
[
TCM_MAX_PINS
];

238 
	mrx_assig√d
;

239 
	mgu¨d_pös
[
TCM_MAX_PINS
];

240 
	mgu¨d_assig√d
;

243 
tcm_h™dÀr
 
	gg_tcm_h™dÀr
;

247 
boﬁ
 
tcm_föd_dev
(*
dev_node
);

248 
tcm_›í_dev
(c⁄° *
dev_node
);

249 
tcm_˛o£_dev
(c⁄° *
dev_node
);

252 
tcm_ªad_mesßge
(*
p_rd_d©a
, 
byãs_to_ªad
);

253 
tcm_gë_∑ylﬂd
(*
p_rd_d©a
, 
∑ylﬂd_size
);

254 
tcm_wrôe_mesßge
(*
p_wr_d©a
, 
byãs_to_wrôe
);

255 
tcm_waô_f‹_comm™d_ªady
();

256 
tcm_dr›_∑ckage
(
∑ylﬂd_size
);

257 
tcm_do_ª£t
();

258 
tcm_£t_no_¶ìp
(
°©e
);

259 
tcm_£t_ªzîo
();

262 
tcm_run_boŸlﬂdî
();

263 
tcm_run_≠∂iˇti⁄
();

266 
tcm_gë_idítify_öfo
(*
p_buf
);

267 
tcm_gë_≠p_öfo
(*
p_buf
);

270 
tcm_gë_touch_c⁄fig
();

271 
tcm_gë_°©ic_c⁄fig
();

274 
tcm_íabÀ_ªp‹t
(
boﬁ
 
íabÀ
, 
tcm_ªp‹t_code
 
ªp‹t_code
);

275 
tcm_ªad_ªp‹t_‰ame
(
ty≥
, *
p_out
, 
size_out
, 
boﬁ
 
out_ö_œndsˇ≥
);

278 
tcm_do_ã°_dπ_pid07
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

279 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

280 
tcm_do_ã°_noi£_pid0a
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

281 *
limô_max
, 
size_limô_max
);

282 
tcm_do_ã°_±11_pid0b
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

283 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

284 
tcm_do_ã°_±12_pid0c
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

285 *
limô_mö
, 
size_limô_mö
);

286 
tcm_do_ã°_±13_pid0d
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

287 *
limô_mö
, 
size_limô_mö
);

288 
tcm_do_ã°_fuŒ_øw_pid05
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

289 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

290 
tcm_do_ã°_åx_åx_sh‹t_pid01
(*
p_ªsu…_d©a
, *
pös_ªsu…
, 
size_of_pös_ªsu…
,

291 *
limô
, 
size_of_limô
);

292 
tcm_do_ã°_åx_ground_pid03
(*
p_ªsu…_d©a
, *
pös_ªsu…
, 
size_of_pös_ªsu…
,

293 *
limô
, 
size_of_limô
);

294 
tcm_do_ã°_adc_ønge_pid11
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

295 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

296 
tcm_do_ã°_abs_øwˇp_pid12
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

297 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

298 
tcm_do_ã°_hy_abs_no£_pid1d
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

299 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
);

300 
tcm_do_ã°_ex_high_ªsi°™˚_pid05
(*
p_ªsu…_tixñ
, *
p_ªsu…_rx
, *
p_ªsu…_tx
,

301 *
p_ªf_‰ame
, 
cﬁ
, 
row
,

302 
limô_tixñ
, 
limô_rxr€
, 
limô_txr€
);

305 
tcm_quîy_touch_ª•⁄£
(*
touch_x
, * 
touch_y
, * 
touch_°©us
,

306 
max_fögîs_to_¥o˚ss
);

307 
tcm_gë_touch_ªp‹t
(
ªp‹t_size
);

310 
tcm_øw_c⁄åﬁ
(* 
p_ö
, 
size_ö
, * 
p_out
, 
size_out
);

314 
tcm_gë_pös_m≠pög
(
rxes_off£t
, 
rxes_Àn
, 
txes_off£t
, 
txes_Àn
,

315 
num_rxgu¨d_off£t
, 
num_rxgu¨d_Àn
,

316 
rxgu¨d_pös_off£t
, 
rxgu¨d_pös_Àn
,

317 
num_txgu¨d_off£t
, 
num_txgu¨d_Àn
,

318 
txgu¨d_pös_off£t
, 
txgu¨d_pös_Àn
);

	@cpp/jni/tcm_flash_access.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

33 
	~<uni°d.h
>

35 
	~"sy«_dev_m™agî.h
"

36 
	~"tcm_c⁄åﬁ.h
"

38 #ifde‡
SAVE_ERR_MSG


39 
	~"îr_msg_˘æ.h
"

50 
	$tcm_gë_d©a_loˇti⁄
(
tcm_d©a_code
,

51 * 
°¨t_addr_ö_blocks
, * 
Àngth_ö_blocks
)

53 
ªtvÆ
 = 0;

54 
cmd_∑ckë
[4] = {
CMD_GET_DATA_LOCATION
, 1, 0, 0};

55 * 
d©a_buf
;

56 #ifde‡
SAVE_ERR_MSG


57 
îr
[
MAX_ERR_STRING_LEN
];

61 
cmd_∑ckë
[3] = 
tcm_d©a_code
;

64 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
cmd_∑ckë
, (cmd_packet));

65 i‡(
ªtvÆ
 < 0) {

66 
	`¥ötf_e
("%sÉrror: failÅo send command, CMD_GET_DATA_LOCATION 0x%x 0x%x 0x%x\n",

67 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3]);

68 #ifde‡
SAVE_ERR_MSG


69 
	`•rötf
(
îr
, "%sÉrror: failÅo send command, CMD_GET_DATA_LOCATION 0x%x 0x%x 0x%x\n",

70 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3]);

71 
	`add_îr‹_msg
(
îr
);

73 
ªtvÆ
 = -
EINVAL
;

74  
ªtvÆ
;

78 
ªtvÆ
 = 
	`tcm_waô_f‹_comm™d_ªady
();

79 i‡–
ªtvÆ
 < 0) {

80 
	`¥ötf
("%†îr‹: faûÅÿªad uµ d©®loˇti⁄ \n", 
__func__
);

81 #ifde‡
SAVE_ERR_MSG


82 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad uµ d©®loˇti⁄ \n", 
__func__
);

83 
	`add_îr‹_msg
(
îr
);

85 
ªtvÆ
 = -
EIO
;

86  
ªtvÆ
;

89 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
ªtvÆ
 + 3, ());

90 i‡(!
d©a_buf
) {

91 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

92 #ifde‡
SAVE_ERR_MSG


93 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

94 
	`add_îr‹_msg
(
îr
);

96 
ªtvÆ
 = -
ENOMEM
;

97 
exô
;

101 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
,Ñetval);

102 i‡(
ªtvÆ
 < 0) {

103 
ªtvÆ
 = -
EINVAL
;

104 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd \n", 
__func__
);

105 #ifde‡
SAVE_ERR_MSG


106 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd \n", 
__func__
);

107 
	`add_îr‹_msg
(
îr
);

109 
exô
;

113 *
°¨t_addr_ö_blocks
 = ()
d©a_buf
[0] | ()(data_buf[1] << 8);

114 *
Àngth_ö_blocks
 = ()
d©a_buf
[2] | ()(data_buf[3] << 8);

116 
	`¥ötf_i
("%s info: data code= 0x%02x, startáddr in blocks= 0x%04x,Üength in blocks= 0x%04x\n",

117 
__func__
, 
tcm_d©a_code
, *
°¨t_addr_ö_blocks
, *
Àngth_ö_blocks
);

119 
exô
:

120 i‡(
d©a_buf
)

121 
	`‰ì
(
d©a_buf
);

123  
ªtvÆ
;

124 
	}
}

133 
	$tcm_gë_boŸ_öfo
()

135 
ªtvÆ
 = 0;

136 
cmd_∑ckë
[3] = {
CMD_GET_BOOT_INFO
, 0, 0};

137 *
d©a_buf
;

138 
size
;

139 
∑ylﬂd_Àn
;

140 #ifde‡
SAVE_ERR_MSG


141 
îr
[
MAX_ERR_STRING_LEN
];

143 
	`mem£t
(&
g_tcm_h™dÀr
.
boŸ_öfo_ªp‹t
, 0x00, (
tcm_boŸ_öfo
));

146 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
cmd_∑ckë
, (cmd_packet));

147 i‡(
ªtvÆ
 < 0) {

148 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, CMD_GET_BOOT_INFO\n", 
__func__
);

149 #ifde‡
SAVE_ERR_MSG


150 
	`•rötf
(
îr
, "%†îr‹: faûÅÿ£nd comm™d, CMD_GET_BOOT_INFO\n", 
__func__
);

151 
	`add_îr‹_msg
(
îr
);

153 
ªtvÆ
 = -
EINVAL
;

154  
ªtvÆ
;

158 
∑ylﬂd_Àn
 = 
	`tcm_waô_f‹_comm™d_ªady
();

159 i‡(
∑ylﬂd_Àn
 < 0) {

160 
	`¥ötf_e
("%†îr‹: faûÅÿgë boŸ infÿ\n", 
__func__
);

161 #ifde‡
SAVE_ERR_MSG


162 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë boŸ infÿ\n", 
__func__
);

163 
	`add_îr‹_msg
(
îr
);

165 
ªtvÆ
 = -
EIO
;

166  
ªtvÆ
;

168 
	`¥ötf_i
("%†öfo: CMD_GET_BOOT_INFO i†com∂ëed.", 
__func__
);

170 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)(
∑ylﬂd_Àn
 + 3), ());

171 i‡(!
d©a_buf
) {

172 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã d©a_buf\n", 
__func__
);

173 #ifde‡
SAVE_ERR_MSG


174 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã d©a_buf\n", 
__func__
);

175 
	`add_îr‹_msg
(
îr
);

177 
ªtvÆ
 = -
EIO
;

178 
exô
;

182 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, ()
∑ylﬂd_Àn
);

183 i‡(
ªtvÆ
 < 0) {

184 
	`¥ötf_e
("%†îr‹: faûÅÿgë boŸ infÿ\n", 
__func__
);

185 #ifde‡
SAVE_ERR_MSG


186 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë boŸ infÿ\n", 
__func__
);

187 
	`add_îr‹_msg
(
îr
);

189 
ªtvÆ
 = -
EINVAL
;

190 
exô
;

193 
size
 = (
∑ylﬂd_Àn
 < (
tcm_boŸ_öfo
))?

194 
∑ylﬂd_Àn
 : ()(
tcm_boŸ_öfo
);

196 
	`mem˝y
(&
g_tcm_h™dÀr
.
boŸ_öfo_ªp‹t
, 
d©a_buf
, (
size_t
)
size
);

198 
	`¥ötf_i
("%†öfo: wrôe_block_size_w‹d†0x%04x", 
__func__
,

199 
g_tcm_h™dÀr
.
boŸ_öfo_ªp‹t
.
wrôe_block_size_w‹ds
);

200 
	`¥ötf_i
("%†öfo:Éø£_∑ge_size_w‹d†0x%04x", 
__func__
,

201 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
boŸ_öfo_ªp‹t
.
îa£_∑ge_size_w‹ds
[0],

202 
g_tcm_h™dÀr
.
boŸ_öfo_ªp‹t
.
îa£_∑ge_size_w‹ds
[1]));

203 
exô
:

204 i‡(
d©a_buf
)

205 
	`‰ì
(
d©a_buf
);

207  
ªtvÆ
;

208 
	}
}

219 
	$tcm_îa£_Êash_d©a
(
°¨t_addªss_ö_blocks
, 
Àngth_ö_blocks
,

220 
boﬁ
 
is_4byã_f‹m©
)

222 
ªtvÆ
 = 0;

223 
tcm_boŸ_öfo
* 
boŸ_öfo
 = &
g_tcm_h™dÀr
.
boŸ_öfo_ªp‹t
;

224 
block_size_w‹ds
 = 
boŸ_öfo
->
wrôe_block_size_w‹ds
;

225 
îa£_∑ge_size_w‹ds
 = (Ë
	`c⁄vît_uc_to_sh‹t
(

226 
boŸ_öfo
->
îa£_∑ge_size_w‹ds
[0], boot_info->erase_page_size_words[1]);

227 
cmd_∑ckë
[7] = {0};

228 
cmd_Àn
 = 0;

229 
fú°_îa£_∑ge
;

230 
num_îa£_∑ge
;

231 #ifde‡
SAVE_ERR_MSG


232 
îr
[
MAX_ERR_STRING_LEN
];

235 i‡(–0 =
block_size_w‹ds
Ë|| (0 =
îa£_∑ge_size_w‹ds
)) {

236 
	`¥ötf_e
("%sÉrror: invalidÖarameter. block size words= 0x%04x,ÉraseÖage size words= 0x%04x\n\n",

237 
__func__
, 
block_size_w‹ds
, 
îa£_∑ge_size_w‹ds
);

238 #ifde‡
SAVE_ERR_MSG


239 
	`•rötf
(
îr
, "%sÉrror: invalidÖarameter. block size words= 0x%04x,ÉraseÖage size words= 0x%04x\n",

240 
__func__
, 
block_size_w‹ds
, 
îa£_∑ge_size_w‹ds
);

241 
	`add_îr‹_msg
(
îr
);

243 
ªtvÆ
 = -
EINVAL
;

244  
ªtvÆ
;

248 
fú°_îa£_∑ge
 = (
°¨t_addªss_ö_blocks
 * 
block_size_w‹ds
Ë/ 
îa£_∑ge_size_w‹ds
;

250 
num_îa£_∑ge
 = (
Àngth_ö_blocks
 * 
block_size_w‹ds
Ë/ 
îa£_∑ge_size_w‹ds
;

251 i‡(
num_îa£_∑ge
 == 0)

252 
num_îa£_∑ge
 = 1;

254 
cmd_∑ckë
[0] = 
CMD_ERASE_FLASH
;

255 
cmd_∑ckë
[1] = (Ë((
is_4byã_f‹m©
)? 0x04 : 0x02);

256 i‡(
is_4byã_f‹m©
) {

257 
cmd_∑ckë
[3] = (Ë(
fú°_îa£_∑ge
 & 0xff);

258 
cmd_∑ckë
[4] = (Ë(
fú°_îa£_∑ge
 >> 8);

259 
cmd_∑ckë
[5] = (Ë(
num_îa£_∑ge
 & 0xff);

260 
cmd_∑ckë
[6] = (Ë(
num_îa£_∑ge
 >> 8);

262 
cmd_Àn
 = 7;

263 
	`¥ötf_i
("%s info: send command CMD_ERASE_FLASH 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x\n",

264 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3], cmd_packet[4], cmd_packet[5], cmd_packet[6]);

267 
cmd_∑ckë
[3] = (Ë(
fú°_îa£_∑ge
 & 0xff);

268 
cmd_∑ckë
[4] = (Ë(
num_îa£_∑ge
 & 0xff);

270 
cmd_Àn
 = 5;

271 
	`¥ötf_i
("%s info: send command CMD_ERASE_FLASH 0x%02x 0x%02x 0x%02x 0x%02x\n",

272 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3], cmd_packet[4]);

276 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
cmd_∑ckë
, 
cmd_Àn
);

277 i‡(
ªtvÆ
 < 0) {

278 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d CMD_ERASE_FLASH\n", 
__func__
);

279 #ifde‡
SAVE_ERR_MSG


280 i‡(
is_4byã_f‹m©
)

281 
	`•rötf
(
îr
, "%sÉrror: failÅo send command CMD_ERASE_FLASH 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x\n",

282 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3], cmd_packet[4], cmd_packet[5], cmd_packet[6]);

284 
	`•rötf
(
îr
, "%sÉrror: failÅo send command CMD_ERASE_FLASH 0x%02x 0x%02x 0x%02x 0x%02x\n",

285 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3], cmd_packet[4]);

287 
	`add_îr‹_msg
(
îr
);

289 
ªtvÆ
 = -
EINVAL
;

290  
ªtvÆ
;

293 
	`u¶ìp
(
TCM_ERASE_FLASH_DELAY_MS
 * 1000);

296 
ªtvÆ
 = 
	`tcm_waô_f‹_comm™d_ªady
();

297 i‡–
ªtvÆ
 < 0) {

298 
	`¥ötf_e
("%sÉrror: failÅoÉrase data inÅhe flash,áddress in blocks= 0x%4x,Üength in blocks= 0x%4x\n",

299 
__func__
, 
°¨t_addªss_ö_blocks
, 
Àngth_ö_blocks
);

300 #ifde‡
SAVE_ERR_MSG


301 
	`•rötf
(
îr
, "%sÉrror: failÅoÉrase data inÅhe flash,áddress in blocks= 0x%4x,Üength in blocks= 0x%4x\n",

302 
__func__
, 
°¨t_addªss_ö_blocks
, 
Àngth_ö_blocks
);

303 
	`add_îr‹_msg
(
îr
);

305 
ªtvÆ
 = -
EIO
;

306  
ªtvÆ
;

308 
	`¥ötf_i
("%†d⁄e", 
__func__
);

309  
ªtvÆ
;

310 
	}
}

319 
	$tcm_wrôe_Êash_d©a
(
°¨t_addªss_ö_blocks
,

320 *
wr_d©a
, 
wr_d©a_byãs
)

322 
ªtvÆ
 = 0;

323 *
cmd_∑ckë
 = 
NULL
;

324 *
d©a_buf
 = 
NULL
;

325 #ifde‡
SAVE_ERR_MSG


326 
îr
[
MAX_ERR_STRING_LEN
];

329 i‡(!
wr_d©a
) {

330 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî, wr_d©®i†nuŒ\n", 
__func__
);

331 #ifde‡
SAVE_ERR_MSG


332 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî, wr_d©®i†nuŒ\n", 
__func__
);

333 
	`add_îr‹_msg
(
îr
);

335  -
EIO
;

338 
cmd_∑ckë
 = 
	`ˇŒoc
((
size_t
)(
wr_d©a_byãs
 + 5), ());

339 i‡(!
cmd_∑ckë
) {

340 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ comm™dÖackë\n", 
__func__
);

341 #ifde‡
SAVE_ERR_MSG


342 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ comm™dÖackë\n", 
__func__
);

343 
	`add_îr‹_msg
(
îr
);

345 
ªtvÆ
 = -
ENOMEM
;

346 
exô
;

349 
cmd_∑ckë
[0] = 
CMD_WRITE_FLASH
;

350 
cmd_∑ckë
[1] = ()((
wr_d©a_byãs
 + 2) & 0xff);

351 
cmd_∑ckë
[2] = ()((
wr_d©a_byãs
 + 2) >> 8);

352 
cmd_∑ckë
[3] = ()(
°¨t_addªss_ö_blocks
 & 0xff);

353 
cmd_∑ckë
[4] = ()(
°¨t_addªss_ö_blocks
 >> 8);

354 
	`mem˝y
(&
cmd_∑ckë
[5], 
wr_d©a
, (
size_t
)
wr_d©a_byãs
);

357 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
cmd_∑ckë
, ()(
wr_d©a_byãs
 + 5));

358 i‡(
ªtvÆ
 < 0) {

359 
	`¥ötf_e
("%sÉrror: failÅo send command, CMD_WRITE_FLASH 0x%02x 0x%02x 0x%02x 0x%02x\n",

360 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3], cmd_packet[4]);

361 
ªtvÆ
 = -
EINVAL
;

362 #ifde‡
SAVE_ERR_MSG


363 
	`•rötf
(
îr
, "%sÉrror: failÅo send command, CMD_WRITE_FLASH 0x%02x 0x%02x 0x%02x 0x%02x\n",

364 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3], cmd_packet[4]);

365 
	`add_îr‹_msg
(
îr
);

367 
exô
;

370 
	`u¶ìp
(
TCM_WRITE_FLASH_DELAY_MS
 * 1000);

373 
ªtvÆ
 = 
	`tcm_waô_f‹_comm™d_ªady
();

374 i‡–
ªtvÆ
 < 0) {

375 
	`¥ötf_e
("%†îr‹: faûÅÿwrôêd©®tÿthêÊash\n", 
__func__
);

376 
ªtvÆ
 = -
EIO
;

377 #ifde‡
SAVE_ERR_MSG


378 
	`•rötf
(
îr
, "%†îr‹: faûÅÿwrôêd©®tÿthêÊash\n", 
__func__
);

379 
	`add_îr‹_msg
(
îr
);

381 
exô
;

385 i‡(
ªtvÆ
 > 0) {

386 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)(
ªtvÆ
 + 3), ());

387 i‡(!
d©a_buf
) {

388 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇã d©a_buf\n", 
__func__
);

389 #ifde‡
SAVE_ERR_MSG


390 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇã d©a_buf\n", 
__func__
);

391 
	`add_îr‹_msg
(
îr
);

393 
ªtvÆ
 = -
EIO
;

394 
exô
;

397 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, ()retval);

398 i‡(
ªtvÆ
 < 0) {

399 
	`¥ötf_e
("%†îr‹: faûÅÿgëÅhê∑ylﬂd\n", 
__func__
);

400 #ifde‡
SAVE_ERR_MSG


401 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhê∑ylﬂd\n", 
__func__
);

402 
	`add_îr‹_msg
(
îr
);

404 
ªtvÆ
 = -
EINVAL
;

405 
exô
;

409 
	`¥ötf_i
("%†öfo: d⁄e", 
__func__
);

411 
exô
:

412 i‡(
cmd_∑ckë
)

413 
	`‰ì
(
cmd_∑ckë
);

414 i‡(
d©a_buf
)

415 
	`‰ì
(
d©a_buf
);

417  
ªtvÆ
;

418 
	}
}

427 
	$tcm_ªad_Êash_d©a
(
°¨t_addªss_ö_blocks
,

428 *
rd_d©a
, 
rd_d©a_byãs
)

430 
ªtvÆ
 = 0;

431 
tcm_boŸ_öfo
* 
boŸ_öfo
 = &
g_tcm_h™dÀr
.
boŸ_öfo_ªp‹t
;

432 
block_size_w‹ds
 = 
boŸ_öfo
->
wrôe_block_size_w‹ds
;

433 
addªss_ö_w‹ds
;

434 
Àngth_ö_w‹ds
 = 
rd_d©a_byãs
 / ();

435 
cmd_∑ckë
[9] = {0};

436 *
ãmp_buf
;

437 
∑ylﬂd_Àn
;

438 #ifde‡
SAVE_ERR_MSG


439 
îr
[
MAX_ERR_STRING_LEN
];

442 i‡(!
rd_d©a
) {

443 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî,Ñd_d©®i†nuŒ\n", 
__func__
);

444 #ifde‡
SAVE_ERR_MSG


445 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Ñd_d©®i†nuŒ\n", 
__func__
);

446 
	`add_îr‹_msg
(
îr
);

448  -
EINVAL
;

451 
addªss_ö_w‹ds
 = 
°¨t_addªss_ö_blocks
 * 
block_size_w‹ds
;

453 
cmd_∑ckë
[0] = 
CMD_READ_FLASH
;

454 
cmd_∑ckë
[1] = 6;

455 
cmd_∑ckë
[2] = 0;

456 
cmd_∑ckë
[3] = ()(
addªss_ö_w‹ds
 & 0xff);

457 
cmd_∑ckë
[4] = ()((
addªss_ö_w‹ds
 >> 8) & 0xff);

458 
cmd_∑ckë
[5] = ()((
addªss_ö_w‹ds
 >> 16) & 0xff);

459 
cmd_∑ckë
[6] = ()(
addªss_ö_w‹ds
 >> 24);

460 
cmd_∑ckë
[7] = ()
Àngth_ö_w‹ds
;

461 
cmd_∑ckë
[8] = ()(
Àngth_ö_w‹ds
 >> 8);

464 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
cmd_∑ckë
, (cmd_packet));

465 i‡(
ªtvÆ
 < 0) {

466 
	`¥ötf_e
("%sÉrror: failÅo send command, CMD_READ_FLASH 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x\n",

467 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3], cmd_packet[4], cmd_packet[5],

468 
cmd_∑ckë
[6], cmd_packet[7], cmd_packet[8]);

469 #ifde‡
SAVE_ERR_MSG


470 
	`•rötf
(
îr
, "%sÉrror: failÅo send command, CMD_READ_FLASH 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x 0x%02x\n",

471 
__func__
, 
cmd_∑ckë
[1], cmd_packet[2], cmd_packet[3], cmd_packet[4], cmd_packet[5],

472 
cmd_∑ckë
[6], cmd_packet[7], cmd_packet[8]);

473 
	`add_îr‹_msg
(
îr
);

475 
ªtvÆ
 = -
EINVAL
;

476  
ªtvÆ
;

480 
∑ylﬂd_Àn
 = 
	`tcm_waô_f‹_comm™d_ªady
();

481 i‡–
∑ylﬂd_Àn
 < 0) {

482 
	`¥ötf_e
("%†îr‹: faûÅÿªad uµ d©a\n", 
__func__
);

483 
ªtvÆ
 = -
EIO
;

484 #ifde‡
SAVE_ERR_MSG


485 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªad uµ d©® \n", 
__func__
);

486 
	`add_îr‹_msg
(
îr
);

488  
ªtvÆ
;

491 
ãmp_buf
 = 
	`ˇŒoc
((
size_t
)(
∑ylﬂd_Àn
 + 3), ());

492 i‡(!
ãmp_buf
) {

493 
	`¥ötf_e
("%†îr‹: faûÅÿÆloˇãÅemp_buf\n", 
__func__
);

494 #ifde‡
SAVE_ERR_MSG


495 
	`•rötf
(
îr
, "%†îr‹: faûÅÿÆloˇãÅemp_buf\n", 
__func__
);

496 
	`add_îr‹_msg
(
îr
);

498 
ªtvÆ
 = -
EIO
;

499 
exô
;

503 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
ãmp_buf
, 
∑ylﬂd_Àn
);

504 i‡(
ªtvÆ
 < 0) {

505 
ªtvÆ
 = -
EINVAL
;

506 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd \n", 
__func__
);

507 #ifde‡
SAVE_ERR_MSG


508 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd \n", 
__func__
);

509 
	`add_îr‹_msg
(
îr
);

511  
ªtvÆ
;

514 
rd_d©a_byãs
 = (rd_d©a_byã†< 
∑ylﬂd_Àn
)?Ñd_data_bytes :Öayload_len;

515 
	`mem˝y
(
rd_d©a
, 
ãmp_buf
, (
size_t
)
rd_d©a_byãs
);

517 
	`¥ötf_i
("%†öfo: d⁄e", 
__func__
);

519 
exô
:

520 i‡(
ãmp_buf
)

521 
	`‰ì
(
ãmp_buf
);

523  
ªtvÆ
;

524 
	}
}

	@cpp/jni/tcm_identify.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

34 
	~"sy«_dev_m™agî.h
"

35 
	~"tcm_c⁄åﬁ.h
"

37 #ifde‡
SAVE_ERR_MSG


38 
	~"îr_msg_˘æ.h
"

49 
	$tcm_gë_idítify_öfo
(*
p_buf
)

51 
ªtvÆ
 = 0;

52 
comm™d
 = 
CMD_IDENTIFY
;

53 *
d©a_buf
;

54 
tcm_idítify_ªp‹t
 *
∑ckë
;

55 
∑ylﬂd_Àn
;

56 
size
;

57 
°r_off£t
 = 0;

58 #ifde‡
SAVE_ERR_MSG


59 
îr
[
MAX_ERR_STRING_LEN
];

62 
	`mem£t
(&
g_tcm_h™dÀr
.
idítify_ªp‹t
, 0x00, (
tcm_idítify_ªp‹t
));

64 
size
 = (
tcm_mesßge_hódî
Ë+ (
tcm_idítify_ªp‹t
);

65 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
size
, ());

66 i‡(!
d©a_buf
) {

67 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

68 
ªtvÆ
 = -
ENOMEM
;

69 
exô
;

73 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(&
comm™d
, (command));

74 i‡(
ªtvÆ
 < 0) {

75 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, CMD_IDENTIFY\n", 
__func__
);

76 
ªtvÆ
 = -
EINVAL
;

77 #ifde‡
SAVE_ERR_MSG


78 
	`•rötf
(
îr
, "%†îr‹: faûÅÿ£nd comm™d, CMD_IDENTIFY\n", 
__func__
);

79 
	`add_îr‹_msg
(
îr
);

81 
exô
;

84 
∑ylﬂd_Àn
 = 
	`tcm_waô_f‹_comm™d_ªady
();

85 i‡–
∑ylﬂd_Àn
 < 0) {

86 
	`¥ötf_e
("%†îr‹: faûÅÿgëÅhêª•⁄£ o‡CMD_IDENTIFY\n", 
__func__
);

87 #ifde‡
SAVE_ERR_MSG


88 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhêª•⁄£ o‡CMD_IDENTIFY\n", 
__func__
);

89 
	`add_îr‹_msg
(
îr
);

91 
ªtvÆ
 = -
EINVAL
;

92 
exô
;

94 
	`¥ötf_i
("%†öfo: CMD_IDENTIFY i†com∂ëed.", 
__func__
);

100 
size
 = 
∑ylﬂd_Àn
 + 3;

101 
ªtvÆ
 = 
	`tcm_ªad_mesßge
(
d©a_buf
, (Ë
size
);

102 i‡(
ªtvÆ
 < 0) {

103 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑemaöög d©a\n", 
__func__
);

104 #ifde‡
SAVE_ERR_MSG


105 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÑemaöög d©a\n", 
__func__
);

106 
	`add_îr‹_msg
(
îr
);

108 
ªtvÆ
 = -
EINVAL
;

109 
exô
;

112 i‡(
STATUS_CONTINUED_READ
 =
d©a_buf
[1]) {

113 
∑ckë
 = (
tcm_idítify_ªp‹t
 *)(
d©a_buf
 + 2);

115 
size
 = (
∑ylﬂd_Àn
 < (
tcm_idítify_ªp‹t
))?

116 
∑ylﬂd_Àn
:()(
tcm_idítify_ªp‹t
);

118 
	`mem˝y
(&
g_tcm_h™dÀr
.
idítify_ªp‹t
,

119 
∑ckë
,

120 (
size_t
)
size
);

123 
	`¥ötf_e
("%†îr‹: unknow¿ªadÅønß˘i⁄ (0x%x 0x%x)\n", 
__func__
, 
d©a_buf
[0], data_buf[1]);

124 
ªtvÆ
 = -
EINVAL
;

125 
exô
;

128 i‡(!
p_buf
)

129 
exô
;

131 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, "[ TCM Identification ]\n");

132 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Packet Version = %d\n",

133 
g_tcm_h™dÀr
.
idítify_ªp‹t
.
vîsi⁄
);

134 i‡(
MODE_APPLICATION
 =
g_tcm_h™dÀr
.
idítify_ªp‹t
.
mode
) {

135 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Firmware Mode =ápplication (0x%x)\n",

136 
g_tcm_h™dÀr
.
idítify_ªp‹t
.
mode
);

138 i‡(
MODE_BOOTLOADER
 =
g_tcm_h™dÀr
.
idítify_ªp‹t
.
mode
) {

139 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Firmware Mode = bootloader (0x%x)\n",

140 
g_tcm_h™dÀr
.
idítify_ªp‹t
.
mode
);

142 i‡(
MODE_BOOTLOADER_TDDI
 =
g_tcm_h™dÀr
.
idítify_ªp‹t
.
mode
) {

143 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Firmware Mode =Åddi bootloader (0x%x)\n",

144 
g_tcm_h™dÀr
.
idítify_ªp‹t
.
mode
);

147 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Firmware Mode = unknown (0x%x)\n",

148 
g_tcm_h™dÀr
.
idítify_ªp‹t
.
mode
);

150 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Part Number = %s\n",

151 
g_tcm_h™dÀr
.
idítify_ªp‹t
.
∑π_numbî
);

152 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " FW Build ID = %d\n",

153 (()
g_tcm_h™dÀr
.
idítify_ªp‹t
.
buûd_id
[0]) +

154 (()
g_tcm_h™dÀr
.
idítify_ªp‹t
.
buûd_id
[1] * 0x100) +

155 (()
g_tcm_h™dÀr
.
idítify_ªp‹t
.
buûd_id
[2] * 0x10000) +

156 (()
g_tcm_h™dÀr
.
idítify_ªp‹t
.
buûd_id
[3] * 0x1000000) );

157 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Max Written Size = %d\n",

158 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
idítify_ªp‹t
.
max_wrôe_size
[0],

159 
g_tcm_h™dÀr
.
idítify_ªp‹t
.
max_wrôe_size
[1]));

160 
	`•rötf
(
p_buf
 + 
°r_off£t
, "\n");

162 
exô
:

163 i‡(
d©a_buf
)

164 
	`‰ì
(
d©a_buf
);

166  
ªtvÆ
;

167 
	}
}

177 
	$tcm_gë_≠p_öfo
(*
p_buf
)

179 
ªtvÆ
 = 0;

180 
comm™d
 = 
CMD_GET_APPLICATION_INFO
;

181 *
d©a_buf
;

182 
∑ylﬂd_Àn
;

183 
size
;

184 
≠p_°©us
;

185 
tcm_≠p_öfo
 *
∑ckë
;

186 
°r_off£t
 = 0;

187 #ifde‡
SAVE_ERR_MSG


188 
îr
[
MAX_ERR_STRING_LEN
];

191 
	`mem£t
(&
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
, 0x00, (
tcm_≠p_öfo
));

193 
size
 = (
tcm_mesßge_hódî
Ë+ (
tcm_≠p_öfo
);

194 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
size
, ());

195 i‡(!
d©a_buf
) {

196 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

197 
ªtvÆ
 = -
ENOMEM
;

198 
exô
;

202 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(&
comm™d
, (command));

203 i‡(
ªtvÆ
 < 0) {

204 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, CMD_GET_APPLICATION_INFO\n", 
__func__
);

205 #ifde‡
SAVE_ERR_MSG


206 
	`•rötf
(
îr
, "%†îr‹: faûÅÿ£nd comm™d, CMD_GET_APPLICATION_INFO\n", 
__func__
);

207 
	`add_îr‹_msg
(
îr
);

209 
ªtvÆ
 = -
EINVAL
;

210 
exô
;

213 
∑ylﬂd_Àn
 = 
	`tcm_waô_f‹_comm™d_ªady
();

214 i‡–
∑ylﬂd_Àn
 < 0) {

215 
	`¥ötf_e
("%†îr‹: faûÅÿgëÅhêª•⁄£ o‡CMD_GET_APPLICATION_INFO\n", 
__func__
);

216 #ifde‡
SAVE_ERR_MSG


217 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhêª•⁄£ o‡CMD_GET_APPLICATION_INFO\n", 
__func__
);

218 
	`add_îr‹_msg
(
îr
);

220 
ªtvÆ
 = -
EINVAL
;

221 
exô
;

223 
	`¥ötf_i
("%†öfo: CMD_GET_APPLICATION_INFO i†com∂ëed.", 
__func__
);

229 
size
 = 
∑ylﬂd_Àn
 + 3;

230 
ªtvÆ
 = 
	`tcm_ªad_mesßge
(
d©a_buf
, (Ë
size
);

231 i‡(
ªtvÆ
 < 0) {

232 
	`¥ötf_e
("%†îr‹: faûÅÿªadÑe•⁄£\n", 
__func__
);

233 
ªtvÆ
 = -
EINVAL
;

234 
exô
;

237 i‡(
STATUS_CONTINUED_READ
 =
d©a_buf
[1]) {

238 
∑ckë
 = (
tcm_≠p_öfo
 *)(
d©a_buf
 + 2);

240 
size
 = (
∑ylﬂd_Àn
 < (
tcm_≠p_öfo
))?

241 
∑ylﬂd_Àn
:()(
tcm_≠p_öfo
);

243 
	`mem˝y
(&
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
,

244 
∑ckë
,

245 (
size_t
)
size
);

248 
	`¥ötf_e
("%†îr‹: unknow¿ªadÅønß˘i⁄ (0x%x 0x%x)\n", 
__func__
,

249 
d©a_buf
[0], data_buf[1]);

250 
ªtvÆ
 = -
EINVAL
;

251 
exô
;

254 i‡(!
p_buf
)

255 
exô
;

257 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, "[ TCM Application Info ]\n");

258 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Version = %d\n",

259 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
vîsi⁄
[0],

260 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
vîsi⁄
[1]));

261 
≠p_°©us
 = 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©us
[0],

262 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©us
[1]);

263 i‡–
≠p_°©us
 == 0x0000 ) {

264 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Status = OK\n");

267 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Status = 0x%x\n",

268 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©us
[0],

269 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©us
[1]));

272 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " FW Config ID = %x-%x-%x-%x-%x-%x-%x-%x-%x-%x-%x-%x-%x-%x-%x-%x\n",

273 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[0],

274 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[1],

275 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[2],

276 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[3],

277 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[4],

278 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[5],

279 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[6],

280 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[7],

281 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[8],

282 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[9],

283 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[10],

284 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[11],

285 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[12],

286 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[13],

287 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[14],

288 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
cu°omî_c⁄fig_id
[15]);

290 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " App. config size = %d\n",

291 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
≠p_c⁄fig_size
[0],

292 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
≠p_c⁄fig_size
[1]));

293 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Static config size = %d\n",

294 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©ic_c⁄fig_size
[0],

295 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
°©ic_c⁄fig_size
[1]));

297 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Max. X coordinate = %d\n",

298 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
max_x
[0],

299 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
max_x
[1]));

300 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Max. Y coordinate = %d\n",

301 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
max_y
[0],

302 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
max_y
[1]));

303 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Number of objects supported = %d\n",

304 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
max_obje˘s
[0],

305 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
max_obje˘s
[1]));

306 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Image Rows = %d\n",

307 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[0],

308 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[1]));

309 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Image Columns = %d\n",

310 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[0],

311 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[1]));

312 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Num of Buttons = %d\n",

313 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_buâ⁄s
[0],

314 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_buâ⁄s
[1]));

315 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Image hasÖrofile data = %d\n",

316 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
has_hybrid_d©a
[0],

317 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
has_hybrid_d©a
[1]));

318 
°r_off£t
 +
	`•rötf
(
p_buf
 + str_offset, " Num of Force Electrodes = %d\n",

319 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_f‹˚_ñecs
[0],

320 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_f‹˚_ñecs
[1]));

321 
	`•rötf
(
p_buf
 + 
°r_off£t
, "\n\n");

323 
exô
:

324 i‡(
d©a_buf
)

325 
	`‰ì
(
d©a_buf
);

327  
ªtvÆ
;

328 
	}
}

	@cpp/jni/tcm_production_test.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

34 
	~"sy«_dev_m™agî.h
"

35 
	~"tcm_c⁄åﬁ.h
"

37 #ifde‡
SAVE_ERR_MSG


38 
	~"îr_msg_˘æ.h
"

41 
exãnded_high_ªsi°™˚_ã°
(

42 
rx_2d_ch™√l
,

43 
tx_2d_ch™√l
,

44 sig√d * 
dñè_2d_image
,

45 sig√d * 
ba£löe_image
,

46 sig√d * 
ªf_2d_image
,

47 sig√d * 
rx_Resu…
,

48 sig√d * 
tx_Resu…
,

49 sig√d * 
surÁ˚_Resu…


61 
	$tcm_£nd_ã°_comm™d
(
tcm_ã°_ty≥
 
ã°_id
)

63 
ªtvÆ
 = 0;

64 
comm™d_∑ckë
[4] = {0, 0, 0, 0};

65 #ifde‡
SAVE_ERR_MSG


66 
îr
[
MAX_ERR_STRING_LEN
];

70 
comm™d_∑ckë
[0] = 
CMD_PRODUCTION_TEST
;

74 
comm™d_∑ckë
[1] = 0x01;

75 
comm™d_∑ckë
[2] = 0x00;

78 
comm™d_∑ckë
[3] = (Ë
ã°_id
;

80 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
comm™d_∑ckë
, (command_packet));

81 i‡(
ªtvÆ
 < 0) {

82 
	`¥ötf_e
("%sÉrror: failÅo send command, CMD_PRODUCTION_TEST 0x%x 0x%x 0x%x\n",

83 
__func__
, 
comm™d_∑ckë
[1], command_packet[2], command_packet[3]);

84 #ifde‡
SAVE_ERR_MSG


85 
	`•rötf
(
îr
, "%sÉrror: failÅo send command, CMD_PRODUCTION_TEST 0x%x 0x%x 0x%x\n",

86 
__func__
, 
comm™d_∑ckë
[1], command_packet[2], command_packet[3]);

87 
	`add_îr‹_msg
(
îr
);

89 
ªtvÆ
 = -
EINVAL
;

90  
ªtvÆ
;

93 
ªtvÆ
 = 
	`tcm_waô_f‹_comm™d_ªady
();

94 i‡–
ªtvÆ
 < 0) {

95 
	`¥ötf_e
("%sÉrror: failÅo getÅheÑesponse of command, (0x%x 0x%x 0x%x 0x%x) \n",

96 
__func__
, 
comm™d_∑ckë
[0], command_packet[1], command_packet[2], command_packet[3]);

97 #ifde‡
SAVE_ERR_MSG


98 
	`•rötf
(
îr
, "%sÉrror: failÅo getÅheÑesponse of command, (0x%x 0x%x 0x%x 0x%x) \n",

99 
__func__
, 
comm™d_∑ckë
[0], command_packet[1], command_packet[2], command_packet[3]);

100 
	`add_îr‹_msg
(
îr
);

102 
ªtvÆ
 = -
EINVAL
;

103  
ªtvÆ
;

105 
	`¥ötf_i
("%†öfo: CMD_PRODUCTION_TEST i†com∂ëed. (ã°_id:0x%x)", 
__func__
, ()
ã°_id
);

107  
ªtvÆ
;

108 
	}
}

117 
	$tcm_ª‹dî_ã°_d©a_‰ame
(*
p_ö
, *
p_out
)

119 *
p_d©a_16
;

120 
i
, 
j
, 
off£t
;

121 
rows
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[0] |

122 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[1] << 8);

123 
cﬁs
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[0] |

124 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[1] << 8);

126 i‡((!
p_ö
Ë|| (!
p_out
)) {

127 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî\n", 
__func__
);

128  -
EINVAL
;

132 
p_d©a_16
 = (*)&
p_ö
[0];

133 
i
 = 0; i < 
rows
; i++) {

134 
j
 = 0; j < 
cﬁs
; j++) {

136 i‡(
cﬁs
 > 
rows
)

137 
off£t
 = 
i
*
cﬁs
 + 
j
;

139 
off£t
 = 
j
*
rows
 + 
i
;

141 
p_out
[
off£t
] = *
p_d©a_16
;

142 
p_d©a_16
++;

147 
	}
}

159 
	$tcm_do_ã°_dπ_pid07
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

160 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

162 
ªtvÆ
 = 0;

163 
d©a
;

164 *
d©a_buf_16
 = 
NULL
;

165 *
d©a_buf
 = 
NULL
;

166 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

167 
row
 = 
	`sy«_gë_image_rows
(
åue
);

168 
d©a_∑ylﬂd
 = 0;

169 
i
, 
j
, 
idx_limô
;

170 
Áûuª_˙t
 = 0;

171 
limô_mö_d©a
;

172 
limô_max_d©a
;

173 #ifde‡
SAVE_ERR_MSG


174 
îr
[
MAX_ERR_STRING_LEN
];

177 i‡(!
p_ªsu…_img
) {

178 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

179 #ifde‡
SAVE_ERR_MSG


180 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

181 
	`add_îr‹_msg
(
îr
);

183 
ªtvÆ
 = -
EINVAL
;

184 
exô
;

186 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

187 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

188 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

189 #ifde‡
SAVE_ERR_MSG


190 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

191 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

192 
	`add_îr‹_msg
(
îr
);

194 
ªtvÆ
 = -
EINVAL
;

195 
exô
;

197 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

198 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

199 
__func__
, 
size_limô_mö
, 
size_limô_max
);

200 #ifde‡
SAVE_ERR_MSG


201 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

202 
	`add_îr‹_msg
(
îr
);

204 
ªtvÆ
 = -
EINVAL
;

205 
exô
;

209 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_DRT
);

210 i‡–
ªtvÆ
 < 0) {

211 #ifde‡
SAVE_ERR_MSG


212 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerformÖroduction_test command TEST_DRT\n",

213 
__func__
);

214 
	`add_îr‹_msg
(
îr
);

216 
ªtvÆ
 = -
EINVAL
;

217  
ªtvÆ
;

221 
d©a_∑ylﬂd
 = 
ªtvÆ
;

222 
	`¥ötf_i
("%s info: dynamicÑangeÖid07Åest (row = %d, col = %d) (payload size = %d)\n",

223 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

226 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

227 i‡(!
d©a_buf
) {

228 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

229 #ifde‡
SAVE_ERR_MSG


230 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

231 
	`add_îr‹_msg
(
îr
);

233 
ªtvÆ
 = -
ENOMEM
;

234 
exô
;

237 
d©a_buf_16
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

238 i‡(!
d©a_buf_16
) {

239 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

240 #ifde‡
SAVE_ERR_MSG


241 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

242 
	`add_îr‹_msg
(
îr
);

244 
ªtvÆ
 = -
ENOMEM
;

245 
exô
;

249 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

250 i‡(
ªtvÆ
 < 0) {

251 
ªtvÆ
 = -
EINVAL
;

252 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

253 #ifde‡
SAVE_ERR_MSG


254 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

255 
	`add_îr‹_msg
(
îr
);

257 
exô
;

261 
ªtvÆ
 = 
	`tcm_ª‹dî_ã°_d©a_‰ame
(
d©a_buf
, (*)
d©a_buf_16
);

262 i‡(
ªtvÆ
 < 0) {

263 
ªtvÆ
 = -
EINVAL
;

264 
	`¥ötf_e
("%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

265 #ifde‡
SAVE_ERR_MSG


266 
	`•rötf
(
îr
, "%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

267 
	`add_îr‹_msg
(
îr
);

269 
exô
;

275 
idx_limô
 = 0;

276 
i
 = 0; i < 
cﬁ
; i++) {

277 
j
 = 0; j < 
row
; j++) {

278 
d©a
 = 
d©a_buf_16
[
i
 * 
row
 + 
j
] ;

279 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
d©a
;

282 i‡(
size_limô_mö
 =(
cﬁ
 * 
row
)) {

283 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

286 
limô_mö_d©a
 = 
limô_mö
[0];

289 i‡(
size_limô_max
 =(
cﬁ
 * 
row
)) {

290 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

293 
limô_max_d©a
 = 
limô_max
[0];

297 i‡(
d©a
 < 
limô_mö_d©a
) {

298 
Áûuª_˙t
 += 1;

299 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

300 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

301 #ifde‡
SAVE_ERR_MSG


302 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

303 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

304 
	`add_îr‹_msg
(
îr
);

308 i‡(
d©a
 > 
limô_max_d©a
) {

309 
Áûuª_˙t
 += 1;

310 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô max = %5d\n", 
__func__
,

311 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

312 #ifde‡
SAVE_ERR_MSG


313 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

314 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

315 
	`add_îr‹_msg
(
îr
);

320 
idx_limô
 += 1;

324 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

325 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

326 
exô
:

327 if(
d©a_buf
)

328 
	`‰ì
(
d©a_buf
);

329 if(
d©a_buf_16
)

330 
	`‰ì
(
d©a_buf_16
);

332  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

333 
	}
}

345 
	$tcm_do_ã°_noi£_pid0a
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

346 *
limô_max
, 
size_limô_max
)

348 
ªtvÆ
 = 0;

349 
d©a
;

350 *
d©a_buf_16
 = 
NULL
;

351 *
d©a_buf
 = 
NULL
;

352 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

353 
row
 = 
	`sy«_gë_image_rows
(
åue
);

354 
d©a_∑ylﬂd
 = 0;

355 
i
, 
j
, 
idx_limô
;

356 
Áûuª_˙t
 = 0;

357 #ifde‡
SAVE_ERR_MSG


358 
îr
[
MAX_ERR_STRING_LEN
];

361 i‡(!
p_ªsu…_img
) {

362 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

363 #ifde‡
SAVE_ERR_MSG


364 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

365 
	`add_îr‹_msg
(
îr
);

367 
ªtvÆ
 = -
EINVAL
;

368 
exô
;

370 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

371 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

372 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

373 #ifde‡
SAVE_ERR_MSG


374 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

375 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

376 
	`add_îr‹_msg
(
îr
);

378 
ªtvÆ
 = -
EINVAL
;

379 
exô
;

381 i‡((!
limô_max
Ë|| (0 =
size_limô_max
)) {

382 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

383 #ifde‡
SAVE_ERR_MSG


384 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

385 
	`add_îr‹_msg
(
îr
);

387 
ªtvÆ
 = -
EINVAL
;

388 
exô
;

392 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_NOISE
);

393 i‡–
ªtvÆ
 < 0) {

394 #ifde‡
SAVE_ERR_MSG


395 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerformÖroduction_test command TEST_NOISE\n",

396 
__func__
);

397 
	`add_îr‹_msg
(
îr
);

399 
ªtvÆ
 = -
EIO
;

400  
ªtvÆ
;

404 
d©a_∑ylﬂd
 = 
ªtvÆ
;

405 
	`¥ötf_i
("%s info:ÇoiseÅestÖid0a (row = %d, col = %d) (payload size = %d)\n",

406 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

409 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

410 i‡(!
d©a_buf
) {

411 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

412 #ifde‡
SAVE_ERR_MSG


413 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

414 
	`add_îr‹_msg
(
îr
);

416 
ªtvÆ
 = -
ENOMEM
;

417 
exô
;

420 
d©a_buf_16
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

421 i‡(!
d©a_buf_16
) {

422 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

423 #ifde‡
SAVE_ERR_MSG


424 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

425 
	`add_îr‹_msg
(
îr
);

427 
ªtvÆ
 = -
ENOMEM
;

428 
exô
;

432 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

433 i‡(
ªtvÆ
 < 0) {

434 
ªtvÆ
 = -
EINVAL
;

435 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

436 #ifde‡
SAVE_ERR_MSG


437 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

438 
	`add_îr‹_msg
(
îr
);

440 
exô
;

445 
ªtvÆ
 = 
	`tcm_ª‹dî_ã°_d©a_‰ame
(
d©a_buf
, (*)
d©a_buf_16
);

446 i‡(
ªtvÆ
 < 0) {

447 
ªtvÆ
 = -
EINVAL
;

448 
	`¥ötf_e
("%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

449 #ifde‡
SAVE_ERR_MSG


450 
	`•rötf
(
îr
, "%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

451 
	`add_îr‹_msg
(
îr
);

453 
exô
;

459 
idx_limô
 = 0;

460 
i
 = 0; i < 
cﬁ
; i++) {

461 
j
 = 0; j < 
row
; j++) {

462 
d©a
 = 
d©a_buf_16
[
i
 * 
row
 + 
j
] ;

463 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
d©a
;

466 i‡(
size_limô_max
 =(
cﬁ
 * 
row
)) {

468 i‡(
	`abs
(
d©a
Ë> 
limô_max
[
idx_limô
]) {

469 
Áûuª_˙t
 += 1;

470 
	`¥ötf_e
("%sÉrror: failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

471 
__func__
, 
i
, 
j
, 
d©a
, 
limô_max
[
idx_limô
]);

472 #ifde‡
SAVE_ERR_MSG


473 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

474 
i
, 
j
, 
d©a
, 
limô_max
[
idx_limô
]);

475 
	`add_îr‹_msg
(
îr
);

481 i‡(
	`abs
(
d©a
Ë> 
limô_max
[0]) {

482 
Áûuª_˙t
 += 1;

483 
	`¥ötf_e
("%sÉrror: failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

484 
__func__
, 
i
, 
j
, 
d©a
, 
limô_max
[0]);

485 #ifde‡
SAVE_ERR_MSG


486 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

487 
i
, 
j
, 
d©a
, 
limô_max
[0]);

488 
	`add_îr‹_msg
(
îr
);

493 
idx_limô
 += 1;

497 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

498 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

499 
exô
:

500 if(
d©a_buf
)

501 
	`‰ì
(
d©a_buf
);

502 if(
d©a_buf_16
)

503 
	`‰ì
(
d©a_buf_16
);

505  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

506 
	}
}

518 
	$tcm_do_ã°_±11_pid0b
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

519 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

521 
ªtvÆ
 = 0;

522 
d©a
;

523 *
d©a_buf_16
 = 
NULL
;

524 *
d©a_buf
 = 
NULL
;

525 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

526 
row
 = 
	`sy«_gë_image_rows
(
åue
);

527 
d©a_∑ylﬂd
 = 0;

528 
i
, 
j
, 
idx_limô
;

529 
Áûuª_˙t
 = 0;

530 
limô_mö_d©a
;

531 
limô_max_d©a
;

532 #ifde‡
SAVE_ERR_MSG


533 
îr
[
MAX_ERR_STRING_LEN
];

536 i‡(!
p_ªsu…_img
) {

537 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

538 #ifde‡
SAVE_ERR_MSG


539 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

540 
	`add_îr‹_msg
(
îr
);

542 
ªtvÆ
 = -
EINVAL
;

543 
exô
;

545 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

546 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

547 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

548 #ifde‡
SAVE_ERR_MSG


549 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

550 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

551 
	`add_îr‹_msg
(
îr
);

553 
ªtvÆ
 = -
EINVAL
;

554 
exô
;

556 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

557 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

558 
__func__
, 
size_limô_mö
, 
size_limô_max
);

559 #ifde‡
SAVE_ERR_MSG


560 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

561 
	`add_îr‹_msg
(
îr
);

563 
ªtvÆ
 = -
EINVAL
;

564 
exô
;

568 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_PT11
);

569 i‡–
ªtvÆ
 < 0) {

570 #ifde‡
SAVE_ERR_MSG


571 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerformÖroduction_test command TEST_PT11\n",

572 
__func__
);

573 
	`add_îr‹_msg
(
îr
);

575 
ªtvÆ
 = -
EINVAL
;

576  
ªtvÆ
;

580 
d©a_∑ylﬂd
 = 
ªtvÆ
;

581 
	`¥ötf_i
("%s info:ÅcmÖt11ÅestÖid0b (row = %d, col = %d) (payload size = %d)\n",

582 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

585 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

586 i‡(!
d©a_buf
) {

587 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

588 #ifde‡
SAVE_ERR_MSG


589 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

590 
	`add_îr‹_msg
(
îr
);

592 
ªtvÆ
 = -
ENOMEM
;

593 
exô
;

596 
d©a_buf_16
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

597 i‡(!
d©a_buf_16
) {

598 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

599 #ifde‡
SAVE_ERR_MSG


600 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

601 
	`add_îr‹_msg
(
îr
);

603 
ªtvÆ
 = -
ENOMEM
;

604 
exô
;

608 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

609 i‡(
ªtvÆ
 < 0) {

610 
ªtvÆ
 = -
EINVAL
;

611 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

612 #ifde‡
SAVE_ERR_MSG


613 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

614 
	`add_îr‹_msg
(
îr
);

616 
exô
;

620 
ªtvÆ
 = 
	`tcm_ª‹dî_ã°_d©a_‰ame
(
d©a_buf
, (*)
d©a_buf_16
);

621 i‡(
ªtvÆ
 < 0) {

622 
ªtvÆ
 = -
EINVAL
;

623 
	`¥ötf_e
("%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

624 #ifde‡
SAVE_ERR_MSG


625 
	`•rötf
(
îr
, "%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

626 
	`add_îr‹_msg
(
îr
);

628 
exô
;

634 
idx_limô
 = 0;

635 
i
 = 0; i < 
cﬁ
; i++) {

636 
j
 = 0; j < 
row
; j++) {

637 
d©a
 = 
d©a_buf_16
[
i
 * 
row
 + 
j
] ;

638 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
d©a
;

641 i‡(
size_limô_mö
 =(
cﬁ
 * 
row
)) {

642 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

645 
limô_mö_d©a
 = 
limô_mö
[0];

648 i‡(
size_limô_max
 =(
cﬁ
 * 
row
)) {

649 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

652 
limô_max_d©a
 = 
limô_max
[0];

656 i‡(
d©a
 < 
limô_mö_d©a
) {

657 
Áûuª_˙t
 += 1;

658 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

659 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

660 #ifde‡
SAVE_ERR_MSG


661 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

662 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

663 
	`add_îr‹_msg
(
îr
);

667 i‡(
d©a
 > 
limô_max_d©a
) {

668 
Áûuª_˙t
 += 1;

669 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô max = %5d\n", 
__func__
,

670 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

671 #ifde‡
SAVE_ERR_MSG


672 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

673 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

674 
	`add_îr‹_msg
(
îr
);

679 
idx_limô
 += 1;

683 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

684 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

685 
exô
:

686 if(
d©a_buf
)

687 
	`‰ì
(
d©a_buf
);

688 if(
d©a_buf_16
)

689 
	`‰ì
(
d©a_buf_16
);

691  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

692 
	}
}

703 
	$tcm_do_ã°_±12_pid0c
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

704 *
limô_mö
, 
size_limô_mö
)

706 
ªtvÆ
 = 0;

707 
d©a
;

708 *
d©a_buf_16
 = 
NULL
;

709 *
d©a_buf
 = 
NULL
;

710 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

711 
row
 = 
	`sy«_gë_image_rows
(
åue
);

712 
d©a_∑ylﬂd
 = 0;

713 
i
, 
j
, 
idx_limô
;

714 
Áûuª_˙t
 = 0;

715 
limô_mö_d©a
;

716 #ifde‡
SAVE_ERR_MSG


717 
îr
[
MAX_ERR_STRING_LEN
];

720 i‡(!
p_ªsu…_img
) {

721 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

722 #ifde‡
SAVE_ERR_MSG


723 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

724 
	`add_îr‹_msg
(
îr
);

726 
ªtvÆ
 = -
EINVAL
;

727 
exô
;

729 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

730 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

731 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

732 #ifde‡
SAVE_ERR_MSG


733 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

734 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

735 
	`add_îr‹_msg
(
îr
);

737 
ªtvÆ
 = -
EINVAL
;

738 
exô
;

740 i‡(0 =
size_limô_mö
) {

741 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî, sizêlimô mö = %d\n", 
__func__
, 
size_limô_mö
);

742 #ifde‡
SAVE_ERR_MSG


743 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

744 
	`add_îr‹_msg
(
îr
);

746 
ªtvÆ
 = -
EINVAL
;

747 
exô
;

751 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_PT12
);

752 i‡–
ªtvÆ
 < 0) {

753 #ifde‡
SAVE_ERR_MSG


754 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerformÖroduction_test command TEST_PT12\n",

755 
__func__
);

756 
	`add_îr‹_msg
(
îr
);

758 
ªtvÆ
 = -
EINVAL
;

759  
ªtvÆ
;

763 
d©a_∑ylﬂd
 = 
ªtvÆ
;

764 
	`¥ötf_i
("%s info:ÅcmÖt12ÅestÖid0c (row = %d, col = %d) (payload size = %d)\n",

765 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

768 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

769 i‡(!
d©a_buf
) {

770 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

771 #ifde‡
SAVE_ERR_MSG


772 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

773 
	`add_îr‹_msg
(
îr
);

775 
ªtvÆ
 = -
ENOMEM
;

776 
exô
;

779 
d©a_buf_16
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

780 i‡(!
d©a_buf_16
) {

781 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

782 #ifde‡
SAVE_ERR_MSG


783 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

784 
	`add_îr‹_msg
(
îr
);

786 
ªtvÆ
 = -
ENOMEM
;

787 
exô
;

791 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

792 i‡(
ªtvÆ
 < 0) {

793 
ªtvÆ
 = -
EINVAL
;

794 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

795 #ifde‡
SAVE_ERR_MSG


796 
	`•rötf
(
îr
, "%s: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

797 
	`add_îr‹_msg
(
îr
);

799 
exô
;

803 
ªtvÆ
 = 
	`tcm_ª‹dî_ã°_d©a_‰ame
(
d©a_buf
, (*)
d©a_buf_16
);

804 i‡(
ªtvÆ
 < 0) {

805 
ªtvÆ
 = -
EINVAL
;

806 
	`¥ötf_e
("%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

807 #ifde‡
SAVE_ERR_MSG


808 
	`•rötf
(
îr
, "%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

809 
	`add_îr‹_msg
(
îr
);

811 
exô
;

817 
idx_limô
 = 0;

818 
i
 = 0; i < 
cﬁ
; i++) {

819 
j
 = 0; j < 
row
; j++) {

820 
d©a
 = 
d©a_buf_16
[
i
 * 
row
 + 
j
] ;

821 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
d©a
;

824 i‡(
size_limô_mö
 =(
cﬁ
 * 
row
)) {

825 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

828 
limô_mö_d©a
 = 
limô_mö
[0];

832 i‡(
d©a
 < 
limô_mö_d©a
) {

833 
Áûuª_˙t
 += 1;

834 
	`¥ötf_e
("%s: faûáà(%2d, %2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

835 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

836 #ifde‡
SAVE_ERR_MSG


837 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

838 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

839 
	`add_îr‹_msg
(
îr
);

843 
idx_limô
 += 1;

847 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

848 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

849 
exô
:

850 if(
d©a_buf
)

851 
	`‰ì
(
d©a_buf
);

852 if(
d©a_buf_16
)

853 
	`‰ì
(
d©a_buf_16
);

855  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

856 
	}
}

867 
	$tcm_do_ã°_±13_pid0d
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

868 *
limô_mö
, 
size_limô_mö
)

870 
ªtvÆ
 = 0;

871 
d©a
;

872 *
d©a_buf_16
 = 
NULL
;

873 *
d©a_buf
 = 
NULL
;

874 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

875 
row
 = 
	`sy«_gë_image_rows
(
åue
);

876 
d©a_∑ylﬂd
 = 0;

877 
i
, 
j
, 
idx_limô
;

878 
Áûuª_˙t
 = 0;

879 
limô_mö_d©a
;

880 #ifde‡
SAVE_ERR_MSG


881 
îr
[
MAX_ERR_STRING_LEN
];

884 i‡(!
p_ªsu…_img
) {

885 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

886 #ifde‡
SAVE_ERR_MSG


887 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

888 
	`add_îr‹_msg
(
îr
);

890 
ªtvÆ
 = -
EINVAL
;

891 
exô
;

893 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

894 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

895 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

896 #ifde‡
SAVE_ERR_MSG


897 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

898 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

899 
	`add_îr‹_msg
(
îr
);

901 
ªtvÆ
 = -
EINVAL
;

902 
exô
;

904 i‡(0 =
size_limô_mö
) {

905 
	`¥ötf_e
("%†îr‹: invÆidÖ¨amëî, sizêlimô mö = %d\n", 
__func__
, 
size_limô_mö
);

906 #ifde‡
SAVE_ERR_MSG


907 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

908 
	`add_îr‹_msg
(
îr
);

910 
ªtvÆ
 = -
EINVAL
;

911 
exô
;

916 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_PT13
);

917 i‡–
ªtvÆ
 < 0) {

918 #ifde‡
SAVE_ERR_MSG


919 
	`•rötf
(
îr
, "%serror: failÅoÖerformÖroduction_test command TEST_PT13\n",

920 
__func__
);

921 
	`add_îr‹_msg
(
îr
);

923 
ªtvÆ
 = -
EINVAL
;

924  
ªtvÆ
;

928 
d©a_∑ylﬂd
 = 
ªtvÆ
;

929 
	`¥ötf_i
("%s info:ÅcmÖt13ÅestÖid0d (row = %d, col = %d) (payload size = %d)\n",

930 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

933 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

934 i‡(!
d©a_buf
) {

935 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

936 #ifde‡
SAVE_ERR_MSG


937 
	`•rötf
(
îr
, "%s: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

938 
	`add_îr‹_msg
(
îr
);

940 
ªtvÆ
 = -
ENOMEM
;

941 
exô
;

944 
d©a_buf_16
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

945 i‡(!
d©a_buf_16
) {

946 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

947 #ifde‡
SAVE_ERR_MSG


948 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

949 
	`add_îr‹_msg
(
îr
);

951 
ªtvÆ
 = -
ENOMEM
;

952 
exô
;

956 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

957 i‡(
ªtvÆ
 < 0) {

958 
ªtvÆ
 = -
EINVAL
;

959 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

960 #ifde‡
SAVE_ERR_MSG


961 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

962 
	`add_îr‹_msg
(
îr
);

964 
exô
;

968 
ªtvÆ
 = 
	`tcm_ª‹dî_ã°_d©a_‰ame
(
d©a_buf
, (*)
d©a_buf_16
);

969 i‡(
ªtvÆ
 < 0) {

970 
ªtvÆ
 = -
EINVAL
;

971 
	`¥ötf_e
("%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

972 #ifde‡
SAVE_ERR_MSG


973 
	`•rötf
(
îr
, "%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

974 
	`add_îr‹_msg
(
îr
);

976 
exô
;

982 
idx_limô
 = 0;

983 
i
 = 0; i < 
cﬁ
; i++) {

984 
j
 = 0; j < 
row
; j++) {

985 
d©a
 = 
d©a_buf_16
[
i
 * 
row
 + 
j
] ;

986 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
d©a
;

989 i‡(
size_limô_mö
 =(
cﬁ
 * 
row
)) {

990 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

993 
limô_mö_d©a
 = 
limô_mö
[0];

997 i‡(
d©a
 < 
limô_mö_d©a
) {

998 
Áûuª_˙t
 += 1;

999 
	`¥ötf_e
("%s: faûáà(%2d, %2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

1000 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

1001 #ifde‡
SAVE_ERR_MSG


1002 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

1003 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

1004 
	`add_îr‹_msg
(
îr
);

1008 
idx_limô
 += 1;

1012 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1013 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1014 
exô
:

1015 if(
d©a_buf
)

1016 
	`‰ì
(
d©a_buf
);

1017 if(
d©a_buf_16
)

1018 
	`‰ì
(
d©a_buf_16
);

1020  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1021 
	}
}

1032 
	$tcm_do_ã°_fuŒ_øw_pid05
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1033 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

1035 
ªtvÆ
 = 0;

1036 
d©a
;

1037 *
d©a_buf_16
 = 
NULL
;

1038 *
d©a_buf
 = 
NULL
;

1039 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

1040 
row
 = 
	`sy«_gë_image_rows
(
åue
);

1041 
d©a_∑ylﬂd
 = 0;

1042 
i
, 
j
, 
idx_limô
;

1043 
Áûuª_˙t
 = 0;

1044 
limô_mö_d©a
;

1045 
limô_max_d©a
;

1046 #ifde‡
SAVE_ERR_MSG


1047 
îr
[
MAX_ERR_STRING_LEN
];

1050 i‡(!
p_ªsu…_img
) {

1051 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1052 #ifde‡
SAVE_ERR_MSG


1053 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1054 
	`add_îr‹_msg
(
îr
);

1056 
ªtvÆ
 = -
EINVAL
;

1057 
exô
;

1059 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

1060 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1061 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1062 #ifde‡
SAVE_ERR_MSG


1063 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1064 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1065 
	`add_îr‹_msg
(
îr
);

1067 
ªtvÆ
 = -
EINVAL
;

1068 
exô
;

1070 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

1071 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

1072 
__func__
, 
size_limô_mö
, 
size_limô_max
);

1073 #ifde‡
SAVE_ERR_MSG


1074 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

1075 
	`add_îr‹_msg
(
îr
);

1077 
ªtvÆ
 = -
EINVAL
;

1078 
exô
;

1082 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_FULLRAW
);

1083 i‡–
ªtvÆ
 < 0) {

1084 #ifde‡
SAVE_ERR_MSG


1085 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerformÖroduction_test command TEST_FULLRAW\n",

1086 
__func__
);

1087 
	`add_îr‹_msg
(
îr
);

1089 
ªtvÆ
 = -
EINVAL
;

1090  
ªtvÆ
;

1094 
d©a_∑ylﬂd
 = 
ªtvÆ
;

1095 
	`¥ötf_i
("%s info: fullÑawÅestÖid05 (row = %d, col = %d) (payload size = %d)\n",

1096 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

1099 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

1100 i‡(!
d©a_buf
) {

1101 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1102 #ifde‡
SAVE_ERR_MSG


1103 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1104 
	`add_îr‹_msg
(
îr
);

1106 
ªtvÆ
 = -
ENOMEM
;

1107 
exô
;

1110 
d©a_buf_16
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

1111 i‡(!
d©a_buf_16
) {

1112 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

1113 #ifde‡
SAVE_ERR_MSG


1114 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

1115 
	`add_îr‹_msg
(
îr
);

1117 
ªtvÆ
 = -
ENOMEM
;

1118 
exô
;

1122 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

1123 i‡(
ªtvÆ
 < 0) {

1124 
ªtvÆ
 = -
EINVAL
;

1125 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1126 #ifde‡
SAVE_ERR_MSG


1127 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1128 
	`add_îr‹_msg
(
îr
);

1130 
exô
;

1134 
ªtvÆ
 = 
	`tcm_ª‹dî_ã°_d©a_‰ame
(
d©a_buf
, (*)
d©a_buf_16
);

1135 i‡(
ªtvÆ
 < 0) {

1136 
ªtvÆ
 = -
EINVAL
;

1137 
	`¥ötf_e
("%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

1138 #ifde‡
SAVE_ERR_MSG


1139 
	`•rötf
(
îr
, "%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

1140 
	`add_îr‹_msg
(
îr
);

1142 
exô
;

1148 
idx_limô
 = 0;

1149 
i
 = 0; i < 
cﬁ
; i++) {

1150 
j
 = 0; j < 
row
; j++) {

1151 
d©a
 = 
d©a_buf_16
[
i
 * 
row
 + 
j
] ;

1152 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
d©a
;

1155 i‡(
size_limô_mö
 =(
cﬁ
 * 
row
)) {

1156 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

1159 
limô_mö_d©a
 = 
limô_mö
[0];

1162 i‡(
size_limô_max
 =(
cﬁ
 * 
row
)) {

1163 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

1166 
limô_max_d©a
 = 
limô_max
[0];

1170 i‡(
d©a
 < 
limô_mö_d©a
) {

1171 
Áûuª_˙t
 += 1;

1172 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô mö = %5d\n", 
__func__
,

1173 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

1174 #ifde‡
SAVE_ERR_MSG


1175 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

1176 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

1177 
	`add_îr‹_msg
(
îr
);

1181 i‡(
d©a
 > 
limô_max_d©a
) {

1182 
Áûuª_˙t
 += 1;

1183 
	`¥ötf_e
("%†îr‹: faûáà(%2d, %2dËd©®%5d,Üimô max = %5d\n", 
__func__
,

1184 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

1185 #ifde‡
SAVE_ERR_MSG


1186 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

1187 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

1188 
	`add_îr‹_msg
(
îr
);

1193 
idx_limô
 += 1;

1197 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1198 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1199 
exô
:

1200 if(
d©a_buf
)

1201 
	`‰ì
(
d©a_buf
);

1202 if(
d©a_buf_16
)

1203 
	`‰ì
(
d©a_buf_16
);

1205  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1206 
	}
}

1217 
boﬁ
 
	$tcm_is_pös_assig√d
(
pö
,

1218 *
tx_pös
, 
tx_assig√d
,

1219 *
rx_pös
, 
rx_assig√d
,

1220 *
gu¨d_pös
, 
gu¨d_assig√d
)

1222 
i
;

1224 
i
 = 0; i < 
tx_assig√d
; i++) {

1225 i‡(
pö
 =
tx_pös
[
i
]) {

1226  
åue
;

1229 
i
 = 0; i < 
rx_assig√d
; i++) {

1230 i‡(
pö
 =
rx_pös
[
i
]) {

1231  
åue
;

1234 
i
 = 0; i < 
gu¨d_assig√d
; i++) {

1235 i‡(
pö
 =
gu¨d_pös
[
i
]) {

1236  
åue
;

1240  
Ál£
;

1241 
	}
}

1252 
	$tcm_do_ã°_åx_åx_sh‹t_pid01
(*
p_ªsu…_d©a
, *
pös_ªsu…
, 
size_of_pös_ªsu…
,

1253 *
limô
, 
size_of_limô
)

1255 
ªtvÆ
;

1256 *
d©a_buf
 = 
NULL
;

1257 
d©a_∑ylﬂd
 = 0;

1258 *
tx_pös
 = 
g_tcm_h™dÀr
.tx_pins;

1259 
tx_assig√d
 = 
g_tcm_h™dÀr
.tx_assigned;

1260 *
rx_pös
 = 
g_tcm_h™dÀr
.rx_pins;

1261 
rx_assig√d
 = 
g_tcm_h™dÀr
.rx_assigned;

1262 *
gu¨d_pös
 = 
g_tcm_h™dÀr
.guard_pins;

1263 
gu¨d_assig√d
 = 
g_tcm_h™dÀr
.guard_assigned;

1264 
Áûuª_˙t
 = 0;

1265 
i
, 
j
;

1266 
phy_pö
;

1267 
boﬁ
 
do_pö_ã°
;

1268 #ifde‡
SAVE_ERR_MSG


1269 
îr
[
MAX_ERR_STRING_LEN
];

1272 i‡(!
p_ªsu…_d©a
) {

1273 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1274 #ifde‡
SAVE_ERR_MSG


1275 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1276 
	`add_îr‹_msg
(
îr
);

1278 
ªtvÆ
 = -
EINVAL
;

1279 
exô
;

1281 i‡(!
pös_ªsu…
) {

1282 
	`¥ötf_e
("%†îr‹:Öös_ªsu… i†NULL\n", 
__func__
);

1283 #ifde‡
SAVE_ERR_MSG


1284 
	`•rötf
(
îr
, "%†îr‹:Öös_ªsu… i†NULL.\n", 
__func__
);

1285 
	`add_îr‹_msg
(
îr
);

1287 
ªtvÆ
 = -
EINVAL
;

1288 
exô
;

1291 i‡(!
limô
) {

1292 
	`¥ötf_e
("%†îr‹:Üimô i†NULL\n", 
__func__
);

1293 #ifde‡
SAVE_ERR_MSG


1294 
	`•rötf
(
îr
, "%†îr‹:Üimô i†NULL.\n", 
__func__
);

1295 
	`add_îr‹_msg
(
îr
);

1297 
ªtvÆ
 = -
EINVAL
;

1298 
exô
;

1301 i‡(
size_of_pös_ªsu…
 !
size_of_limô
) {

1302 
	`¥ötf_e
("%sÉrror: size is mismatching (%d, %d)\n",

1303 
__func__
, 
size_of_pös_ªsu…
, 
size_of_limô
);

1304 #ifde‡
SAVE_ERR_MSG


1305 
	`•rötf
(
îr
, "%sÉrror: size is mismatching (%d, %d)\n",

1306 
__func__
, 
size_of_pös_ªsu…
, 
size_of_limô
);

1307 
	`add_îr‹_msg
(
îr
);

1309 
ªtvÆ
 = -
EINVAL
;

1310 
exô
;

1314 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_TRX_SENSOR_OPEN
);

1315 i‡–
ªtvÆ
 < 0) {

1316 #ifde‡
SAVE_ERR_MSG


1317 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerformÖroduction_test command TEST_TRX_SENSOR_OPEN\n",

1318 
__func__
);

1319 
	`add_îr‹_msg
(
îr
);

1321 
ªtvÆ
 = -
EINVAL
;

1322  
ªtvÆ
;

1326 
d©a_∑ylﬂd
 = 
ªtvÆ
;

1327 
	`¥ötf_i
("%†öfo:ÅrxÅrx sh‹àã°Öid01 (∑ylﬂd sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1329 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

1330 i‡(!
d©a_buf
) {

1331 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1332 #ifde‡
SAVE_ERR_MSG


1333 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1334 
	`add_îr‹_msg
(
îr
);

1336 
ªtvÆ
 = -
ENOMEM
;

1337 
exô
;

1341 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

1342 i‡(
ªtvÆ
 < 0) {

1343 
ªtvÆ
 = -
EINVAL
;

1344 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1345 #ifde‡
SAVE_ERR_MSG


1346 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1347 
	`add_îr‹_msg
(
îr
);

1349 
exô
;

1352 i‡(
d©a_∑ylﬂd
 > 
TCM_MAX_PINS
/8) {

1353 
	`¥ötf_e
("%†îr‹:Öaylﬂd sizêi†ovî 8 byãs\n", 
__func__
);

1354 #ifde‡
SAVE_ERR_MSG


1355 
	`•rötf
(
îr
, "%†îr‹:Öaylﬂd sizêi†ovî 8 byã†(sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1356 
	`add_îr‹_msg
(
îr
);

1358 
exô
;

1361 
i
 = 0; i < 
d©a_∑ylﬂd
; i++) {

1363 
	`¥ötf_i
("%†öfo:Öt01[%d]: 0x%2x\n", 
__func__
, 
i
 , 
d©a_buf
[i]);

1365 
j
 = 0; j < 8; j++) {

1366 
phy_pö
 = (
i
*8 + 
j
);

1367 
do_pö_ã°
 = 
	`tcm_is_pös_assig√d
(
phy_pö
,

1368 
tx_pös
, 
tx_assig√d
,

1369 
rx_pös
, 
rx_assig√d
,

1370 
gu¨d_pös
, 
gu¨d_assig√d
);

1371 i‡(
do_pö_ã°
) {

1373 i‡(
phy_pö
 <
size_of_pös_ªsu…
)

1374 
pös_ªsu…
[
phy_pö
] = 
	`GET_BIT
(
d©a_buf
[
i
], 
j
);

1378 i‡(
phy_pö
 <
size_of_pös_ªsu…
)

1379 
pös_ªsu…
[
phy_pö
] = -1;

1383 
p_ªsu…_d©a
[
i
] = 
d©a_buf
[i];

1386 
i
 = 0; i < 
size_of_pös_ªsu…
; i++) {

1387 i‡((
pös_ªsu…
[
i
] !-1Ë&& (pös_ªsu…[i] !
limô
[i])) {

1388 
Áûuª_˙t
 += 1;

1390 
	`¥ötf_e
("%sÉrror: failátÖin-%2d, data = %5d,Üimit = %5d\n",

1391 
__func__
, 
i
, 
pös_ªsu…
[i], 
limô
[i]);

1392 #ifde‡
SAVE_ERR_MSG


1393 
	`•rötf
(
îr
, "failátÖin-%2d, data = %5d,Üimit = %5d\n",

1394 
i
, 
pös_ªsu…
[i], 
limô
[i]);

1395 
	`add_îr‹_msg
(
îr
);

1400 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1401 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1402 
exô
:

1403 if(
d©a_buf
)

1404 
	`‰ì
(
d©a_buf
);

1406  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1407 
	}
}

1418 
	$tcm_do_ã°_åx_ground_pid03
(*
p_ªsu…_d©a
, *
pös_ªsu…
, 
size_of_pös_ªsu…
,

1419 *
limô
, 
size_of_limô
)

1421 
ªtvÆ
;

1422 *
d©a_buf
 = 
NULL
;

1423 
d©a_∑ylﬂd
 = 0;

1424 
Áûuª_˙t
 = 0;

1425 
i
, 
j
;

1426 
phy_pö
;

1427 #ifde‡
SAVE_ERR_MSG


1428 
îr
[
MAX_ERR_STRING_LEN
];

1431 i‡(!
p_ªsu…_d©a
) {

1432 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1433 #ifde‡
SAVE_ERR_MSG


1434 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1435 
	`add_îr‹_msg
(
îr
);

1437 
ªtvÆ
 = -
EINVAL
;

1438 
exô
;

1440 i‡(!
pös_ªsu…
) {

1441 
	`¥ötf_e
("%†îr‹:Öös_ªsu… i†NULL\n", 
__func__
);

1442 #ifde‡
SAVE_ERR_MSG


1443 
	`•rötf
(
îr
, "%†îr‹:Öös_ªsu… i†NULL.\n", 
__func__
);

1444 
	`add_îr‹_msg
(
îr
);

1446 
ªtvÆ
 = -
EINVAL
;

1447 
exô
;

1450 i‡(!
limô
) {

1451 
	`¥ötf_e
("%†îr‹:Üimô i†NULL\n", 
__func__
);

1452 #ifde‡
SAVE_ERR_MSG


1453 
	`•rötf
(
îr
, "%†îr‹:Üimô i†NULL.\n", 
__func__
);

1454 
	`add_îr‹_msg
(
îr
);

1456 
ªtvÆ
 = -
EINVAL
;

1457 
exô
;

1460 i‡(
size_of_pös_ªsu…
 !
size_of_limô
) {

1461 
	`¥ötf_e
("%sÉrror: size is mismatching (%d, %d)\n",

1462 
__func__
, 
size_of_pös_ªsu…
, 
size_of_limô
);

1463 #ifde‡
SAVE_ERR_MSG


1464 
	`•rötf
(
îr
, "%sÉrror: size is mismatching (%d, %d)\n",

1465 
__func__
, 
size_of_pös_ªsu…
, 
size_of_limô
);

1466 
	`add_îr‹_msg
(
îr
);

1468 
ªtvÆ
 = -
EINVAL
;

1469 
exô
;

1473 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_TRX_GROUND
);

1474 i‡–
ªtvÆ
 < 0) {

1475 #ifde‡
SAVE_ERR_MSG


1476 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerformÖroduction_test command EST_TRX_SENSOR_OPEN\n",

1477 
__func__
);

1478 
	`add_îr‹_msg
(
îr
);

1480  
ªtvÆ
;

1484 
d©a_∑ylﬂd
 = 
ªtvÆ
;

1485 
	`¥ötf_i
("%†öfo:Årx groundÅe°Öid03 (∑ylﬂd sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1487 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

1488 i‡(!
d©a_buf
) {

1489 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1490 #ifde‡
SAVE_ERR_MSG


1491 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1492 
	`add_îr‹_msg
(
îr
);

1494 
ªtvÆ
 = -
ENOMEM
;

1495 
exô
;

1499 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

1500 i‡(
ªtvÆ
 < 0) {

1501 
ªtvÆ
 = -
EINVAL
;

1502 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1503 #ifde‡
SAVE_ERR_MSG


1504 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1505 
	`add_îr‹_msg
(
îr
);

1507 
exô
;

1510 i‡(
d©a_∑ylﬂd
 > 
TCM_MAX_PINS
/8) {

1511 
	`¥ötf_e
("%†îr‹:Öaylﬂd sizêi†ovî 8 byãs\n", 
__func__
);

1512 #ifde‡
SAVE_ERR_MSG


1513 
	`•rötf
(
îr
, "%†îr‹:Öaylﬂd sizêi†ovî 8 byã†(sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1514 
	`add_îr‹_msg
(
îr
);

1516 
exô
;

1519 
i
 = 0; i < 
d©a_∑ylﬂd
; i++) {

1521 
	`¥ötf_i
("%†öfo:Öt03[%d]: 0x%2x\n", 
__func__
, 
i
 , 
d©a_buf
[i]);

1523 
j
 = 0; j < 8; j++) {

1524 
phy_pö
 = (
i
 * 8 + 
j
);

1526 i‡(
phy_pö
 <
size_of_pös_ªsu…
) {

1527 
pös_ªsu…
[
phy_pö
] = 
	`GET_BIT
(
d©a_buf
[
i
], 
j
);

1531 
p_ªsu…_d©a
[
i
] = 
d©a_buf
[i];

1534 
i
 = 0; i < 
size_of_pös_ªsu…
; i++) {

1535 i‡(
pös_ªsu…
[
i
] !
limô
[i]) {

1536 
Áûuª_˙t
 += 1;

1538 
	`¥ötf_e
("%sÉrror: failátÖin-%2d, data = %5d,Üimit = %5d\n",

1539 
__func__
, 
i
, 
pös_ªsu…
[i], 
limô
[i]);

1540 #ifde‡
SAVE_ERR_MSG


1541 
	`•rötf
(
îr
, "failátÖin-%2d, data = %5d,Üimit = %5d\n",

1542 
i
, 
pös_ªsu…
[i], 
limô
[i]);

1543 
	`add_îr‹_msg
(
îr
);

1548 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1549 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1550 
exô
:

1551 if(
d©a_buf
)

1552 
	`‰ì
(
d©a_buf
);

1554  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1555 
	}
}

1566 
	$tcm_do_ã°_adc_ønge_pid11
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1567 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

1569 
ªtvÆ
 = 0;

1570 
d©a
;

1571 *
d©a_buf_16
 = 
NULL
;

1572 *
d©a_buf
 = 
NULL
;

1573 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

1574 
row
 = 
	`sy«_gë_image_rows
(
åue
);

1575 
d©a_∑ylﬂd
 = 0;

1576 
i
, 
j
, 
idx_limô
;

1577 
Áûuª_˙t
 = 0;

1578 
limô_mö_d©a
;

1579 
limô_max_d©a
;

1580 #ifde‡
SAVE_ERR_MSG


1581 
îr
[
MAX_ERR_STRING_LEN
];

1584 i‡(!
p_ªsu…_img
) {

1585 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1586 #ifde‡
SAVE_ERR_MSG


1587 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1588 
	`add_îr‹_msg
(
îr
);

1590 
ªtvÆ
 = -
EINVAL
;

1591 
exô
;

1593 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

1594 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1595 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1596 #ifde‡
SAVE_ERR_MSG


1597 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1598 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1599 
	`add_îr‹_msg
(
îr
);

1601 
ªtvÆ
 = -
EINVAL
;

1602 
exô
;

1604 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

1605 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

1606 
__func__
, 
size_limô_mö
, 
size_limô_max
);

1607 #ifde‡
SAVE_ERR_MSG


1608 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

1609 
	`add_îr‹_msg
(
îr
);

1611 
ªtvÆ
 = -
EINVAL
;

1612 
exô
;

1616 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_ADC_RANGE
);

1617 i‡–
ªtvÆ
 < 0) {

1618 #ifde‡
SAVE_ERR_MSG


1619 
	`•rötf
(
îr
, "%†îr‹: faûÅÿ≥rf‹mÖrodu˘i⁄_ã° comm™d TEST_ADC_RANGE\n", 
__func__
);

1620 
	`add_îr‹_msg
(
îr
);

1622 
ªtvÆ
 = -
EINVAL
;

1623  
ªtvÆ
;

1627 
d©a_∑ylﬂd
 = 
ªtvÆ
;

1628 
	`¥ötf_i
("%s info:ádcÑangeÅestÖid11 (row = %d, col= %d) (payload size = %d)\n",

1629 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

1632 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

1633 i‡(!
d©a_buf
) {

1634 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1635 #ifde‡
SAVE_ERR_MSG


1636 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1637 
	`add_îr‹_msg
(
îr
);

1639 
ªtvÆ
 = -
ENOMEM
;

1640 
exô
;

1643 
d©a_buf_16
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 * 
row
), ());

1644 i‡(!
d©a_buf_16
) {

1645 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

1646 #ifde‡
SAVE_ERR_MSG


1647 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

1648 
	`add_îr‹_msg
(
îr
);

1650 
ªtvÆ
 = -
ENOMEM
;

1651 
exô
;

1655 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

1656 i‡(
ªtvÆ
 < 0) {

1657 
ªtvÆ
 = -
EINVAL
;

1658 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1659 #ifde‡
SAVE_ERR_MSG


1660 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1661 
	`add_îr‹_msg
(
îr
);

1663 
exô
;

1668 
ªtvÆ
 = 
	`tcm_ª‹dî_ã°_d©a_‰ame
(
d©a_buf
, 
d©a_buf_16
);

1669 i‡(
ªtvÆ
 < 0) {

1670 
ªtvÆ
 = -
EINVAL
;

1671 
	`¥ötf_e
("%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

1672 #ifde‡
SAVE_ERR_MSG


1673 
	`•rötf
(
îr
, "%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

1674 
	`add_îr‹_msg
(
îr
);

1676 
exô
;

1682 
idx_limô
 = 0;

1683 
i
 = 0; i < 
cﬁ
; i++) {

1684 
j
 = 0; j < 
row
; j++) {

1685 
d©a
 = 
d©a_buf_16
[
i
 * 
row
 + 
j
] ;

1686 
p_ªsu…_img
[
i
 * 
row
 + 
j
] = 
d©a
;

1689 i‡(
size_limô_mö
 =(
cﬁ
 * 
row
)) {

1690 
limô_mö_d©a
 = 
limô_mö
[
idx_limô
];

1693 
limô_mö_d©a
 = 
limô_mö
[0];

1696 i‡(
size_limô_max
 =(
cﬁ
 * 
row
)) {

1697 
limô_max_d©a
 = 
limô_max
[
idx_limô
];

1700 
limô_max_d©a
 = 
limô_max
[0];

1704 i‡(
d©a
 < 
limô_mö_d©a
) {

1705 
Áûuª_˙t
 += 1;

1706 
	`¥ötf_e
("%sÉrror: failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

1707 
__func__
, 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

1708 #ifde‡
SAVE_ERR_MSG


1709 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit min = %5d\n",

1710 
i
, 
j
, 
d©a
, 
limô_mö_d©a
);

1711 
	`add_îr‹_msg
(
îr
);

1715 i‡(
d©a
 > 
limô_max_d©a
) {

1716 
Áûuª_˙t
 += 1;

1717 
	`¥ötf_e
("%sÉrror: failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

1718 
__func__
, 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

1719 #ifde‡
SAVE_ERR_MSG


1720 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit max = %5d\n",

1721 
i
, 
j
, 
d©a
, 
limô_max_d©a
);

1722 
	`add_îr‹_msg
(
îr
);

1727 
idx_limô
 += 1;

1731 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1732 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1733 
exô
:

1734 if(
d©a_buf
)

1735 
	`‰ì
(
d©a_buf
);

1736 if(
d©a_buf_16
)

1737 
	`‰ì
(
d©a_buf_16
);

1739  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1740 
	}
}

1751 
	$tcm_do_ã°_abs_øwˇp_pid12
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1752 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

1754 
ªtvÆ
 = 0;

1755 *
p_d©a_öt
;

1756 *
d©a_buf_32
 = 
NULL
;

1757 *
d©a_buf
 = 
NULL
;

1758 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

1759 
row
 = 
	`sy«_gë_image_rows
(
åue
);

1760 
d©a_∑ylﬂd
 = 0;

1761 
i
;

1762 
Áûuª_˙t
 = 0;

1763 
limô_mö_d©a
;

1764 
limô_max_d©a
;

1765 #ifde‡
SAVE_ERR_MSG


1766 
îr
[
MAX_ERR_STRING_LEN
];

1769 i‡(!
p_ªsu…_img
) {

1770 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1771 #ifde‡
SAVE_ERR_MSG


1772 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1773 
	`add_îr‹_msg
(
îr
);

1775 
ªtvÆ
 = -
EINVAL
;

1776 
exô
;

1778 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

1779 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1780 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1781 #ifde‡
SAVE_ERR_MSG


1782 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1783 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1784 
	`add_îr‹_msg
(
îr
);

1786 
ªtvÆ
 = -
EINVAL
;

1787 
exô
;

1789 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

1790 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

1791 
__func__
, 
size_limô_mö
, 
size_limô_max
);

1792 #ifde‡
SAVE_ERR_MSG


1793 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

1794 
	`add_îr‹_msg
(
îr
);

1796 
ªtvÆ
 = -
EINVAL
;

1797 
exô
;

1801 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_ABS_RAW
);

1802 i‡–
ªtvÆ
 < 0) {

1803 #ifde‡
SAVE_ERR_MSG


1804 
	`•rötf
(
îr
, "%†îr‹: faûÅÿ≥rf‹mÖrodu˘i⁄_ã° comm™d TEST_ABS_RAW\n", 
__func__
);

1805 
	`add_îr‹_msg
(
îr
);

1807  
ªtvÆ
;

1811 
d©a_∑ylﬂd
 = 
ªtvÆ
;

1812 
	`¥ötf_i
("%s info:ábsÑaw capÅestÖid12 (row = %d, col = %d) (payload size = %d)\n",

1813 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

1816 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

1817 i‡(!
d©a_buf
) {

1818 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1819 #ifde‡
SAVE_ERR_MSG


1820 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1821 
	`add_îr‹_msg
(
îr
);

1823 
ªtvÆ
 = -
ENOMEM
;

1824 
exô
;

1827 
d©a_buf_32
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 + 
row
), ());

1828 i‡(!
d©a_buf_32
) {

1829 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_32\n", 
__func__
);

1830 #ifde‡
SAVE_ERR_MSG


1831 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_32\n", 
__func__
);

1832 
	`add_îr‹_msg
(
îr
);

1834 
ªtvÆ
 = -
ENOMEM
;

1835 
exô
;

1839 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

1840 i‡(
ªtvÆ
 < 0) {

1841 
ªtvÆ
 = -
EINVAL
;

1842 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1843 #ifde‡
SAVE_ERR_MSG


1844 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

1845 
	`add_îr‹_msg
(
îr
);

1847 
exô
;

1851 
p_d©a_öt
 = (*)&
d©a_buf
[0];

1852 
i
 = 0; i < 
cﬁ
 + 
row
; i++) {

1853 
d©a_buf_32
[
i
] = *
p_d©a_öt
;

1855 
p_d©a_öt
++;

1859 
i
 = 0; i < 
cﬁ
 + 
row
; i++) {

1860 
p_ªsu…_img
[
i
] = 
d©a_buf_32
[i] ;

1863 i‡(
size_limô_mö
 =(
cﬁ
 + 
row
)) {

1864 
limô_mö_d©a
 = 
limô_mö
[
i
];

1867 
limô_mö_d©a
 = 
limô_mö
[0];

1870 i‡(
size_limô_max
 =
cﬁ
 + 
row
) {

1871 
limô_max_d©a
 = 
limô_max
[
i
];

1874 
limô_max_d©a
 = 
limô_max
[0];

1878 i‡(
p_ªsu…_img
[
i
] < 
limô_mö_d©a
) {

1879 
Áûuª_˙t
 += 1;

1880 
	`¥ötf_e
("%sÉrror: failát ch%2d, data = %5d,Üimit min = %5d\n",

1881 
__func__
, 
i
, 
p_ªsu…_img
[i], 
limô_mö_d©a
);

1882 #ifde‡
SAVE_ERR_MSG


1883 
	`•rötf
(
îr
, "failát ch%2d, data = %5d,Üimit min = %5d\n",

1884 
i
, 
p_ªsu…_img
[i], 
limô_mö_d©a
);

1885 
	`add_îr‹_msg
(
îr
);

1889 i‡(
p_ªsu…_img
[
i
] > 
limô_max_d©a
) {

1890 
Áûuª_˙t
 += 1;

1891 
	`¥ötf_e
("%sÉrror: failát ch%2d, data = %5d,Üimit max = %5d\n",

1892 
__func__
, 
i
, 
p_ªsu…_img
[i], 
limô_max_d©a
);

1893 #ifde‡
SAVE_ERR_MSG


1894 
	`•rötf
(
îr
, "failát ch%2d, data = %5d,Üimit max = %5d\n",

1895 
i
, 
p_ªsu…_img
[i], 
limô_max_d©a
);

1896 
	`add_îr‹_msg
(
îr
);

1902 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

1903 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

1904 
exô
:

1905 if(
d©a_buf
)

1906 
	`‰ì
(
d©a_buf
);

1907 if(
d©a_buf_32
)

1908 
	`‰ì
(
d©a_buf_32
);

1910  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

1911 
	}
}

1923 
	$tcm_do_ã°_hy_abs_no£_pid1d
(*
p_ªsu…_img
, 
ªsu…_img_cﬁ
, 
ªsu…_img_row
,

1924 *
limô_mö
, 
size_limô_mö
, *
limô_max
, 
size_limô_max
)

1926 
ªtvÆ
 = 0;

1927 *
p_d©a_16
;

1928 *
d©a_buf_16
 = 
NULL
;

1929 *
d©a_buf
 = 
NULL
;

1930 
cﬁ
 = 
	`sy«_gë_image_cﬁs
(
åue
);

1931 
row
 = 
	`sy«_gë_image_rows
(
åue
);

1932 
d©a_∑ylﬂd
 = 0;

1933 
i
;

1934 
Áûuª_˙t
 = 0;

1935 
limô_mö_d©a
;

1936 
limô_max_d©a
;

1937 #ifde‡
SAVE_ERR_MSG


1938 
îr
[
MAX_ERR_STRING_LEN
];

1941 i‡(!
p_ªsu…_img
) {

1942 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_img i†NULL\n", 
__func__
);

1943 #ifde‡
SAVE_ERR_MSG


1944 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_img i†NULL.\n", 
__func__
);

1945 
	`add_îr‹_msg
(
îr
);

1947 
ªtvÆ
 = -
EINVAL
;

1948 
exô
;

1950 i‡((
cﬁ
 !
ªsu…_img_cﬁ
Ë|| (
row
 !
ªsu…_img_row
)) {

1951 
	`¥ötf_e
("%sÉrror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1952 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1953 #ifde‡
SAVE_ERR_MSG


1954 
	`•rötf
(
îr
, "%s:Érror: invalidÖarameter (row,col) = (%d, %d),Ñesult = (%d, %d)\n",

1955 
__func__
, 
row
, 
cﬁ
, 
ªsu…_img_row
, 
ªsu…_img_cﬁ
);

1956 
	`add_îr‹_msg
(
îr
);

1958 
ªtvÆ
 = -
EINVAL
;

1959 
exô
;

1961 i‡((!
limô_mö
Ë|| (0 =
size_limô_mö
Ë|| (!
limô_max
Ë|| (0 =
size_limô_max
)) {

1962 
	`¥ötf_e
("%sÉrror: invalidÖarameter, sizeÜimit (min,max) = (%d, %d)\n",

1963 
__func__
, 
size_limô_mö
, 
size_limô_max
);

1964 #ifde‡
SAVE_ERR_MSG


1965 
	`•rötf
(
îr
, "%†îr‹: invÆidÖ¨amëî,Çÿã°Üimô i≈ut\n", 
__func__
);

1966 
	`add_îr‹_msg
(
îr
);

1968 
ªtvÆ
 = -
EINVAL
;

1969 
exô
;

1973 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_HYBRID_ABS_NOISE
);

1974 i‡–
ªtvÆ
 < 0) {

1975 #ifde‡
SAVE_ERR_MSG


1976 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerfromÖroduction_test command TEST_HYBRID_ABS_NOISE\n",

1977 
__func__
);

1978 
	`add_îr‹_msg
(
îr
);

1980  
ªtvÆ
;

1984 
d©a_∑ylﬂd
 = 
ªtvÆ
;

1985 
	`¥ötf_i
("%s info: hybridábsÇoiseÅestÖid1d (row = %d, col = %d) (payload size = %d)\n",

1986 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

1989 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

1990 i‡(!
d©a_buf
) {

1991 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1992 #ifde‡
SAVE_ERR_MSG


1993 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

1994 
	`add_îr‹_msg
(
îr
);

1996 
ªtvÆ
 = -
ENOMEM
;

1997 
exô
;

2000 
d©a_buf_16
 = 
	`ˇŒoc
((
size_t
)(
cﬁ
 + 
row
), ());

2001 i‡(!
d©a_buf_16
) {

2002 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

2003 #ifde‡
SAVE_ERR_MSG


2004 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf_16\n", 
__func__
);

2005 
	`add_îr‹_msg
(
îr
);

2007 
ªtvÆ
 = -
ENOMEM
;

2008 
exô
;

2012 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

2013 i‡(
ªtvÆ
 < 0) {

2014 
ªtvÆ
 = -
EINVAL
;

2015 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

2016 #ifde‡
SAVE_ERR_MSG


2017 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

2018 
	`add_îr‹_msg
(
îr
);

2020 
exô
;

2024 
p_d©a_16
 = (*)&
d©a_buf
[0];

2025 
i
 = 0; i < (
cﬁ
 + 
row
); i++) {

2026 
d©a_buf_16
[
i
] = *
p_d©a_16
;

2028 
p_d©a_16
++;

2032 
i
 = 0; i < (
cﬁ
 + 
row
); i++) {

2033 
p_ªsu…_img
[
i
] = 
d©a_buf_16
[i] ;

2036 i‡(
size_limô_mö
 =(
cﬁ
 + 
row
)) {

2037 
limô_mö_d©a
 = 
limô_mö
[
i
];

2040 
limô_mö_d©a
 = 
limô_mö
[0];

2043 i‡(
size_limô_max
 =
cﬁ
 + 
row
) {

2044 
limô_max_d©a
 = 
limô_max
[
i
];

2047 
limô_max_d©a
 = 
limô_max
[0];

2051 i‡(
d©a_buf_16
[
i
] < 
limô_mö_d©a
) {

2052 
Áûuª_˙t
 += 1;

2053 
	`¥ötf_e
("%†îr‹: faûáàch%2d, d©®%5d,Üimô mö = %5d\n", 
__func__
,

2054 
i
, 
d©a_buf_16
[i], 
limô_mö_d©a
);

2055 #ifde‡
SAVE_ERR_MSG


2056 
	`•rötf
(
îr
, "failát ch%2d, data = %5d,Üimit min = %5d\n",

2057 
i
, 
d©a_buf_16
[i], 
limô_mö_d©a
);

2058 
	`add_îr‹_msg
(
îr
);

2062 i‡(
d©a_buf_16
[
i
] > 
limô_max_d©a
) {

2063 
Áûuª_˙t
 += 1;

2064 
	`¥ötf_e
("%†îr‹: faûáàch%2d, d©®%5d,Üimô max = %5d\n", 
__func__
,

2065 
i
, 
d©a_buf_16
[i], 
limô_max_d©a
);

2066 #ifde‡
SAVE_ERR_MSG


2067 
	`•rötf
(
îr
, "failát ch%2d, data = %5d,Üimit max = %5d\n",

2068 
i
, 
d©a_buf_16
[i], 
limô_max_d©a
);

2069 
	`add_îr‹_msg
(
îr
);

2075 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

2076 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

2077 
exô
:

2078 if(
d©a_buf
)

2079 
	`‰ì
(
d©a_buf
);

2080 if(
d©a_buf_16
)

2081 
	`‰ì
(
d©a_buf_16
);

2083  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

2084 
	}
}

2097 
	$tcm_do_ã°_ex_high_ªsi°™˚_pid05
(*
p_ªsu…_tixñ
, *
p_ªsu…_rx
, *
p_ªsu…_tx
,

2098 *
p_ªf_‰ame
, 
cﬁ
, 
row
,

2099 
limô_tixñ
, 
limô_rxr€
, 
limô_txr€
)

2101 
ªtvÆ
 = 0;

2102 *
d©a_buf
 = 
NULL
;

2103 
d©a_∑ylﬂd
 = 0;

2104 
i
, 
j
;

2105 
Áûuª_˙t
 = 0;

2106 *
‰ame_dñè
 = 
NULL
;

2107 *
‰ame_ba£löe
 = 
NULL
;

2108 
tx
 = 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[0],

2109 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[1]);

2110 
rx
 = 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[0],

2111 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[1]);

2112 #ifde‡
SAVE_ERR_MSG


2113 
îr
[
MAX_ERR_STRING_LEN
];

2116 i‡(!
p_ªsu…_tixñ
) {

2117 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_tixñ i†NULL\n", 
__func__
);

2118 #ifde‡
SAVE_ERR_MSG


2119 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_tixñ i†NULL.\n", 
__func__
);

2120 
	`add_îr‹_msg
(
îr
);

2122 
ªtvÆ
 = -
EINVAL
;

2123 
exô
;

2125 i‡(!
p_ªsu…_rx
) {

2126 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_rx i†NULL\n", 
__func__
);

2127 #ifde‡
SAVE_ERR_MSG


2128 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_rx i†NULL.\n", 
__func__
);

2129 
	`add_îr‹_msg
(
îr
);

2131 
ªtvÆ
 = -
EINVAL
;

2132 
exô
;

2134 i‡(!
p_ªsu…_tx
) {

2135 
	`¥ötf_e
("%†îr‹:Ö_ªsu…_tx i†NULL\n", 
__func__
);

2136 #ifde‡
SAVE_ERR_MSG


2137 
	`•rötf
(
îr
, "%†îr‹:Ö_ªsu…_tx i†NULL.\n", 
__func__
);

2138 
	`add_îr‹_msg
(
îr
);

2140 
ªtvÆ
 = -
EINVAL
;

2141 
exô
;

2143 i‡(!
p_ªf_‰ame
) {

2144 
	`¥ötf_e
("%†îr‹:Ö_ªf_‰amêi†NULL\n", 
__func__
);

2145 #ifde‡
SAVE_ERR_MSG


2146 
	`•rötf
(
îr
, "%†îr‹:Ö_ªf_‰amêi†NULL.\n", 
__func__
);

2147 
	`add_îr‹_msg
(
îr
);

2149 
ªtvÆ
 = -
EINVAL
;

2150 
exô
;

2154 
ªtvÆ
 = 
	`tcm_£nd_ã°_comm™d
(
TEST_FULLRAW
);

2155 i‡–
ªtvÆ
 < 0) {

2156 #ifde‡
SAVE_ERR_MSG


2157 
	`•rötf
(
îr
, "%sÉrror: failÅoÖerformÖroduction_test command TEST_FULLRAW\n",

2158 
__func__
);

2159 
	`add_îr‹_msg
(
îr
);

2161 
ªtvÆ
 = -
EINVAL
;

2162  
ªtvÆ
;

2166 
d©a_∑ylﬂd
 = 
ªtvÆ
;

2167 
	`¥ötf_i
("%s info: fullÑawÅestÖid05 (row = %d, col = %d) (payload size = %d)\n",

2168 
__func__
, 
row
, 
cﬁ
, 
d©a_∑ylﬂd
);

2171 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
d©a_∑ylﬂd
, ());

2172 i‡(!
d©a_buf
) {

2173 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

2174 #ifde‡
SAVE_ERR_MSG


2175 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

2176 
	`add_îr‹_msg
(
îr
);

2178 
ªtvÆ
 = -
ENOMEM
;

2179 
exô
;

2183 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
d©a_∑ylﬂd
);

2184 i‡(
ªtvÆ
 < 0) {

2185 
ªtvÆ
 = -
EINVAL
;

2186 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

2187 #ifde‡
SAVE_ERR_MSG


2188 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
d©a_∑ylﬂd
);

2189 
	`add_îr‹_msg
(
îr
);

2191 
exô
;

2194 
‰ame_ba£löe
 = 
	`ˇŒoc
((
size_t
)(
row
 * 
cﬁ
), ());

2195 i‡(!
‰ame_ba£löe
) {

2196 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ føme_ba£löe\n", 
__func__
);

2197 #ifde‡
SAVE_ERR_MSG


2198 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ føme_ba£löe\n", 
__func__
);

2199 
	`add_îr‹_msg
(
îr
);

2201 
ªtvÆ
 = -
ENOMEM
;

2202 
exô
;

2205 
‰ame_dñè
 = 
	`ˇŒoc
((
size_t
)(
row
 * 
cﬁ
), ());

2206 i‡(!
‰ame_dñè
) {

2207 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ føme_dñè\n", 
__func__
);

2208 #ifde‡
SAVE_ERR_MSG


2209 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ føme_dñè\n", 
__func__
);

2210 
	`add_îr‹_msg
(
îr
);

2212 
ªtvÆ
 = -
ENOMEM
;

2213 
exô
;

2217 
ªtvÆ
 = 
	`tcm_ª‹dî_ã°_d©a_‰ame
(
d©a_buf
, (*)
‰ame_ba£löe
);

2218 i‡(
ªtvÆ
 < 0) {

2219 
ªtvÆ
 = -
EINVAL
;

2220 
	`¥ötf_e
("%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

2221 #ifde‡
SAVE_ERR_MSG


2222 
	`•rötf
(
îr
, "%†îr‹: faûÅÿª‹dîÅhêã°ög d©a\n", 
__func__
);

2223 
	`add_îr‹_msg
(
îr
);

2225 
exô
;

2229 
i
 = 0; i < (
row
 * 
cﬁ
); i++) {

2230 
‰ame_dñè
[
i
] = 
‰ame_ba£löe
[i] - 
p_ªf_‰ame
[i];

2234 
	`exãnded_high_ªsi°™˚_ã°
(()
rx
, ()
tx
,

2235 
‰ame_dñè
, 
‰ame_ba£löe
,

2236 
p_ªf_‰ame
, 
p_ªsu…_rx
, 
p_ªsu…_tx
, 
p_ªsu…_tixñ
);

2239 
i
 = 0; i < 
cﬁ
; i++) {

2240 
j
 = 0; j < 
row
; j++) {

2242 if–
p_ªsu…_tixñ
[
i
 * 
row
 + 
j
] <
limô_tixñ
) {

2244 
Áûuª_˙t
 += 1;

2245 
	`¥ötf_e
("%sÉrror: failát (%d, %d) data = %5d,Üimit_tixel = %5d\n",

2246 
__func__
, 
i
, 
j
, 
p_ªsu…_tixñ
[i* 
row
 + j], 
limô_tixñ
);

2247 #ifde‡
SAVE_ERR_MSG


2248 
	`•rötf
(
îr
, "failát (%2d, %2d) data = %5d,Üimit_tixel = %5d\n",

2249 
i
, 
j
, 
p_ªsu…_tixñ
[ò* 
row
 + j], 
limô_tixñ
);

2250 
	`add_îr‹_msg
(
îr
);

2256 
i
 = 0; i < 
tx
; i++){

2257 if(
p_ªsu…_tx
[
i
] >
limô_txr€
){

2258 
Áûuª_˙t
 += 1;

2259 
	`¥ötf_e
("%sÉrror: failát (tx %d) data = %5d,Üimit_txroe = %5d\n",

2260 
__func__
, 
i
, 
p_ªsu…_tx
[i], 
limô_txr€
);

2261 #ifde‡
SAVE_ERR_MSG


2262 
	`•rötf
(
îr
, "failát (tx %2d) data = %5d,Üimit_txroe = %5d\n",

2263 
i
, 
p_ªsu…_tx
[i], 
limô_txr€
);

2264 
	`add_îr‹_msg
(
îr
);

2268 
i
 = 0; i < 
rx
; i++) {

2269 i‡(
p_ªsu…_rx
[
i
] >
limô_rxr€
) {

2270 
Áûuª_˙t
 += 1;

2271 
	`¥ötf_e
("%sÉrror: failát (rx %d) data = %5d,Üimit_rxroe = %5d\n",

2272 
__func__
, 
i
, 
p_ªsu…_rx
[i], 
limô_rxr€
);

2273 #ifde‡
SAVE_ERR_MSG


2274 
	`•rötf
(
îr
, "failát (rx %2d) data = %5d,Üimit_rxroe = %5d\n",

2275 
i
, 
p_ªsu…_rx
[i], 
limô_rxr€
);

2276 
	`add_îr‹_msg
(
îr
);

2282 
	`¥ötf_i
("%s info: %s (fail_cnt = %d)\n",

2283 
__func__
, (
Áûuª_˙t
 == 0)?"pass":"fail", failure_cnt);

2284 
exô
:

2285 if(
d©a_buf
)

2286 
	`‰ì
(
d©a_buf
);

2287 if(
‰ame_ba£löe
)

2288 
	`‰ì
(
‰ame_ba£löe
);

2289 if(
‰ame_dñè
)

2290 
	`‰ì
(
‰ame_dñè
);

2292  (
ªtvÆ
 < 0)?ÑëvÆ : 
Áûuª_˙t
;

2293 
	}
}

	@cpp/jni/tcm_report_access.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

33 
	~<uni°d.h
>

35 
	~"sy«_dev_m™agî.h
"

36 
	~"tcm_c⁄åﬁ.h
"

38 #ifde‡
SAVE_ERR_MSG


39 
	~"îr_msg_˘æ.h
"

50 
	$tcm_íabÀ_ªp‹t
(
boﬁ
 
íabÀ
, 
tcm_ªp‹t_code
 
ªp‹t_code
)

52 
ªtvÆ
 = 0;

53 
comm™d_∑ckë
[4] = {0, 0, 0, 0};

54 #ifde‡
SAVE_ERR_MSG


55 
îr
[
MAX_ERR_STRING_LEN
];

60 i‡(
íabÀ
) {

61 
comm™d_∑ckë
[0] = 
CMD_ENABLE_REPORT
;

64 
comm™d_∑ckë
[0] = 
CMD_DISABLE_REPORT
;

68 
comm™d_∑ckë
[1] = 0x01;

69 
comm™d_∑ckë
[2] = 0x00;

72 
comm™d_∑ckë
[3] = 
ªp‹t_code
;

75 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
comm™d_∑ckë
, (command_packet));

76 i‡(
ªtvÆ
 < 0) {

77 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, %†0x%x 0x%x 0x%x\n", 
__func__
,

78 (
comm™d_∑ckë
[0] =
CMD_ENABLE_REPORT
)?"CMD_ENABLE_REPORT":"CMD_DISABLE_REPORT",

79 
comm™d_∑ckë
[1], command_packet[2], command_packet[3]);

80 #ifde‡
SAVE_ERR_MSG


81 
	`•rötf
(
îr
, "%s:Éº‹: faûÅÿ£nd comm™d, %†0x%x 0x%x 0x%x\n", 
__func__
,

82 (
comm™d_∑ckë
[0] =
CMD_ENABLE_REPORT
)?"CMD_ENABLE_REPORT":"CMD_DISABLE_REPORT",

83 
comm™d_∑ckë
[1], command_packet[2], command_packet[3]);

84 
	`add_îr‹_msg
(
îr
);

86 
ªtvÆ
 = -
EINVAL
;

87  
ªtvÆ
;

91 
ªtvÆ
 = 
	`tcm_waô_f‹_comm™d_ªady
();

92 i‡–
ªtvÆ
 < 0) {

93 
	`¥ötf_e
("%sÉrror: failÅo getÅheÑesponse of %s_report (report:0x%x)\n",

94 
__func__
, (
íabÀ
)?"íabÀ":"dißbÀ", ()
ªp‹t_code
);

95 #ifde‡
SAVE_ERR_MSG


96 
	`•rötf
(
îr
, "%s:Érror: failÅo getÅheÑesponse of %s_report (report:0x%x)\n",

97 
__func__
, (
íabÀ
)?"íabÀ":"dißbÀ", ()
ªp‹t_code
);

98 
	`add_îr‹_msg
(
îr
);

100 
ªtvÆ
 = -
EIO
;

101  
ªtvÆ
;

103 
	`¥ötf_i
("%s info: %s is completed. (report:0x%x)",

104 
__func__
, (
íabÀ
)?"CMD_ENABLE_REPORT":"CMD_DISABLE_REPORT", ()
ªp‹t_code
);

106  
ªtvÆ
;

107 
	}
}

118 
	$tcm_ªad_ªp‹t_‰ame
(
ty≥
, *
p_out
, 
size_out
, 
boﬁ
 
out_ö_œndsˇ≥
)

120 
ªtvÆ
 = 0;

121 *
p_d©a_16
;

122 *
p_u_d©a_16
;

123 *
d©a_buf
 = 
NULL
;

124 
rows
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[0] |

125 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_rows
[1] << 8);

126 
cﬁs
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[0] |

127 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_image_cﬁs
[1] << 8);

128 
buâ⁄s
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_buâ⁄s
[0] |

129 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_buâ⁄s
[1] << 8);

130 
has_hybrid
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
has_hybrid_d©a
[0] |

131 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
has_hybrid_d©a
[1] << 8);

132 
f‹˚_ñecs
 = (
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_f‹˚_ñecs
[0] |

133 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
num_of_f‹˚_ñecs
[1] << 8);

134 
ªp‹t_size
;

135 
ªp‹t_timeout
 = 0;

136 
ªp‹t_∑ylﬂd
 = 0;

137 
i
, 
j
, 
off£t
;

138 #ifde‡
SAVE_ERR_MSG


139 
îr
[
MAX_ERR_STRING_LEN
];

142 i‡(!
p_out
) {

143 
	`¥ötf_e
("%s:Ö_ouài†NULL\n", 
__func__
);

144 #ifde‡
SAVE_ERR_MSG


145 
	`•rötf
(
îr
, "%s:Ö_ouài†NULL.\n", 
__func__
);

146 
	`add_îr‹_msg
(
îr
);

148 
ªtvÆ
 = -
EINVAL
;

149 
exô
;

152 i‡(
has_hybrid
) {

153 
ªp‹t_size
 = (2 * 
cﬁs
 * 
rows
Ë+ 2 * (cﬁ†+Ñow†+ 
buâ⁄s
 + 
f‹˚_ñecs
);

156 
ªp‹t_size
 = (2 * 
cﬁs
 * 
rows
);

159 i‡(
ªp‹t_size
 > (
size_out
 * ())) {

160 
	`¥ötf_i
("%s warning: size ofÑeport image is mismatching.Ñeport_size = %d, size_out = %d\n",

161 
__func__
, 
ªp‹t_size
, 
size_out
);

165 
d©a_buf
 = 
	`ˇŒoc
((
size_t
)
ªp‹t_size
, ());

166 i‡(!
d©a_buf
) {

167 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

168 #ifde‡
SAVE_ERR_MSG


169 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹ d©a_buf\n", 
__func__
);

170 
	`add_îr‹_msg
(
îr
);

172 
ªtvÆ
 = -
ENOMEM
;

173 
exô
;

178 
	`u¶ìp
(
TCM_POLLING_DELAY_MS
 * 1000);

180 
ªtvÆ
 = 
	`tcm_ªad_mesßge
(
d©a_buf
, (
tcm_mesßge_hódî
));

181 i‡(
ªtvÆ
 < 0) {

182 
	`¥ötf_e
("%†îr‹: faûÅÿªadÅcm mesßgêhódî\n", 
__func__
);

183 #ifde‡
SAVE_ERR_MSG


184 
	`•rötf
(
îr
, "%†îr‹: faûÅÿªadÅcm mesßgêhódî\n", 
__func__
);

185 
	`add_îr‹_msg
(
îr
);

187 
ªtvÆ
 = -
EINVAL
;

188 
exô
;

190 i‡–0xA5 =
d©a_buf
[0]) {

191 
ªp‹t_∑ylﬂd
 = 
d©a_buf
[2] | data_buf[3] << 8;

195 i‡–
ty≥
 =
d©a_buf
[1]) {

199 i‡(
TCM_REPORT_TOUCH
 =
d©a_buf
[1]) {

200 
	`tcm_gë_touch_ªp‹t
(
ªp‹t_∑ylﬂd
);

204 
	`tcm_dr›_∑ckage
(
ªp‹t_∑ylﬂd
);

207 
ªp‹t_timeout
++ ;

208 } 
ªp‹t_timeout
 < 
TCM_POLLING_TIMOUT
);

210 i‡(
ªp‹t_timeout
 =
TCM_POLLING_TIMOUT
) {

211 
ªtvÆ
 = -
EINVAL
;

212 
	`¥ötf_e
("%†îr‹:ÑódÑï‹àtimeouà—y≥: 0x%x)\n", 
__func__
, 
ty≥
);

213 #ifde‡
SAVE_ERR_MSG


214 
	`•rötf
(
îr
, "%†îr‹:ÑódÑï‹àtimeouà—y≥: 0x%x)\n", 
__func__
, 
ty≥
);

215 
	`add_îr‹_msg
(
îr
);

217 
exô
;

220 
	`¥ötf_i
("%†öfo:Ñï‹à0x%x (∑ylﬂd sizê%d)\n", 
__func__
, 
ty≥
, 
ªp‹t_∑ylﬂd
);

223 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
d©a_buf
, 
ªp‹t_∑ylﬂd
);

224 i‡(
ªtvÆ
 < 0) {

225 
ªtvÆ
 = -
EINVAL
;

226 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
ªp‹t_∑ylﬂd
);

227 #ifde‡
SAVE_ERR_MSG


228 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
ªp‹t_∑ylﬂd
);

229 
	`add_îr‹_msg
(
îr
);

231 
exô
;

250 
p_d©a_16
 = (*)&
d©a_buf
[0];

251 
i
 = 0; i < 
rows
; i++) {

252 
j
 = 0; j < 
cﬁs
; j++) {

254 i‡(
out_ö_œndsˇ≥
) {

255 i‡(
cﬁs
 > 
rows
)

256 
off£t
 = 
i
*
cﬁs
 + 
j
;

258 
off£t
 = 
j
*
rows
 + 
i
;

261 
off£t
 = 
i
*
cﬁs
 + 
j
;

263 
p_out
[
off£t
] = *
p_d©a_16
;

265 
p_d©a_16
++;

269 
off£t
 = 
rows
 * 
cﬁs
;

270 i‡(
has_hybrid
 && (
size_out
 > 
off£t
) ) {

272 
j
 = ()(
ªp‹t_∑ylﬂd
/()Ë- 
off£t
;

274 i‡(
ty≥
 =
TCM_REPORT_RAW
) {

275 
p_u_d©a_16
 = (*)
p_d©a_16
;

277 
i
 = 0; i < 
j
; i++) {

278 
p_out
[
off£t
 + 
i
] = *
p_u_d©a_16
;

280 
p_u_d©a_16
++;

284 
i
 = 0; i < 
j
; i++) {

285 
p_out
[
off£t
 + 
i
] = *
p_d©a_16
;

287 
p_d©a_16
++;

293 
exô
:

294 if(
d©a_buf
)

295 
	`‰ì
(
d©a_buf
);

297  
ªtvÆ
;

298 
	}
}

	@cpp/jni/tcm_touch_data.c

29 
	~<î∫o.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

33 
	~<uni°d.h
>

35 
	~"sy«_dev_m™agî.h
"

36 
	~"tcm_c⁄åﬁ.h
"

38 #ifde‡
SAVE_ERR_MSG


39 
	~"îr_msg_˘æ.h
"

42 
	#POLLING_TOUCH_REPORT_CNT
 50

	)

43 
	#POLLING_TOUCH_REPORT_DELAY_MS
 10

	)

45 
	etouch_ªp‹t_code
 {

46 
	mTOUCH_END
 = 0,

47 
	mTOUCH_FOREACH_ACTIVE_OBJECT
,

48 
	mTOUCH_FOREACH_OBJECT
,

49 
	mTOUCH_FOREACH_END
,

50 
	mTOUCH_PAD_TO_NEXT_BYTE
,

51 
	mTOUCH_TIMESTAMP
,

52 
	mTOUCH_OBJECT_N_INDEX
,

53 
	mTOUCH_OBJECT_N_CLASSIFICATION
,

54 
	mTOUCH_OBJECT_N_X_POSITION
,

55 
	mTOUCH_OBJECT_N_Y_POSITION
,

56 
	mTOUCH_OBJECT_N_Z
,

57 
	mTOUCH_OBJECT_N_X_WIDTH
,

58 
	mTOUCH_OBJECT_N_Y_WIDTH
,

59 
	mTOUCH_OBJECT_N_TX_POSITION_TIXELS
,

60 
	mTOUCH_OBJECT_N_RX_POSITION_TIXELS
,

61 
	mTOUCH_0D_BUTTONS_STATE
,

62 
	mTOUCH_GESTURE_ID
,

63 
	mTOUCH_FRAME_RATE
,

64 
	mTOUCH_POWER_IM
,

65 
	mTOUCH_CID_IM
,

66 
	mTOUCH_RAIL_IM
,

67 
	mTOUCH_CID_VARIANCE_IM
,

68 
	mTOUCH_NSM_FREQUENCY
,

69 
	mTOUCH_NSM_STATE
,

70 
	mTOUCH_NUM_OF_ACTIVE_OBJECTS
,

71 
	mTOUCH_NUM_OF_CPU_CYCLES_USED_SINCE_LAST_FRAME
,

72 
	mTOUCH_FACE_DETECT
,

73 
	mTOUCH_GESTURE_DATA
,

74 
	mTOUCH_OBJECT_N_FORCE
,

75 
	mTOUCH_TUNING_GAUSSIAN_WIDTHS
 = 0x80,

76 
	mTOUCH_TUNING_SMALL_OBJECT_PARAMS
,

77 
	mTOUCH_TUNING_0D_BUTTONS_VARIANCE
,

78 
	mTOUCH_REPORT_OBJECT_N_FORCE
 = 0xc9,

89 
	$tcm_gë_touch_c⁄fig
()

91 
ªtvÆ
 = 0;

92 
comm™d_∑ckë
[3] = {0, 0, 0};

93 #ifde‡
SAVE_ERR_MSG


94 
îr
[
MAX_ERR_STRING_LEN
];

98 
comm™d_∑ckë
[0] = 
CMD_GET_TOUCH_REPORT_CONFIG
;

101 
comm™d_∑ckë
[1] = 0x00;

102 
comm™d_∑ckë
[2] = 0x00;

105 
ªtvÆ
 = 
	`tcm_wrôe_mesßge
(
comm™d_∑ckë
, (command_packet));

106 i‡(
ªtvÆ
 < 0) {

107 
	`¥ötf_e
("%†îr‹: faûÅÿ£nd comm™d, GET_TOUCH_REPORT_CONFIG 0x%x 0x%x\n", 
__func__
,

108 
comm™d_∑ckë
[1], command_packet[2]);

109 #ifde‡
SAVE_ERR_MSG


110 
	`•rötf
(
îr
, "%s:Éº‹: faûÅÿ£nd comm™d, GET_TOUCH_REPORT_CONFIG 0x%x 0x%x\n", 
__func__
,

111 
comm™d_∑ckë
[1], command_packet[2]);

112 
	`add_îr‹_msg
(
îr
);

114 
ªtvÆ
 = -
EINVAL
;

115  
ªtvÆ
;

119 
ªtvÆ
 = 
	`tcm_waô_f‹_comm™d_ªady
();

120 i‡–
ªtvÆ
 < 0) {

121 
	`¥ötf_e
("%†îr‹: faûÅÿGET_TOUCH_REPORT_CONFIG\n", 
__func__
);

122 #ifde‡
SAVE_ERR_MSG


123 
	`•rötf
(
îr
, "%s:Éº‹: faûÅÿGET_TOUCH_REPORT_CONFIG\n", 
__func__
);

124 
	`add_îr‹_msg
(
îr
);

126 
ªtvÆ
 = -
EIO
;

127  
ªtvÆ
;

130 i‡(
ªtvÆ
 > 
TCM_TOUCH_CONFIG_SIZE
) {

131 
	`¥ötf_e
("%sÉrror:Åouch config size (%d) is out of TCM_TOUCH_CONFIG_SIZE (%d)\n",

132 
__func__
, 
ªtvÆ
, 
TCM_TOUCH_CONFIG_SIZE
);

133 #ifde‡
SAVE_ERR_MSG


134 
	`•rötf
(
îr
, "%s:Éº‹: faûÅÿGET_TOUCH_REPORT_CONFIG\n", 
__func__
);

135 
	`add_îr‹_msg
(
îr
);

137 
ªtvÆ
 = -
EIO
;

138 
	`tcm_dr›_∑ckage
(
ªtvÆ
);

139  
ªtvÆ
;

143 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
g_tcm_h™dÀr
.
touch_c⁄fig
,Ñetval);

144 i‡(
ªtvÆ
 < 0) {

145 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
ªtvÆ
);

146 #ifde‡
SAVE_ERR_MSG


147 
	`•rötf
(
îr
, "%s: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
ªtvÆ
);

148 
	`add_îr‹_msg
(
îr
);

150 
ªtvÆ
 = -
EIO
;

151  
ªtvÆ
;

154 
	`¥ötf_i
("%†öfo: GET_TOUCH_REPORT_CONFIG i†com∂ëed. (∑ylﬂd = %d)", 
__func__
, 
ªtvÆ
);

156 
g_tcm_h™dÀr
.
size_of_fögî_ªp‹t
 = 0;

158  
ªtvÆ
;

159 
	}
}

169 
	$tcm_gë_d©a_‰om_ªp‹t
(*
íåy
, 
size
,

170 
off£t
, 
bôs
, *
d©a
)

172 
mask
;

173 
byã_d©a
;

174 
ouçut_d©a
;

175 
bô_off£t
;

176 
byã_off£t
;

177 
d©a_bôs
;

178 
avaûabÀ_bôs
;

179 
ªmaöög_bôs
;

181 i‡(
bôs
 == 0 || bits > 32) {

182 
	`¥ötf_e
("%†îr‹: invÆidÇumbî o‡bôs\n", 
__func__
);

183  -
EINVAL
;

186 i‡(
off£t
 + 
bôs
 > 
size
 * 8) {

187 *
d©a
 = 0;

191 
ouçut_d©a
 = 0;

192 
ªmaöög_bôs
 = 
bôs
;

194 
bô_off£t
 = 
off£t
 % 8;

195 
byã_off£t
 = 
off£t
 / 8;

197 
ªmaöög_bôs
) {

198 
byã_d©a
 = 
íåy
[
byã_off£t
];

199 
byã_d©a
 >>
bô_off£t
;

201 
avaûabÀ_bôs
 = 8 - 
bô_off£t
;

202 
d©a_bôs
 = 
	`MIN
(
avaûabÀ_bôs
, 
ªmaöög_bôs
);

203 
mask
 = (Ë0xf‡>> (8 - 
d©a_bôs
);

205 
byã_d©a
 &
mask
;

207 
ouçut_d©a
 |
byã_d©a
 << (
bôs
 - 
ªmaöög_bôs
);

209 
bô_off£t
 = 0;

210 
byã_off£t
 += 1;

211 
ªmaöög_bôs
 -
d©a_bôs
;

214 *
d©a
 = 
ouçut_d©a
;

217 
	}
}

227 
	$tcm_∑r£_touch_ªp‹t
(*
íåy
, 
size
)

229 
ªtvÆ
 = 0;

230 
boﬁ
 
a˘ive_⁄ly
 = 
Ál£
;

231 
boﬁ
 
num_of_a˘ive_obje˘s
;

232 
code
;

233 
idx
;

234 
obj
 = 0;

235 
√xt
 = 0;

236 
d©a
;

237 
bôs
;

238 
off£t
;

239 
obje˘s
;

240 
a˘ive_obje˘s
 = 0;

241 
íd_of_f‹óch
;

242 c⁄° 
max_ªp‹ãd_obj
 = 
	`c⁄vît_uc_to_sh‹t
(
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
max_obje˘s
[0],

243 
g_tcm_h™dÀr
.
≠p_öfo_ªp‹t
.
max_obje˘s
[1]);

245 
num_of_a˘ive_obje˘s
 = 
Ál£
;

247 
idx
 = 0;

248 
off£t
 = 0;

249 
obje˘s
 = 0;

250 
idx
 < 
TCM_TOUCH_CONFIG_SIZE
) {

251 
code
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

252 
code
) {

253 
TOUCH_END
:

254 
exô
;

255 
TOUCH_FOREACH_ACTIVE_OBJECT
:

256 
obj
 = 0;

257 
√xt
 = 
idx
;

258 
a˘ive_⁄ly
 = 
åue
;

260 
TOUCH_FOREACH_OBJECT
:

261 
obj
 = 0;

262 
√xt
 = 
idx
;

263 
a˘ive_⁄ly
 = 
Ál£
;

265 
TOUCH_FOREACH_END
:

266 
íd_of_f‹óch
 = 
idx
;

267 i‡(
a˘ive_⁄ly
) {

268 i‡(
num_of_a˘ive_obje˘s
) {

269 
obje˘s
++;

270 i‡(
obje˘s
 < 
a˘ive_obje˘s
)

271 
idx
 = 
√xt
;

272 } i‡(
off£t
 < 
size
 * 8) {

273 
idx
 = 
√xt
;

276 
obj
++;

277 i‡(
obj
 < 
max_ªp‹ãd_obj
)

278 
idx
 = 
√xt
;

281 
TOUCH_PAD_TO_NEXT_BYTE
:

282 
off£t
 = (offset + 8 - 1) / 8 * 8;

284 
TOUCH_TIMESTAMP
:

285 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

286 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

287 i‡(
ªtvÆ
 < 0) {

288 
	`¥ötf_e
("%†îr‹: faûÅÿgëÅime°amp\n", 
__func__
);

289 
exô
;

292 
off£t
 +
bôs
;

294 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
time°amp
 = 
d©a
;

296 
TOUCH_OBJECT_N_INDEX
:

297 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

298 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

299 i‡(
ªtvÆ
 < 0) {

300 
	`¥ötf_e
("%†îr‹: faûÅÿgë obje˘ index\n", 
__func__
);

301 
exô
;

304 
off£t
 +
bôs
;

306 
g_tcm_h™dÀr
.
cuºít_fögî_idx
 = 
d©a
;

308 
TOUCH_OBJECT_N_CLASSIFICATION
:

309 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

310 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

311 i‡(
ªtvÆ
 < 0) {

312 
	`¥ötf_e
("%†îr‹: faûÅÿgë obje˘ cœssifiˇti⁄\n", 
__func__
);

313 
exô
;

316 
off£t
 +
bôs
;

318 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
˛assifiˇti⁄
 = 
d©a
;

320 
TOUCH_OBJECT_N_X_POSITION
:

321 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

322 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

323 i‡(
ªtvÆ
 < 0) {

324 
	`¥ötf_e
("%†îr‹: faûÅÿgë obje˘ xÖosôi⁄\n", 
__func__
);

325 
exô
;

328 
off£t
 +
bôs
;

330 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
x
 = 
d©a
;

332 
TOUCH_OBJECT_N_Y_POSITION
:

333 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

334 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

335 i‡(
ªtvÆ
 < 0) {

336 
	`¥ötf_e
("%†îr‹: faûÅÿgë obje˘ yÖosôi⁄\n", 
__func__
);

337 
exô
;

340 
off£t
 +
bôs
;

342 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
y
 = 
d©a
;

344 
TOUCH_OBJECT_N_Z
:

345 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

346 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

347 i‡(
ªtvÆ
 < 0) {

348 
	`¥ötf_e
("%†îr‹: faûÅÿgë obje˘ z\n", 
__func__
);

349 
exô
;

352 
off£t
 +
bôs
;

354 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
z
 = 
d©a
;

356 
TOUCH_OBJECT_N_X_WIDTH
:

357 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

358 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

359 i‡(
ªtvÆ
 < 0) {

360 
	`¥ötf_e
("%†îr‹: faûÅÿgë obje˘ x width\n", 
__func__
);

361 
exô
;

364 
off£t
 +
bôs
;

366 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
x_w
 = 
d©a
;

368 
TOUCH_OBJECT_N_Y_WIDTH
:

369 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

370 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

371 i‡(
ªtvÆ
 < 0) {

372 
	`¥ötf_e
("%†îr‹: faûÅÿgë obje˘ y width\n", 
__func__
);

373 
exô
;

376 
off£t
 +
bôs
;

378 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
y_w
 = 
d©a
;

380 
TOUCH_OBJECT_N_TX_POSITION_TIXELS
:

381 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

382 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

383 i‡(
ªtvÆ
 < 0) {

384 
	`¥ötf_e
("%†îr‹: faûÅÿgë obje˘ÅxÖosôi⁄\n", 
__func__
);

385 
exô
;

388 
off£t
 +
bôs
;

390 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
tx_pos
 = 
d©a
;

392 
TOUCH_OBJECT_N_RX_POSITION_TIXELS
:

393 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

394 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

395 i‡(
ªtvÆ
 < 0) {

396 
	`¥ötf_e
("%†îr‹: faûÅÿgë obje˘ÑxÖosôi⁄\n", 
__func__
);

397 
exô
;

400 
off£t
 +
bôs
;

402 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
rx_pos
 = 
d©a
;

404 
TOUCH_0D_BUTTONS_STATE
:

405 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

406 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

407 i‡(
ªtvÆ
 < 0) {

408 
	`¥ötf_e
("%†îr‹: faûÅÿgë 0D buâ⁄†°©e\n", 
__func__
);

409 
exô
;

412 
off£t
 +
bôs
;

414 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
od
 = 
d©a
;

416 
TOUCH_FRAME_RATE
:

417 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

418 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

419 i‡(
ªtvÆ
 < 0) {

420 
	`¥ötf_e
("%†îr‹: faûÅÿgë fømêøã\n", 
__func__
);

421 
exô
;

424 
off£t
 +
bôs
;

426 
TOUCH_POWER_IM
:

427 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

428 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

429 i‡(
ªtvÆ
 < 0) {

430 
	`¥ötf_e
("%†îr‹: faûÅÿgëÖowî IM\n", 
__func__
);

431 
exô
;

434 
off£t
 +
bôs
;

436 
TOUCH_CID_IM
:

437 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

438 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

439 i‡(
ªtvÆ
 < 0) {

440 
	`¥ötf_e
("%†îr‹: faûÅÿgë CID IM\n", 
__func__
);

441 
exô
;

444 
off£t
 +
bôs
;

446 
TOUCH_RAIL_IM
:

447 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

448 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

449 i‡(
ªtvÆ
 < 0) {

450 
	`¥ötf_e
("%†îr‹: faûÅÿgëÑaû IM\n", 
__func__
);

451 
exô
;

454 
off£t
 +
bôs
;

456 
TOUCH_CID_VARIANCE_IM
:

457 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

458 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

459 i‡(
ªtvÆ
 < 0) {

460 
	`¥ötf_e
("%†îr‹: faûÅÿgë CID v¨ün˚ IM\n", 
__func__
);

461 
exô
;

464 
off£t
 +
bôs
;

466 
TOUCH_NSM_FREQUENCY
:

467 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

468 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

469 i‡(
ªtvÆ
 < 0) {

470 
	`¥ötf_e
("%†îr‹: faûÅÿgë NSM fªquícy\n", 
__func__
);

471 
exô
;

474 
off£t
 +
bôs
;

476 
TOUCH_NSM_STATE
:

477 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

478 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

479 i‡(
ªtvÆ
 < 0) {

480 
	`¥ötf_e
("%†îr‹: faûÅÿgë NSM sèã\n", 
__func__
);

481 
exô
;

484 
off£t
 +
bôs
;

486 
TOUCH_NUM_OF_ACTIVE_OBJECTS
:

487 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

488 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

489 i‡(
ªtvÆ
 < 0) {

490 
	`¥ötf_e
("%†îr‹: faûÅÿgëÇumbî o‡a˘ivêobje˘s\n", 
__func__
);

491 
exô
;

494 
a˘ive_obje˘s
 = 
d©a
;

495 
num_of_a˘ive_obje˘s
 = 
åue
;

496 
off£t
 +
bôs
;

497 i‡(
a˘ive_obje˘s
 == 0)

498 
idx
 = 
íd_of_f‹óch
;

500 
TOUCH_NUM_OF_CPU_CYCLES_USED_SINCE_LAST_FRAME
:

501 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

502 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

503 i‡(
ªtvÆ
 < 0) {

504 
	`¥ötf_e
("%sÉrror: failÅo getÇumber of CPU cycles sinceÜast frame\n",

505 
__func__
);

506 
exô
;

509 
off£t
 +
bôs
;

511 
TOUCH_TUNING_GAUSSIAN_WIDTHS
:

512 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

513 
off£t
 +
bôs
;

515 
TOUCH_TUNING_SMALL_OBJECT_PARAMS
:

516 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

517 
off£t
 +
bôs
;

519 
TOUCH_TUNING_0D_BUTTONS_VARIANCE
:

520 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

521 
off£t
 +
bôs
;

523 
TOUCH_REPORT_OBJECT_N_FORCE
:

524 
TOUCH_OBJECT_N_FORCE
:

525 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

526 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

527 i‡(
ªtvÆ
 < 0) {

528 
	`¥ötf_e
("%†îr‹: faûÅÿgë f‹˚ d©a\n", 
__func__
);

529 
exô
;

531 
	`¥ötf_i
("%†f‹˚ d©®%u\n", 
__func__
, 
d©a
);

532 
off£t
 +
bôs
;

534 
g_tcm_h™dÀr
.
fögî
[g_tcm_h™dÀr.
cuºít_fögî_idx
].
¥s
 = 
d©a
;

536 
TOUCH_GESTURE_ID
:

537 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

538 
ªtvÆ
 = 
	`tcm_gë_d©a_‰om_ªp‹t
(
íåy
, 
size
, 
off£t
, 
bôs
, &
d©a
);

539 i‡(
ªtvÆ
 < 0) {

540 
	`¥ötf_e
("%†îr‹: faûÅÿgë ge°uª id\n", 
__func__
);

541 
exô
;

543 
off£t
 +
bôs
;

545 
TOUCH_GESTURE_DATA
:

546 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

547 
off£t
 +
bôs
;

550 
bôs
 = 
g_tcm_h™dÀr
.
touch_c⁄fig
[
idx
++];

551 
off£t
 +
bôs
;

552 
	`¥ötf_e
("%s warning: unknownÑeport code 0x%x\n",

553 
__func__
, 
code
);

557 
exô
:

559 
	}
}

570 
	$tcm_gë_touch_ªp‹t
(
ªp‹t_size
)

572 
ªtvÆ
;

573 *
touch_ªp‹t
 = 
NULL
;

574 #ifde‡
SAVE_ERR_MSG


575 
îr
[
MAX_ERR_STRING_LEN
];

579 
touch_ªp‹t
 = 
	`ˇŒoc
((
size_t
)
ªp‹t_size
, ());

580 i‡(!
touch_ªp‹t
) {

581 
	`¥ötf_e
("%†îr‹: c™'àÆloˇã mem‹y f‹Åouch_ªp‹t\n", 
__func__
);

582 #ifde‡
SAVE_ERR_MSG


583 
	`•rötf
(
îr
, "%†îr‹: c™'àÆloˇã mem‹y f‹Åouch_ªp‹t\n", 
__func__
);

584 
	`add_îr‹_msg
(
îr
);

586 
ªtvÆ
 = -
ENOMEM
;

587 
exô
;

591 
ªtvÆ
 = 
	`tcm_gë_∑ylﬂd
(
touch_ªp‹t
, 
ªp‹t_size
);

592 i‡(
ªtvÆ
 < 0) {

593 
ªtvÆ
 = -
EINVAL
;

594 
	`¥ötf_e
("%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
ªp‹t_size
);

595 #ifde‡
SAVE_ERR_MSG


596 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgë d©®∑ylﬂd (sizê%d)\n", 
__func__
, 
ªp‹t_size
);

597 
	`add_îr‹_msg
(
îr
);

599 
exô
;

603 
	`tcm_∑r£_touch_ªp‹t
(
touch_ªp‹t
, ()
ªp‹t_size
);

605 
exô
:

606 if(
touch_ªp‹t
)

607 
	`‰ì
(
touch_ªp‹t
);

609  
ªtvÆ
;

610 
	}
}

621 
	$tcm_quîy_touch_ª•⁄£
(*
touch_x
, * 
touch_y
, * 
touch_°©us
,

622 
max_fögîs_to_¥o˚ss
)

624 
tcm_mesßge_hódî
 
hódî
;

625 
ªåy
 = 0;

626 
ªtvÆ
 = 0;

627 
size_∑ylﬂd
 = 0;

628 
boﬁ
 
is_fögî_evít
 = 
Ál£
;

629 
idx
;

630 #ifde‡
SAVE_ERR_MSG


631 
îr
[
MAX_ERR_STRING_LEN
];

635 
ªtvÆ
 = 
	`tcm_ªad_mesßge
((*)&
hódî
, (
tcm_mesßge_hódî
));

636 i‡(
ªtvÆ
 < 0) {

637 
	`¥ötf_e
("%†îr‹: faûÅÿªad hódî fromÅcm devi˚\n", 
__func__
);

638  
ªtvÆ
;

641 i‡–0xA5 =
hódî
.
m¨kî
) {

643 
size_∑ylﬂd
 = 
	`c⁄vît_uc_to_sh‹t
(
hódî
.
Àngth
[0], header.length[1]);

645 i‡–
TCM_REPORT_TOUCH
 =
hódî
.
code
) {

647 i‡(0 =
g_tcm_h™dÀr
.
size_of_fögî_ªp‹t
)

648 
g_tcm_h™dÀr
.
size_of_fögî_ªp‹t
 = 
size_∑ylﬂd
;

650 
is_fögî_evít
 = 
åue
;

654 i‡(
size_∑ylﬂd
 > 0) {

655 
	`tcm_dr›_∑ckage
(
size_∑ylﬂd
);

658 
ªåy
 += 1;

659 
	`u¶ìp
(
POLLING_TOUCH_REPORT_DELAY_MS
 * 1000);

661 }  (
ªåy
 < 
POLLING_TOUCH_REPORT_CNT
) );

664 i‡(
is_fögî_evít
) {

667 
ªtvÆ
 = 
	`tcm_gë_touch_ªp‹t
(
size_∑ylﬂd
);

668 i‡(
ªtvÆ
 < 0) {

669 
ªtvÆ
 = -
EINVAL
;

670 
	`¥ötf_e
("%†îr‹: faûÅÿgëÅhêtouchÑï‹t\n", 
__func__
);

671 #ifde‡
SAVE_ERR_MSG


672 
	`•rötf
(
îr
, "%†îr‹: faûÅÿgëÅhêtouchÑï‹t\n", 
__func__
);

673 
	`add_îr‹_msg
(
îr
);

675 
exô
;

679 
ªtvÆ
 = 
g_tcm_h™dÀr
.
cuºít_fögî_idx
 + 1;

681 i‡(
size_∑ylﬂd
 !
g_tcm_h™dÀr
.
size_of_fögî_ªp‹t
)

682 
ªtvÆ
 = 0;

684 
idx
 = 0; idx < 
ªtvÆ
; idx++) {

685 i‡(
idx
+1 > 
max_fögîs_to_¥o˚ss
 )

688 
touch_x
[
idx
] = 
g_tcm_h™dÀr
.
fögî
[idx].
x
;

689 
touch_y
[
idx
] = 
g_tcm_h™dÀr
.
fögî
[idx].
y
;

690 
touch_°©us
[
idx
] = 
g_tcm_h™dÀr
.
fögî
[idx].
˛assifiˇti⁄
;

695 
exô
:

696  
ªtvÆ
;

697 
	}
}

	@
1
.
0
20
514
cpp/jni/err_msg_ctrl.c
cpp/jni/err_msg_ctrl.h
cpp/jni/extended_high_resistance.c
cpp/jni/native_syna_lib.c
cpp/jni/native_syna_lib.h
cpp/jni/rmi_control.c
cpp/jni/rmi_control.h
cpp/jni/rmi_identify.c
cpp/jni/rmi_production_test.c
cpp/jni/rmi_report_access.c
cpp/jni/rmi_touch_data.c
cpp/jni/syna_dev_manager.c
cpp/jni/syna_dev_manager.h
cpp/jni/tcm_control.c
cpp/jni/tcm_control.h
cpp/jni/tcm_flash_access.c
cpp/jni/tcm_identify.c
cpp/jni/tcm_production_test.c
cpp/jni/tcm_report_access.c
cpp/jni/tcm_touch_data.c
